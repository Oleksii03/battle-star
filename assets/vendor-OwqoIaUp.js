var Uh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Jm=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],u=n[t++],h=n[t++],d=((i&7)<<18|(s&63)<<12|(u&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const s=n[t++],u=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|u&63)}}return e.join("")},Pd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],u=i+1<n.length,h=u?n[i+1]:0,d=i+2<n.length,m=d?n[i+2]:0,y=s>>2,R=(s&3)<<4|h>>4;let N=(h&15)<<2|m>>6,U=m&63;d||(U=64,u||(N=64)),r.push(t[y],t[R],t[N],t[U])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Rd(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Jm(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const R=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||h==null||m==null||R==null)throw new Zm;const N=s<<2|h>>4;if(r.push(N),m!==64){const U=h<<4&240|m>>2;if(r.push(U),R!==64){const L=m<<6&192|R;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Zm extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ev=function(n){const e=Rd(n);return Pd.encodeByteArray(e,!0)},nu=function(n){return ev(n).replace(/\./g,"")},Dd=function(n){try{return Pd.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nv=()=>tv().__FIREBASE_DEFAULTS__,rv=()=>{if(typeof process>"u"||typeof Uh>"u")return;const n=Uh.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iv=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Dd(n[1]);return e&&JSON.parse(e)},Iu=()=>{try{return nv()||rv()||iv()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kd=n=>{var e,t;return(t=(e=Iu())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Nd=n=>{const e=kd(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Od=()=>{var n;return(n=Iu())===null||n===void 0?void 0:n.config},xd=n=>{var e;return(e=Iu())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[nu(JSON.stringify(t)),nu(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ov(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function av(){var n;const e=(n=Iu())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uv(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lv(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function cv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hv(){const n=yn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function fv(){return!av()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dv(){try{return typeof indexedDB=="object"}catch{return!1}}function pv(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="FirebaseError";class Rr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gv,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ko.prototype.create)}}class Ko{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],u=s?mv(s,r):"Error",h=`${this.serviceName}: ${u} (${i}).`;return new Rr(i,h,r)}}function mv(n,e){return n.replace(vv,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vv=/\{\$([^}]+)}/g;function yv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ru(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],u=e[i];if(jh(s)&&jh(u)){if(!ru(s,u))return!1}else if(s!==u)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function jh(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vo(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function yo(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function _v(n,e){const t=new Ev(n,e);return t.subscribe.bind(t)}class Ev{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Tv(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=pl),i.error===void 0&&(i.error=pl),i.complete===void 0&&(i.complete=pl);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tv(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function pl(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n){return n&&n._delegate?n._delegate:n}class _i{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new sv;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Iv(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(s);r===h&&u.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const u=this.instances.get(i);return u&&e(u,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bv(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bv(n){return n===qi?void 0:n}function Iv(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ft||(ft={}));const Cv={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},Sv=ft.INFO,Rv={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},Pv=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Rv[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tc{constructor(e){this.name=e,this._logLevel=Sv,this._logHandler=Pv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ft))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Cv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...e),this._logHandler(this,ft.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...e),this._logHandler(this,ft.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...e),this._logHandler(this,ft.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...e),this._logHandler(this,ft.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...e),this._logHandler(this,ft.ERROR,...e)}}const Dv=(n,e)=>e.some(t=>n instanceof t);let Bh,Hh;function kv(){return Bh||(Bh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Nv(){return Hh||(Hh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Md=new WeakMap,Ul=new WeakMap,Vd=new WeakMap,gl=new WeakMap,wc=new WeakMap;function Ov(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",u)},s=()=>{t(gi(n.result)),i()},u=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Md.set(t,n)}).catch(()=>{}),wc.set(e,n),e}function xv(n){if(Ul.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",u),n.removeEventListener("abort",u)},s=()=>{t(),i()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",u),n.addEventListener("abort",u)});Ul.set(n,e)}let jl={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ul.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Vd.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Lv(n){jl=n(jl)}function Mv(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(ml(this),e,...t);return Vd.set(r,e.sort?e.sort():[e]),gi(r)}:Nv().includes(n)?function(...e){return n.apply(ml(this),e),gi(Md.get(this))}:function(...e){return gi(n.apply(ml(this),e))}}function Vv(n){return typeof n=="function"?Mv(n):(n instanceof IDBTransaction&&xv(n),Dv(n,kv())?new Proxy(n,jl):n)}function gi(n){if(n instanceof IDBRequest)return Ov(n);if(gl.has(n))return gl.get(n);const e=Vv(n);return e!==n&&(gl.set(n,e),wc.set(e,n)),e}const ml=n=>wc.get(n);function Fv(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const u=indexedDB.open(n,e),h=gi(u);return r&&u.addEventListener("upgradeneeded",d=>{r(gi(u.result),d.oldVersion,d.newVersion,gi(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),h.then(d=>{s&&d.addEventListener("close",()=>s()),i&&d.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Uv=["get","getKey","getAll","getAllKeys","count"],jv=["put","add","delete","clear"],vl=new Map;function qh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vl.get(e))return vl.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=jv.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Uv.includes(t)))return;const s=async function(u,...h){const d=this.transaction(u,i?"readwrite":"readonly");let m=d.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),i&&d.done]))[0]};return vl.set(e,s),s}Lv(n=>({...n,get:(e,t,r)=>qh(e,t)||n.get(e,t,r),has:(e,t)=>!!qh(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Hv(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Hv(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Bl="@firebase/app",$h="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr=new Tc("@firebase/app"),qv="@firebase/app-compat",$v="@firebase/analytics-compat",Wv="@firebase/analytics",Gv="@firebase/app-check-compat",zv="@firebase/app-check",Kv="@firebase/auth",Yv="@firebase/auth-compat",Qv="@firebase/database",Xv="@firebase/data-connect",Jv="@firebase/database-compat",Zv="@firebase/functions",ey="@firebase/functions-compat",ty="@firebase/installations",ny="@firebase/installations-compat",ry="@firebase/messaging",iy="@firebase/messaging-compat",sy="@firebase/performance",oy="@firebase/performance-compat",ay="@firebase/remote-config",uy="@firebase/remote-config-compat",ly="@firebase/storage",cy="@firebase/storage-compat",hy="@firebase/firestore",fy="@firebase/vertexai-preview",dy="@firebase/firestore-compat",py="firebase",gy="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl="[DEFAULT]",my={[Bl]:"fire-core",[qv]:"fire-core-compat",[Wv]:"fire-analytics",[$v]:"fire-analytics-compat",[zv]:"fire-app-check",[Gv]:"fire-app-check-compat",[Kv]:"fire-auth",[Yv]:"fire-auth-compat",[Qv]:"fire-rtdb",[Xv]:"fire-data-connect",[Jv]:"fire-rtdb-compat",[Zv]:"fire-fn",[ey]:"fire-fn-compat",[ty]:"fire-iid",[ny]:"fire-iid-compat",[ry]:"fire-fcm",[iy]:"fire-fcm-compat",[sy]:"fire-perf",[oy]:"fire-perf-compat",[ay]:"fire-rc",[uy]:"fire-rc-compat",[ly]:"fire-gcs",[cy]:"fire-gcs-compat",[hy]:"fire-fst",[dy]:"fire-fst-compat",[fy]:"fire-vertex","fire-js":"fire-js",[py]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new Map,vy=new Map,ql=new Map;function Wh(n,e){try{n.container.addComponent(e)}catch(t){zr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qi(n){const e=n.name;if(ql.has(e))return zr.debug(`There were multiple attempts to register component ${e}.`),!1;ql.set(e,n);for(const t of iu.values())Wh(t,n);for(const t of vy.values())Wh(t,n);return!0}function Au(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function nr(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new Ko("app","Firebase",yy);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=gy;function Ey(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Hl,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw mi.create("bad-app-name",{appName:String(i)});if(t||(t=Od()),!t)throw mi.create("no-options");const s=iu.get(i);if(s){if(ru(t,s.options)&&ru(r,s.config))return s;throw mi.create("duplicate-app",{appName:i})}const u=new Av(i);for(const d of ql.values())u.addComponent(d);const h=new _y(t,r,u);return iu.set(i,h),h}function bc(n=Hl){const e=iu.get(n);if(!e&&n===Hl&&Od())return Ey();if(!e)throw mi.create("no-app",{appName:n});return e}function _r(n,e,t){var r;let i=(r=my[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){const h=[`Unable to register library "${i}" with version "${e}":`];s&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zr.warn(h.join(" "));return}Qi(new _i(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="firebase-heartbeat-database",wy=1,ko="firebase-heartbeat-store";let yl=null;function Fd(){return yl||(yl=Fv(Ty,wy,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ko)}catch(t){console.warn(t)}}}}).catch(n=>{throw mi.create("idb-open",{originalErrorMessage:n.message})})),yl}async function by(n){try{const t=(await Fd()).transaction(ko),r=await t.objectStore(ko).get(Ud(n));return await t.done,r}catch(e){if(e instanceof Rr)zr.warn(e.message);else{const t=mi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zr.warn(t.message)}}}async function Gh(n,e){try{const r=(await Fd()).transaction(ko,"readwrite");await r.objectStore(ko).put(e,Ud(n)),await r.done}catch(t){if(t instanceof Rr)zr.warn(t.message);else{const r=mi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});zr.warn(r.message)}}}function Ud(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=1024,Ay=30*24*60*60*1e3;class Cy{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ry(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(u=>u.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const h=new Date(u.date).valueOf();return Date.now()-h<=Ay}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=zh(),{heartbeatsToSend:r,unsentEntries:i}=Sy(this._heartbeatsCache.heartbeats),s=nu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return zr.warn(t),""}}}function zh(){return new Date().toISOString().substring(0,10)}function Sy(n,e=Iy){const t=[];let r=n.slice();for(const i of n){const s=t.find(u=>u.agent===i.agent);if(s){if(s.dates.push(i.date),Kh(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Kh(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Ry{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dv()?pv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await by(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gh(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gh(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Kh(n){return nu(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(n){Qi(new _i("platform-logger",e=>new Bv(e),"PRIVATE")),Qi(new _i("heartbeat",e=>new Cy(e),"PRIVATE")),_r(Bl,$h,n),_r(Bl,$h,"esm2017"),_r("fire-js","")}Py("");function Ic(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function jd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dy=jd,Bd=new Ko("auth","Firebase",jd());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new Tc("@firebase/auth");function ky(n,...e){su.logLevel<=ft.WARN&&su.warn(`Auth (${ss}): ${n}`,...e)}function Ha(n,...e){su.logLevel<=ft.ERROR&&su.error(`Auth (${ss}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(n,...e){throw Cc(n,...e)}function sr(n,...e){return Cc(n,...e)}function Ac(n,e,t){const r=Object.assign(Object.assign({},Dy()),{[e]:t});return new Ko("auth","Firebase",r).create(e,{appName:n.name})}function Wr(n){return Ac(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ny(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xn(n,"argument-error"),Ac(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Cc(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Bd.create(n,...e)}function He(n,e,...t){if(!n)throw Cc(e,...t)}function jr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ha(e),new Error(e)}function Kr(n,e){n||jr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Oy(){return Yh()==="http:"||Yh()==="https:"}function Yh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Oy()||lv()||"connection"in navigator)?navigator.onLine:!0}function Ly(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.shortDelay=e,this.longDelay=t,Kr(t>e,"Short delay should be less than long delay!"),this.isMobile=ov()||cv()}get(){return xy()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(n,e){Kr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Qo(3e4,6e4);function Ci(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Jr(n,e,t,r,i={}){return qd(n,i,async()=>{let s={},u={};r&&(e==="GET"?u=r:s={body:JSON.stringify(r)});const h=Yo(Object.assign({key:n.config.apiKey},u)).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:d},s);return uv()||(m.referrerPolicy="no-referrer"),Hd.fetch()($d(n,n.config.apiHost,t,h),m)})}async function qd(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},My),e);try{const i=new Uy(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const u=await s.json();if("needConfirmation"in u)throw Pa(n,"account-exists-with-different-credential",u);if(s.ok&&!("errorMessage"in u))return u;{const h=s.ok?u.errorMessage:u.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pa(n,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw Pa(n,"email-already-in-use",u);if(d==="USER_DISABLED")throw Pa(n,"user-disabled",u);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw Ac(n,y,m);Xn(n,y)}}catch(i){if(i instanceof Rr)throw i;Xn(n,"network-request-failed",{message:String(i)})}}async function Xo(n,e,t,r,i={}){const s=await Jr(n,e,t,r,i);return"mfaPendingCredential"in s&&Xn(n,"multi-factor-auth-required",{_serverResponse:s}),s}function $d(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?Sc(n.config,i):`${n.config.apiScheme}://${i}`}function Fy(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Uy{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(sr(this.auth,"network-request-failed")),Vy.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Pa(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=sr(n,e,r);return i.customData._tokenResponse=t,i}function Qh(n){return n!==void 0&&n.enterprise!==void 0}class jy{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Fy(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function By(n,e){return Jr(n,"GET","/v2/recaptchaConfig",Ci(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hy(n,e){return Jr(n,"POST","/v1/accounts:delete",e)}async function Wd(n,e){return Jr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qy(n,e=!1){const t=Zt(n),r=await t.getIdToken(e),i=Rc(r);He(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,u=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:wo(_l(i.auth_time)),issuedAtTime:wo(_l(i.iat)),expirationTime:wo(_l(i.exp)),signInProvider:u||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function _l(n){return Number(n)*1e3}function Rc(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ha("JWT malformed, contained fewer than 3 sections"),null;try{const i=Dd(t);return i?JSON.parse(i):(Ha("Failed to decode base64 JWT payload"),null)}catch(i){return Ha("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Xh(n){const e=Rc(n);return He(e,"internal-error"),He(typeof e.exp<"u","internal-error"),He(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Rr&&$y(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $y({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wo(this.lastLoginAt),this.creationTime=wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ou(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Ls(n,Wd(t,{idToken:r}));He(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const u=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Gd(s.providerUserInfo):[],h=zy(n.providerData,u),d=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!(h!=null&&h.length),y=d?m:!1,R={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:h,metadata:new Wl(s.createdAt,s.lastLoginAt),isAnonymous:y};Object.assign(n,R)}async function Gy(n){const e=Zt(n);await ou(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zy(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Gd(n){return n.map(e=>{var{providerId:t}=e,r=Ic(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ky(n,e){const t=await qd(n,{},async()=>{const r=Yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,u=$d(n,i,"/v1/token",`key=${s}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Hd.fetch()(u,{method:"POST",headers:h,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Yy(n,e){return Jr(n,"POST","/v2/accounts:revokeToken",Ci(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){He(e.idToken,"internal-error"),He(typeof e.idToken<"u","internal-error"),He(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){He(e.length!==0,"internal-error");const t=Xh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(He(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Ky(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,u=new Ss;return r&&(He(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),i&&(He(typeof i=="string","internal-error",{appName:e}),u.accessToken=i),s&&(He(typeof s=="number","internal-error",{appName:e}),u.expirationTime=s),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ss,this.toJSON())}_performRefresh(){return jr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(n,e){He(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Br{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Ic(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wl(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Ls(this,this.stsTokenManager.getToken(this.auth,e));return He(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qy(this,e)}reload(){return Gy(this)}_assign(e){this!==e&&(He(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Br(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){He(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ou(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(nr(this.auth.app))return Promise.reject(Wr(this.auth));const e=await this.getIdToken();return await Ls(this,Hy(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,u,h,d,m,y;const R=(r=t.displayName)!==null&&r!==void 0?r:void 0,N=(i=t.email)!==null&&i!==void 0?i:void 0,U=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,L=(u=t.photoURL)!==null&&u!==void 0?u:void 0,O=(h=t.tenantId)!==null&&h!==void 0?h:void 0,q=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,$=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Q=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:X,emailVerified:ee,isAnonymous:ie,providerData:re,stsTokenManager:c}=t;He(X&&c,e,"internal-error");const C=Ss.fromJSON(this.name,c);He(typeof X=="string",e,"internal-error"),ai(R,e.name),ai(N,e.name),He(typeof ee=="boolean",e,"internal-error"),He(typeof ie=="boolean",e,"internal-error"),ai(U,e.name),ai(L,e.name),ai(O,e.name),ai(q,e.name),ai($,e.name),ai(Q,e.name);const T=new Br({uid:X,auth:e,email:N,emailVerified:ee,displayName:R,isAnonymous:ie,photoURL:L,phoneNumber:U,tenantId:O,stsTokenManager:C,createdAt:$,lastLoginAt:Q});return re&&Array.isArray(re)&&(T.providerData=re.map(I=>Object.assign({},I))),q&&(T._redirectEventId=q),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new Ss;i.updateFromServerResponse(t);const s=new Br({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ou(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];He(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Gd(i.providerUserInfo):[],u=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),h=new Ss;h.updateFromIdToken(r);const d=new Br({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=new Map;function Hr(n){Kr(n instanceof Function,"Expected a class definition");let e=Jh.get(n);return e?(Kr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Jh.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zd.type="NONE";const Zh=zd;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(n,e,t){return`firebase:${n}:${e}:${t}`}class Rs{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=qa(this.userKey,i.apiKey,s),this.fullPersistenceKey=qa("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Br._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Rs(Hr(Zh),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let s=i[0]||Hr(Zh);const u=qa(r,e.config.apiKey,e.name);let h=null;for(const m of t)try{const y=await m._get(u);if(y){const R=Br._fromJSON(e,y);m!==s&&(h=R),s=m;break}}catch{}const d=i.filter(m=>m._shouldAllowMigration);return!s._shouldAllowMigration||!d.length?new Rs(s,e,r):(s=d[0],h&&await s._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==s)try{await m._remove(u)}catch{}})),new Rs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Xd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Kd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Zd(e))return"Blackberry";if(ep(e))return"Webos";if(Yd(e))return"Safari";if((e.includes("chrome/")||Qd(e))&&!e.includes("edge/"))return"Chrome";if(Jd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Kd(n=yn()){return/firefox\//i.test(n)}function Yd(n=yn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Qd(n=yn()){return/crios\//i.test(n)}function Xd(n=yn()){return/iemobile/i.test(n)}function Jd(n=yn()){return/android/i.test(n)}function Zd(n=yn()){return/blackberry/i.test(n)}function ep(n=yn()){return/webos/i.test(n)}function Pc(n=yn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Qy(n=yn()){var e;return Pc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xy(){return hv()&&document.documentMode===10}function tp(n=yn()){return Pc(n)||Jd(n)||ep(n)||Zd(n)||/windows phone/i.test(n)||Xd(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(n,e=[]){let t;switch(n){case"Browser":t=ef(yn());break;case"Worker":t=`${ef(yn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((u,h)=>{try{const d=e(s);u(d)}catch(d){h(d)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zy(n,e={}){return Jr(n,"GET","/v2/passwordPolicy",Ci(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=6;class t_{constructor(e){var t,r,i,s;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:e_,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,u,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(i=d.containsLowercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsUppercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tf(this),this.idTokenSubscription=new tf(this),this.beforeStateQueue=new Jy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hr(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Rs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Wd(this,{idToken:e}),r=await Br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(nr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=i==null?void 0:i._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===h)&&(d!=null&&d.user)&&(i=d.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return He(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ou(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ly()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(nr(this.app))return Promise.reject(Wr(this));const t=e?Zt(e):null;return t&&He(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&He(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return nr(this.app)?Promise.reject(Wr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return nr(this.app)?Promise.reject(Wr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zy(this),t=new t_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ko("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Yy(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hr(e)||this._popupRedirectResolver;He(t,this,"argument-error"),this.redirectPersistenceManager=await Rs.create(this,[Hr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(He(h,this,"internal-error"),h.then(()=>{u||s(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,i);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return He(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=np(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&ky(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Si(n){return Zt(n)}class tf{constructor(e){this.auth=e,this.observer=null,this.addObserver=_v(t=>this.observer=t)}get next(){return He(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function r_(n){Cu=n}function rp(n){return Cu.loadJS(n)}function i_(){return Cu.recaptchaEnterpriseScript}function s_(){return Cu.gapiScript}function o_(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const a_="recaptcha-enterprise",u_="NO_RECAPTCHA";class l_{constructor(e){this.type=a_,this.auth=Si(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(u,h)=>{By(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new jy(d);return s.tenantId==null?s._agentRecaptchaConfig=m:s._tenantRecaptchaConfigs[s.tenantId]=m,u(m.siteKey)}}).catch(d=>{h(d)})})}function i(s,u,h){const d=window.grecaptcha;Qh(d)?d.enterprise.ready(()=>{d.enterprise.execute(s,{action:e}).then(m=>{u(m)}).catch(()=>{u(u_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,u)=>{r(this.auth).then(h=>{if(!t&&Qh(window.grecaptcha))i(h,s,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=i_();d.length!==0&&(d+=h),rp(d).then(()=>{i(h,s,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function nf(n,e,t,r=!1){const i=new l_(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const u=Object.assign({},e);return r?Object.assign(u,{captchaResp:s}):Object.assign(u,{captchaResponse:s}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Gl(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await nf(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await nf(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(n,e){const t=Au(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(ru(s,e??{}))return i;Xn(i,"already-initialized")}return t.initialize({options:e})}function h_(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Hr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function f_(n,e,t){const r=Si(n);He(r._canInitEmulator,r,"emulator-config-failed"),He(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ip(e),{host:u,port:h}=d_(e),d=h===null?"":`:${h}`;r.config.emulator={url:`${s}//${u}${d}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:h,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),p_()}function ip(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function d_(n){const e=ip(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:rf(r.substr(s.length+1))}}else{const[s,u]=r.split(":");return{host:s,port:rf(u)}}}function rf(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function p_(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return jr("not implemented")}_getIdTokenResponse(e){return jr("not implemented")}_linkToIdToken(e,t){return jr("not implemented")}_getReauthenticationResolver(e){return jr("not implemented")}}async function g_(n,e){return Jr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m_(n,e){return Xo(n,"POST","/v1/accounts:signInWithPassword",Ci(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v_(n,e){return Xo(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))}async function y_(n,e){return Xo(n,"POST","/v1/accounts:signInWithEmailLink",Ci(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No extends Dc{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new No(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new No(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gl(e,t,"signInWithPassword",m_);case"emailLink":return v_(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Gl(e,r,"signUpPassword",g_);case"emailLink":return y_(e,{idToken:t,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(n,e){return Xo(n,"POST","/v1/accounts:signInWithIdp",Ci(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="http://localhost";class Xi extends Dc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Ic(t,["providerId","signInMethod"]);if(!r||!i)return null;const u=new Xi(r,i);return u.idToken=s.idToken||void 0,u.accessToken=s.accessToken||void 0,u.secret=s.secret,u.nonce=s.nonce,u.pendingToken=s.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ps(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Ps(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ps(e,t)}buildRequest(){const e={requestUri:__,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yo(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function T_(n){const e=vo(yo(n)).link,t=e?vo(yo(e)).deep_link_id:null,r=vo(yo(n)).deep_link_id;return(r?vo(yo(r)).link:null)||r||t||e||n}class kc{constructor(e){var t,r,i,s,u,h;const d=vo(yo(e)),m=(t=d.apiKey)!==null&&t!==void 0?t:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,R=E_((i=d.mode)!==null&&i!==void 0?i:null);He(m&&y&&R,"argument-error"),this.apiKey=m,this.operation=R,this.code=y,this.continueUrl=(s=d.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(u=d.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=T_(e);try{return new kc(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.providerId=zs.PROVIDER_ID}static credential(e,t){return No._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=kc.parseLink(t);return He(r,"argument-error"),No._fromEmailAndCode(e,r.code,r.tenantId)}}zs.PROVIDER_ID="password";zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends Nc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Jo{constructor(){super("facebook.com")}static credential(e){return Xi._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xi._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return li.credential(t,r)}catch{return null}}}li.GOOGLE_SIGN_IN_METHOD="google.com";li.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends Jo{constructor(){super("github.com")}static credential(e){return Xi._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ci.credential(e.oauthAccessToken)}catch{return null}}}ci.GITHUB_SIGN_IN_METHOD="github.com";ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Jo{constructor(){super("twitter.com")}static credential(e,t){return Xi._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return hi.credential(t,r)}catch{return null}}}hi.TWITTER_SIGN_IN_METHOD="twitter.com";hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(n,e){return Xo(n,"POST","/v1/accounts:signUp",Ci(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Br._fromIdTokenResponse(e,r,i),u=sf(r);return new Ji({user:s,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=sf(r);return new Ji({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function sf(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends Rr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,au.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new au(e,t,r,i)}}function sp(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?au._fromErrorAndOperation(n,s,e,r):s})}async function b_(n,e,t=!1){const r=await Ls(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ji._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(n,e,t=!1){const{auth:r}=n;if(nr(r.app))return Promise.reject(Wr(r));const i="reauthenticate";try{const s=await Ls(n,sp(r,i,e,n),t);He(s.idToken,r,"internal-error");const u=Rc(s.idToken);He(u,r,"internal-error");const{sub:h}=u;return He(n.uid===h,r,"user-mismatch"),Ji._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op(n,e,t=!1){if(nr(n.app))return Promise.reject(Wr(n));const r="signIn",i=await sp(n,r,e),s=await Ji._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function A_(n,e){return op(Si(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(n){const e=Si(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function TC(n,e,t){if(nr(n.app))return Promise.reject(Wr(n));const r=Si(n),u=await Gl(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w_).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&ap(n),d}),h=await Ji._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(h.user),h}function wC(n,e,t){return nr(n.app)?Promise.reject(Wr(n)):A_(Zt(n),zs.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ap(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C_(n,e){return Jr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bC(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Zt(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Ls(r,C_(r.auth,s));r.displayName=u.displayName||null,r.photoURL=u.photoUrl||null;const h=r.providerData.find(({providerId:d})=>d==="password");h&&(h.displayName=r.displayName,h.photoURL=r.photoURL),await r._updateTokensIfNecessary(u)}function S_(n,e,t,r){return Zt(n).onIdTokenChanged(e,t,r)}function R_(n,e,t){return Zt(n).beforeAuthStateChanged(e,t)}function IC(n,e,t,r){return Zt(n).onAuthStateChanged(e,t,r)}function AC(n){return Zt(n).signOut()}const uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(uu,"1"),this.storage.removeItem(uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=1e3,D_=10;class lp extends up{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tp(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,d)=>{this.notifyListeners(u,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},s=this.storage.getItem(r);Xy()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,D_):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},P_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}lp.type="LOCAL";const k_=lp;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends up{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}cp.type="SESSION";const hp=cp;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Su(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,u=this.handlersMap[i];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(u).map(async m=>m(t.origin,s)),d=await N_(h);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Su.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,u;return new Promise((h,d)=>{const m=Oc("",20);i.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:i,onMessage(R){const N=R;if(N.data.eventId===m)switch(N.data.status){case"ack":clearTimeout(y),s=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),h(N.data.response);break;default:clearTimeout(y),clearTimeout(s),d(new Error("invalid_response"));break}}},this.handlers.add(u),i.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(){return window}function x_(n){Er().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(){return typeof Er().WorkerGlobalScope<"u"&&typeof Er().importScripts=="function"}async function L_(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function M_(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function V_(){return fp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="firebaseLocalStorageDb",F_=1,lu="firebaseLocalStorage",pp="fbase_key";class Zo{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ru(n,e){return n.transaction([lu],e?"readwrite":"readonly").objectStore(lu)}function U_(){const n=indexedDB.deleteDatabase(dp);return new Zo(n).toPromise()}function zl(){const n=indexedDB.open(dp,F_);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(lu,{keyPath:pp})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(lu)?e(r):(r.close(),await U_(),e(await zl()))})})}async function of(n,e,t){const r=Ru(n,!0).put({[pp]:e,value:t});return new Zo(r).toPromise()}async function j_(n,e){const t=Ru(n,!1).get(e),r=await new Zo(t).toPromise();return r===void 0?null:r.value}function af(n,e){const t=Ru(n,!0).delete(e);return new Zo(t).toPromise()}const B_=800,H_=3;class gp{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zl(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>H_)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Su._getInstance(V_()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await L_(),!this.activeServiceWorker)return;this.sender=new O_(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||M_()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zl();return await of(e,uu,"1"),await af(e,uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>of(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>j_(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>af(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ru(i,!1).getAll();return new Zo(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),B_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gp.type="LOCAL";const q_=gp;new Qo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(n,e){return e?Hr(e):(He(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends Dc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ps(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ps(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ps(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $_(n){return op(n.auth,new xc(n),n.bypassAuthState)}function W_(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),I_(t,new xc(n),n.bypassAuthState)}async function G_(n){const{auth:e,user:t}=n;return He(t,e,"internal-error"),b_(t,new xc(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:u,type:h}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $_;case"linkViaPopup":case"linkViaRedirect":return G_;case"reauthViaPopup":case"reauthViaRedirect":return W_;default:Xn(this.auth,"internal-error")}}resolve(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Qo(2e3,1e4);async function CC(n,e,t){if(nr(n.app))return Promise.reject(sr(n,"operation-not-supported-in-this-environment"));const r=Si(n);Ny(n,e,Nc);const i=mp(r,t);return new Wi(r,"signInViaPopup",e,i).executeNotNull()}class Wi extends vp{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Wi.currentPopupAction&&Wi.currentPopupAction.cancel(),Wi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return He(e,this.auth,"internal-error"),e}async onExecution(){Kr(this.filter.length===1,"Popup operations only handle one event");const e=Oc();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z_.get())};e()}}Wi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="pendingRedirect",$a=new Map;class Y_ extends vp{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=$a.get(this.auth._key());if(!e){try{const r=await Q_(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$a.set(this.auth._key(),e)}return this.bypassAuthState||$a.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Q_(n,e){const t=Z_(e),r=J_(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function X_(n,e){$a.set(n._key(),e)}function J_(n){return Hr(n._redirectPersistence)}function Z_(n){return qa(K_,n.config.apiKey,n.name)}async function eE(n,e,t=!1){if(nr(n.app))return Promise.reject(Wr(n));const r=Si(n),i=mp(r,e),u=await new Y_(r,i,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=10*60*1e3;class nE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rE(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!yp(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(sr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tE&&this.cachedEventUids.clear(),this.cachedEventUids.has(uf(e))}saveEventToCache(e){this.cachedEventUids.add(uf(e)),this.lastProcessedEventTime=Date.now()}}function uf(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function yp({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rE(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yp(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(n,e={}){return Jr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oE=/^https?/;async function aE(n){if(n.config.emulator)return;const{authorizedDomains:e}=await iE(n);for(const t of e)try{if(uE(t))return}catch{}Xn(n,"unauthorized-domain")}function uE(n){const e=$l(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!oE.test(t))return!1;if(sE.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=new Qo(3e4,6e4);function lf(){const n=Er().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cE(n){return new Promise((e,t)=>{var r,i,s;function u(){lf(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lf(),t(sr(n,"network-request-failed"))},timeout:lE.get()})}if(!((i=(r=Er().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Er().gapi)===null||s===void 0)&&s.load)u();else{const h=o_("iframefcb");return Er()[h]=()=>{gapi.load?u():t(sr(n,"network-request-failed"))},rp(`${s_()}?onload=${h}`).catch(d=>t(d))}}).catch(e=>{throw Wa=null,e})}let Wa=null;function hE(n){return Wa=Wa||cE(n),Wa}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Qo(5e3,15e3),dE="__/auth/iframe",pE="emulator/auth/iframe",gE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vE(n){const e=n.config;He(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Sc(e,pE):`https://${n.config.authDomain}/${dE}`,r={apiKey:e.apiKey,appName:n.name,v:ss},i=mE.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Yo(r).slice(1)}`}async function yE(n){const e=await hE(n),t=Er().gapi;return He(t,n,"internal-error"),e.open({where:document.body,url:vE(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gE,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const u=sr(n,"network-request-failed"),h=Er().setTimeout(()=>{s(u)},fE.get());function d(){Er().clearTimeout(h),i(r)}r.ping(d).then(d,()=>{s(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},EE=500,TE=600,wE="_blank",bE="http://localhost";class cf{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IE(n,e,t,r=EE,i=TE){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const d=Object.assign(Object.assign({},_E),{width:r.toString(),height:i.toString(),top:s,left:u}),m=yn().toLowerCase();t&&(h=Qd(m)?wE:t),Kd(m)&&(e=e||bE,d.scrollbars="yes");const y=Object.entries(d).reduce((N,[U,L])=>`${N}${U}=${L},`,"");if(Qy(m)&&h!=="_self")return AE(e||"",h),new cf(null);const R=window.open(e||"",h,y);He(R,n,"popup-blocked");try{R.focus()}catch{}return new cf(R)}function AE(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="__/auth/handler",SE="emulator/auth/handler",RE=encodeURIComponent("fac");async function hf(n,e,t,r,i,s){He(n.config.authDomain,n,"auth-domain-config-required"),He(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ss,eventId:i};if(e instanceof Nc){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",yv(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,R]of Object.entries({}))u[y]=R}if(e instanceof Jo){const y=e.getScopes().filter(R=>R!=="");y.length>0&&(u.scopes=y.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const y of Object.keys(h))h[y]===void 0&&delete h[y];const d=await n._getAppCheckToken(),m=d?`#${RE}=${encodeURIComponent(d)}`:"";return`${PE(n)}?${Yo(h).slice(1)}${m}`}function PE({config:n}){return n.emulator?Sc(n,SE):`https://${n.authDomain}/${CE}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El="webStorageSupport";class DE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hp,this._completeRedirectFn=eE,this._overrideRedirectResult=X_}async _openPopup(e,t,r,i){var s;Kr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const u=await hf(e,t,r,$l(),i);return IE(e,u,Oc())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await hf(e,t,r,$l(),i);return x_(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Kr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await yE(e),r=new nE(e);return t.register("authEvent",i=>(He(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(El,{type:El},i=>{var s;const u=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[El];u!==void 0&&t(!!u),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=aE(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return tp()||Yd()||Pc()}}const kE=DE;var ff="@firebase/auth",df="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){He(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xE(n){Qi(new _i("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=r.options;He(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:np(n)},m=new n_(r,i,s,d);return h_(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qi(new _i("auth-internal",e=>{const t=Si(e.getProvider("auth").getImmediate());return(r=>new NE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_r(ff,df,OE(n)),_r(ff,df,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=5*60,ME=xd("authIdTokenMaxAge")||LE;let pf=null;const VE=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>ME)return;const i=t==null?void 0:t.token;pf!==i&&(pf=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function SC(n=bc()){const e=Au(n,"auth");if(e.isInitialized())return e.getImmediate();const t=c_(n,{popupRedirectResolver:kE,persistence:[q_,k_,hp]}),r=xd("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const u=VE(s.toString());R_(t,u,()=>u(t.currentUser)),S_(t,h=>u(h))}}const i=kd("auth");return i&&f_(t,`http://${i}`),t}function FE(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}r_({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=sr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",FE().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xE("Browser");var UE="firebase",jE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(UE,jE,"app");var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BE(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var _p={exports:{}},Tl={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var gf;function HE(){return gf||(gf=1,function(n){(function(e,t){n.exports=e.document?t(e,!0):function(r){if(!r.document)throw new Error("jQuery requires a window with a document");return t(r)}})(typeof window<"u"?window:Lc,function(e,t){var r=[],i=Object.getPrototypeOf,s=r.slice,u=r.flat?function(o){return r.flat.call(o)}:function(o){return r.concat.apply([],o)},h=r.push,d=r.indexOf,m={},y=m.toString,R=m.hasOwnProperty,N=R.toString,U=N.call(Object),L={},O=function(l){return typeof l=="function"&&typeof l.nodeType!="number"&&typeof l.item!="function"},q=function(l){return l!=null&&l===l.window},$=e.document,Q={type:!0,src:!0,nonce:!0,noModule:!0};function X(o,l,f){f=f||$;var g,_,E=f.createElement("script");if(E.text=o,l)for(g in Q)_=l[g]||l.getAttribute&&l.getAttribute(g),_&&E.setAttribute(g,_);f.head.appendChild(E).parentNode.removeChild(E)}function ee(o){return o==null?o+"":typeof o=="object"||typeof o=="function"?m[y.call(o)]||"object":typeof o}var ie="3.7.1",re=/HTML$/i,c=function(o,l){return new c.fn.init(o,l)};c.fn=c.prototype={jquery:ie,constructor:c,length:0,toArray:function(){return s.call(this)},get:function(o){return o==null?s.call(this):o<0?this[o+this.length]:this[o]},pushStack:function(o){var l=c.merge(this.constructor(),o);return l.prevObject=this,l},each:function(o){return c.each(this,o)},map:function(o){return this.pushStack(c.map(this,function(l,f){return o.call(l,f,l)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(c.grep(this,function(o,l){return(l+1)%2}))},odd:function(){return this.pushStack(c.grep(this,function(o,l){return l%2}))},eq:function(o){var l=this.length,f=+o+(o<0?l:0);return this.pushStack(f>=0&&f<l?[this[f]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:r.sort,splice:r.splice},c.extend=c.fn.extend=function(){var o,l,f,g,_,E,w=arguments[0]||{},V=1,x=arguments.length,H=!1;for(typeof w=="boolean"&&(H=w,w=arguments[V]||{},V++),typeof w!="object"&&!O(w)&&(w={}),V===x&&(w=this,V--);V<x;V++)if((o=arguments[V])!=null)for(l in o)g=o[l],!(l==="__proto__"||w===g)&&(H&&g&&(c.isPlainObject(g)||(_=Array.isArray(g)))?(f=w[l],_&&!Array.isArray(f)?E=[]:!_&&!c.isPlainObject(f)?E={}:E=f,_=!1,w[l]=c.extend(H,E,g)):g!==void 0&&(w[l]=g));return w},c.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(o){throw new Error(o)},noop:function(){},isPlainObject:function(o){var l,f;return!o||y.call(o)!=="[object Object]"?!1:(l=i(o),l?(f=R.call(l,"constructor")&&l.constructor,typeof f=="function"&&N.call(f)===U):!0)},isEmptyObject:function(o){var l;for(l in o)return!1;return!0},globalEval:function(o,l,f){X(o,{nonce:l&&l.nonce},f)},each:function(o,l){var f,g=0;if(C(o))for(f=o.length;g<f&&l.call(o[g],g,o[g])!==!1;g++);else for(g in o)if(l.call(o[g],g,o[g])===!1)break;return o},text:function(o){var l,f="",g=0,_=o.nodeType;if(!_)for(;l=o[g++];)f+=c.text(l);return _===1||_===11?o.textContent:_===9?o.documentElement.textContent:_===3||_===4?o.nodeValue:f},makeArray:function(o,l){var f=l||[];return o!=null&&(C(Object(o))?c.merge(f,typeof o=="string"?[o]:o):h.call(f,o)),f},inArray:function(o,l,f){return l==null?-1:d.call(l,o,f)},isXMLDoc:function(o){var l=o&&o.namespaceURI,f=o&&(o.ownerDocument||o).documentElement;return!re.test(l||f&&f.nodeName||"HTML")},merge:function(o,l){for(var f=+l.length,g=0,_=o.length;g<f;g++)o[_++]=l[g];return o.length=_,o},grep:function(o,l,f){for(var g,_=[],E=0,w=o.length,V=!f;E<w;E++)g=!l(o[E],E),g!==V&&_.push(o[E]);return _},map:function(o,l,f){var g,_,E=0,w=[];if(C(o))for(g=o.length;E<g;E++)_=l(o[E],E,f),_!=null&&w.push(_);else for(E in o)_=l(o[E],E,f),_!=null&&w.push(_);return u(w)},guid:1,support:L}),typeof Symbol=="function"&&(c.fn[Symbol.iterator]=r[Symbol.iterator]),c.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(o,l){m["[object "+l+"]"]=l.toLowerCase()});function C(o){var l=!!o&&"length"in o&&o.length,f=ee(o);return O(o)||q(o)?!1:f==="array"||l===0||typeof l=="number"&&l>0&&l-1 in o}function T(o,l){return o.nodeName&&o.nodeName.toLowerCase()===l.toLowerCase()}var I=r.pop,D=r.sort,M=r.splice,b="[\\x20\\t\\r\\n\\f]",Ie=new RegExp("^"+b+"+|((?:^|[^\\\\])(?:\\\\.)*)"+b+"+$","g");c.contains=function(o,l){var f=l&&l.parentNode;return o===f||!!(f&&f.nodeType===1&&(o.contains?o.contains(f):o.compareDocumentPosition&&o.compareDocumentPosition(f)&16))};var ke=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function lt(o,l){return l?o==="\0"?"":o.slice(0,-1)+"\\"+o.charCodeAt(o.length-1).toString(16)+" ":"\\"+o}c.escapeSelector=function(o){return(o+"").replace(ke,lt)};var Ve=$,_e=h;(function(){var o,l,f,g,_,E=_e,w,V,x,H,J,te=c.expando,z=0,se=0,Ue=Mr(),it=Mr(),je=Mr(),Wt=Mr(),Ft=function(k,j){return k===j&&(_=!0),0},xn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ln="(?:\\\\[\\da-fA-F]{1,6}"+b+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Je="\\["+b+"*("+Ln+")(?:"+b+"*([*^$|!~]?=)"+b+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ln+"))|)"+b+"*\\]",Bt=":("+Ln+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Je+")*)|.*)\\)|)",at=new RegExp(b+"+","g"),Dt=new RegExp("^"+b+"*,"+b+"*"),$n=new RegExp("^"+b+"*([>+~]|"+b+")"+b+"*"),a=new RegExp(b+"|>"),p=new RegExp(Bt),v=new RegExp("^"+Ln+"$"),A={ID:new RegExp("^#("+Ln+")"),CLASS:new RegExp("^\\.("+Ln+")"),TAG:new RegExp("^("+Ln+"|[*])"),ATTR:new RegExp("^"+Je),PSEUDO:new RegExp("^"+Bt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+b+"*(even|odd|(([+-]|)(\\d*)n|)"+b+"*(?:([+-]|)"+b+"*(\\d+)|))"+b+"*\\)|)","i"),bool:new RegExp("^(?:"+xn+")$","i"),needsContext:new RegExp("^"+b+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+b+"*((?:-\\d)?\\d*)"+b+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,ue=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vt=/[+~]/,At=new RegExp("\\\\[\\da-fA-F]{1,6}"+b+"?|\\\\([^\\r\\n\\f])","g"),Xe=function(k,j){var G="0x"+k.slice(1)-65536;return j||(G<0?String.fromCharCode(G+65536):String.fromCharCode(G>>10|55296,G&1023|56320))},en=function(){oi()},tn=Sa(function(k){return k.disabled===!0&&T(k,"fieldset")},{dir:"parentNode",next:"legend"});function si(){try{return w.activeElement}catch{}}try{E.apply(r=s.call(Ve.childNodes),Ve.childNodes),r[Ve.childNodes.length].nodeType}catch{E={apply:function(j,G){_e.apply(j,s.call(G))},call:function(j){_e.apply(j,s.call(arguments,1))}}}function Ze(k,j,G,Y){var ne,de,Te,De,we,st,Be,Ge=j&&j.ownerDocument,ot=j?j.nodeType:9;if(G=G||[],typeof k!="string"||!k||ot!==1&&ot!==9&&ot!==11)return G;if(!Y&&(oi(j),j=j||w,x)){if(ot!==11&&(we=ue.exec(k)))if(ne=we[1]){if(ot===9)if(Te=j.getElementById(ne)){if(Te.id===ne)return E.call(G,Te),G}else return G;else if(Ge&&(Te=Ge.getElementById(ne))&&Ze.contains(j,Te)&&Te.id===ne)return E.call(G,Te),G}else{if(we[2])return E.apply(G,j.getElementsByTagName(k)),G;if((ne=we[3])&&j.getElementsByClassName)return E.apply(G,j.getElementsByClassName(ne)),G}if(!Wt[k+" "]&&(!H||!H.test(k))){if(Be=k,Ge=j,ot===1&&(a.test(k)||$n.test(k))){for(Ge=vt.test(k)&&ll(j.parentNode)||j,(Ge!=j||!L.scope)&&((De=j.getAttribute("id"))?De=c.escapeSelector(De):j.setAttribute("id",De=te)),st=ho(k),de=st.length;de--;)st[de]=(De?"#"+De:":scope")+" "+Ca(st[de]);Be=st.join(",")}try{return E.apply(G,Ge.querySelectorAll(Be)),G}catch{Wt(k,!0)}finally{De===te&&j.removeAttribute("id")}}}return Fh(k.replace(Ie,"$1"),j,G,Y)}function Mr(){var k=[];function j(G,Y){return k.push(G+" ")>l.cacheLength&&delete j[k.shift()],j[G+" "]=Y}return j}function Tn(k){return k[te]=!0,k}function _s(k){var j=w.createElement("fieldset");try{return!!k(j)}catch{return!1}finally{j.parentNode&&j.parentNode.removeChild(j),j=null}}function Km(k){return function(j){return T(j,"input")&&j.type===k}}function Ym(k){return function(j){return(T(j,"input")||T(j,"button"))&&j.type===k}}function Mh(k){return function(j){return"form"in j?j.parentNode&&j.disabled===!1?"label"in j?"label"in j.parentNode?j.parentNode.disabled===k:j.disabled===k:j.isDisabled===k||j.isDisabled!==!k&&tn(j)===k:j.disabled===k:"label"in j?j.disabled===k:!1}}function Bi(k){return Tn(function(j){return j=+j,Tn(function(G,Y){for(var ne,de=k([],G.length,j),Te=de.length;Te--;)G[ne=de[Te]]&&(G[ne]=!(Y[ne]=G[ne]))})})}function ll(k){return k&&typeof k.getElementsByTagName<"u"&&k}function oi(k){var j,G=k?k.ownerDocument||k:Ve;return G==w||G.nodeType!==9||!G.documentElement||(w=G,V=w.documentElement,x=!c.isXMLDoc(w),J=V.matches||V.webkitMatchesSelector||V.msMatchesSelector,V.msMatchesSelector&&Ve!=w&&(j=w.defaultView)&&j.top!==j&&j.addEventListener("unload",en),L.getById=_s(function(Y){return V.appendChild(Y).id=c.expando,!w.getElementsByName||!w.getElementsByName(c.expando).length}),L.disconnectedMatch=_s(function(Y){return J.call(Y,"*")}),L.scope=_s(function(){return w.querySelectorAll(":scope")}),L.cssHas=_s(function(){try{return w.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),L.getById?(l.filter.ID=function(Y){var ne=Y.replace(At,Xe);return function(de){return de.getAttribute("id")===ne}},l.find.ID=function(Y,ne){if(typeof ne.getElementById<"u"&&x){var de=ne.getElementById(Y);return de?[de]:[]}}):(l.filter.ID=function(Y){var ne=Y.replace(At,Xe);return function(de){var Te=typeof de.getAttributeNode<"u"&&de.getAttributeNode("id");return Te&&Te.value===ne}},l.find.ID=function(Y,ne){if(typeof ne.getElementById<"u"&&x){var de,Te,De,we=ne.getElementById(Y);if(we){if(de=we.getAttributeNode("id"),de&&de.value===Y)return[we];for(De=ne.getElementsByName(Y),Te=0;we=De[Te++];)if(de=we.getAttributeNode("id"),de&&de.value===Y)return[we]}return[]}}),l.find.TAG=function(Y,ne){return typeof ne.getElementsByTagName<"u"?ne.getElementsByTagName(Y):ne.querySelectorAll(Y)},l.find.CLASS=function(Y,ne){if(typeof ne.getElementsByClassName<"u"&&x)return ne.getElementsByClassName(Y)},H=[],_s(function(Y){var ne;V.appendChild(Y).innerHTML="<a id='"+te+"' href='' disabled='disabled'></a><select id='"+te+"-\r\\' disabled='disabled'><option selected=''></option></select>",Y.querySelectorAll("[selected]").length||H.push("\\["+b+"*(?:value|"+xn+")"),Y.querySelectorAll("[id~="+te+"-]").length||H.push("~="),Y.querySelectorAll("a#"+te+"+*").length||H.push(".#.+[+~]"),Y.querySelectorAll(":checked").length||H.push(":checked"),ne=w.createElement("input"),ne.setAttribute("type","hidden"),Y.appendChild(ne).setAttribute("name","D"),V.appendChild(Y).disabled=!0,Y.querySelectorAll(":disabled").length!==2&&H.push(":enabled",":disabled"),ne=w.createElement("input"),ne.setAttribute("name",""),Y.appendChild(ne),Y.querySelectorAll("[name='']").length||H.push("\\["+b+"*name"+b+"*="+b+`*(?:''|"")`)}),L.cssHas||H.push(":has"),H=H.length&&new RegExp(H.join("|")),Ft=function(Y,ne){if(Y===ne)return _=!0,0;var de=!Y.compareDocumentPosition-!ne.compareDocumentPosition;return de||(de=(Y.ownerDocument||Y)==(ne.ownerDocument||ne)?Y.compareDocumentPosition(ne):1,de&1||!L.sortDetached&&ne.compareDocumentPosition(Y)===de?Y===w||Y.ownerDocument==Ve&&Ze.contains(Ve,Y)?-1:ne===w||ne.ownerDocument==Ve&&Ze.contains(Ve,ne)?1:g?d.call(g,Y)-d.call(g,ne):0:de&4?-1:1)}),w}Ze.matches=function(k,j){return Ze(k,null,null,j)},Ze.matchesSelector=function(k,j){if(oi(k),x&&!Wt[j+" "]&&(!H||!H.test(j)))try{var G=J.call(k,j);if(G||L.disconnectedMatch||k.document&&k.document.nodeType!==11)return G}catch{Wt(j,!0)}return Ze(j,w,null,[k]).length>0},Ze.contains=function(k,j){return(k.ownerDocument||k)!=w&&oi(k),c.contains(k,j)},Ze.attr=function(k,j){(k.ownerDocument||k)!=w&&oi(k);var G=l.attrHandle[j.toLowerCase()],Y=G&&R.call(l.attrHandle,j.toLowerCase())?G(k,j,!x):void 0;return Y!==void 0?Y:k.getAttribute(j)},Ze.error=function(k){throw new Error("Syntax error, unrecognized expression: "+k)},c.uniqueSort=function(k){var j,G=[],Y=0,ne=0;if(_=!L.sortStable,g=!L.sortStable&&s.call(k,0),D.call(k,Ft),_){for(;j=k[ne++];)j===k[ne]&&(Y=G.push(ne));for(;Y--;)M.call(k,G[Y],1)}return g=null,k},c.fn.uniqueSort=function(){return this.pushStack(c.uniqueSort(s.apply(this)))},l=c.expr={cacheLength:50,createPseudo:Tn,match:A,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(k){return k[1]=k[1].replace(At,Xe),k[3]=(k[3]||k[4]||k[5]||"").replace(At,Xe),k[2]==="~="&&(k[3]=" "+k[3]+" "),k.slice(0,4)},CHILD:function(k){return k[1]=k[1].toLowerCase(),k[1].slice(0,3)==="nth"?(k[3]||Ze.error(k[0]),k[4]=+(k[4]?k[5]+(k[6]||1):2*(k[3]==="even"||k[3]==="odd")),k[5]=+(k[7]+k[8]||k[3]==="odd")):k[3]&&Ze.error(k[0]),k},PSEUDO:function(k){var j,G=!k[6]&&k[2];return A.CHILD.test(k[0])?null:(k[3]?k[2]=k[4]||k[5]||"":G&&p.test(G)&&(j=ho(G,!0))&&(j=G.indexOf(")",G.length-j)-G.length)&&(k[0]=k[0].slice(0,j),k[2]=G.slice(0,j)),k.slice(0,3))}},filter:{TAG:function(k){var j=k.replace(At,Xe).toLowerCase();return k==="*"?function(){return!0}:function(G){return T(G,j)}},CLASS:function(k){var j=Ue[k+" "];return j||(j=new RegExp("(^|"+b+")"+k+"("+b+"|$)"))&&Ue(k,function(G){return j.test(typeof G.className=="string"&&G.className||typeof G.getAttribute<"u"&&G.getAttribute("class")||"")})},ATTR:function(k,j,G){return function(Y){var ne=Ze.attr(Y,k);return ne==null?j==="!=":j?(ne+="",j==="="?ne===G:j==="!="?ne!==G:j==="^="?G&&ne.indexOf(G)===0:j==="*="?G&&ne.indexOf(G)>-1:j==="$="?G&&ne.slice(-G.length)===G:j==="~="?(" "+ne.replace(at," ")+" ").indexOf(G)>-1:j==="|="?ne===G||ne.slice(0,G.length+1)===G+"-":!1):!0}},CHILD:function(k,j,G,Y,ne){var de=k.slice(0,3)!=="nth",Te=k.slice(-4)!=="last",De=j==="of-type";return Y===1&&ne===0?function(we){return!!we.parentNode}:function(we,st,Be){var Ge,ot,xe,St,Rn,dn=de!==Te?"nextSibling":"previousSibling",Wn=we.parentNode,mr=De&&we.nodeName.toLowerCase(),Es=!Be&&!De,wn=!1;if(Wn){if(de){for(;dn;){for(xe=we;xe=xe[dn];)if(De?T(xe,mr):xe.nodeType===1)return!1;Rn=dn=k==="only"&&!Rn&&"nextSibling"}return!0}if(Rn=[Te?Wn.firstChild:Wn.lastChild],Te&&Es){for(ot=Wn[te]||(Wn[te]={}),Ge=ot[k]||[],St=Ge[0]===z&&Ge[1],wn=St&&Ge[2],xe=St&&Wn.childNodes[St];xe=++St&&xe&&xe[dn]||(wn=St=0)||Rn.pop();)if(xe.nodeType===1&&++wn&&xe===we){ot[k]=[z,St,wn];break}}else if(Es&&(ot=we[te]||(we[te]={}),Ge=ot[k]||[],St=Ge[0]===z&&Ge[1],wn=St),wn===!1)for(;(xe=++St&&xe&&xe[dn]||(wn=St=0)||Rn.pop())&&!((De?T(xe,mr):xe.nodeType===1)&&++wn&&(Es&&(ot=xe[te]||(xe[te]={}),ot[k]=[z,wn]),xe===we)););return wn-=ne,wn===Y||wn%Y===0&&wn/Y>=0}}},PSEUDO:function(k,j){var G,Y=l.pseudos[k]||l.setFilters[k.toLowerCase()]||Ze.error("unsupported pseudo: "+k);return Y[te]?Y(j):Y.length>1?(G=[k,k,"",j],l.setFilters.hasOwnProperty(k.toLowerCase())?Tn(function(ne,de){for(var Te,De=Y(ne,j),we=De.length;we--;)Te=d.call(ne,De[we]),ne[Te]=!(de[Te]=De[we])}):function(ne){return Y(ne,0,G)}):Y}},pseudos:{not:Tn(function(k){var j=[],G=[],Y=dl(k.replace(Ie,"$1"));return Y[te]?Tn(function(ne,de,Te,De){for(var we,st=Y(ne,null,De,[]),Be=ne.length;Be--;)(we=st[Be])&&(ne[Be]=!(de[Be]=we))}):function(ne,de,Te){return j[0]=ne,Y(j,null,Te,G),j[0]=null,!G.pop()}}),has:Tn(function(k){return function(j){return Ze(k,j).length>0}}),contains:Tn(function(k){return k=k.replace(At,Xe),function(j){return(j.textContent||c.text(j)).indexOf(k)>-1}}),lang:Tn(function(k){return v.test(k||"")||Ze.error("unsupported lang: "+k),k=k.replace(At,Xe).toLowerCase(),function(j){var G;do if(G=x?j.lang:j.getAttribute("xml:lang")||j.getAttribute("lang"))return G=G.toLowerCase(),G===k||G.indexOf(k+"-")===0;while((j=j.parentNode)&&j.nodeType===1);return!1}}),target:function(k){var j=e.location&&e.location.hash;return j&&j.slice(1)===k.id},root:function(k){return k===V},focus:function(k){return k===si()&&w.hasFocus()&&!!(k.type||k.href||~k.tabIndex)},enabled:Mh(!1),disabled:Mh(!0),checked:function(k){return T(k,"input")&&!!k.checked||T(k,"option")&&!!k.selected},selected:function(k){return k.parentNode&&k.parentNode.selectedIndex,k.selected===!0},empty:function(k){for(k=k.firstChild;k;k=k.nextSibling)if(k.nodeType<6)return!1;return!0},parent:function(k){return!l.pseudos.empty(k)},header:function(k){return K.test(k.nodeName)},input:function(k){return W.test(k.nodeName)},button:function(k){return T(k,"input")&&k.type==="button"||T(k,"button")},text:function(k){var j;return T(k,"input")&&k.type==="text"&&((j=k.getAttribute("type"))==null||j.toLowerCase()==="text")},first:Bi(function(){return[0]}),last:Bi(function(k,j){return[j-1]}),eq:Bi(function(k,j,G){return[G<0?G+j:G]}),even:Bi(function(k,j){for(var G=0;G<j;G+=2)k.push(G);return k}),odd:Bi(function(k,j){for(var G=1;G<j;G+=2)k.push(G);return k}),lt:Bi(function(k,j,G){var Y;for(G<0?Y=G+j:G>j?Y=j:Y=G;--Y>=0;)k.push(Y);return k}),gt:Bi(function(k,j,G){for(var Y=G<0?G+j:G;++Y<j;)k.push(Y);return k})}},l.pseudos.nth=l.pseudos.eq;for(o in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})l.pseudos[o]=Km(o);for(o in{submit:!0,reset:!0})l.pseudos[o]=Ym(o);function Vh(){}Vh.prototype=l.filters=l.pseudos,l.setFilters=new Vh;function ho(k,j){var G,Y,ne,de,Te,De,we,st=it[k+" "];if(st)return j?0:st.slice(0);for(Te=k,De=[],we=l.preFilter;Te;){(!G||(Y=Dt.exec(Te)))&&(Y&&(Te=Te.slice(Y[0].length)||Te),De.push(ne=[])),G=!1,(Y=$n.exec(Te))&&(G=Y.shift(),ne.push({value:G,type:Y[0].replace(Ie," ")}),Te=Te.slice(G.length));for(de in l.filter)(Y=A[de].exec(Te))&&(!we[de]||(Y=we[de](Y)))&&(G=Y.shift(),ne.push({value:G,type:de,matches:Y}),Te=Te.slice(G.length));if(!G)break}return j?Te.length:Te?Ze.error(k):it(k,De).slice(0)}function Ca(k){for(var j=0,G=k.length,Y="";j<G;j++)Y+=k[j].value;return Y}function Sa(k,j,G){var Y=j.dir,ne=j.next,de=ne||Y,Te=G&&de==="parentNode",De=se++;return j.first?function(we,st,Be){for(;we=we[Y];)if(we.nodeType===1||Te)return k(we,st,Be);return!1}:function(we,st,Be){var Ge,ot,xe=[z,De];if(Be){for(;we=we[Y];)if((we.nodeType===1||Te)&&k(we,st,Be))return!0}else for(;we=we[Y];)if(we.nodeType===1||Te)if(ot=we[te]||(we[te]={}),ne&&T(we,ne))we=we[Y]||we;else{if((Ge=ot[de])&&Ge[0]===z&&Ge[1]===De)return xe[2]=Ge[2];if(ot[de]=xe,xe[2]=k(we,st,Be))return!0}return!1}}function cl(k){return k.length>1?function(j,G,Y){for(var ne=k.length;ne--;)if(!k[ne](j,G,Y))return!1;return!0}:k[0]}function Qm(k,j,G){for(var Y=0,ne=j.length;Y<ne;Y++)Ze(k,j[Y],G);return G}function Ra(k,j,G,Y,ne){for(var de,Te=[],De=0,we=k.length,st=j!=null;De<we;De++)(de=k[De])&&(!G||G(de,Y,ne))&&(Te.push(de),st&&j.push(De));return Te}function hl(k,j,G,Y,ne,de){return Y&&!Y[te]&&(Y=hl(Y)),ne&&!ne[te]&&(ne=hl(ne,de)),Tn(function(Te,De,we,st){var Be,Ge,ot,xe,St=[],Rn=[],dn=De.length,Wn=Te||Qm(j||"*",we.nodeType?[we]:we,[]),mr=k&&(Te||!j)?Ra(Wn,St,k,we,st):Wn;if(G?(xe=ne||(Te?k:dn||Y)?[]:De,G(mr,xe,we,st)):xe=mr,Y)for(Be=Ra(xe,Rn),Y(Be,[],we,st),Ge=Be.length;Ge--;)(ot=Be[Ge])&&(xe[Rn[Ge]]=!(mr[Rn[Ge]]=ot));if(Te){if(ne||k){if(ne){for(Be=[],Ge=xe.length;Ge--;)(ot=xe[Ge])&&Be.push(mr[Ge]=ot);ne(null,xe=[],Be,st)}for(Ge=xe.length;Ge--;)(ot=xe[Ge])&&(Be=ne?d.call(Te,ot):St[Ge])>-1&&(Te[Be]=!(De[Be]=ot))}}else xe=Ra(xe===De?xe.splice(dn,xe.length):xe),ne?ne(null,De,xe,st):E.apply(De,xe)})}function fl(k){for(var j,G,Y,ne=k.length,de=l.relative[k[0].type],Te=de||l.relative[" "],De=de?1:0,we=Sa(function(Ge){return Ge===j},Te,!0),st=Sa(function(Ge){return d.call(j,Ge)>-1},Te,!0),Be=[function(Ge,ot,xe){var St=!de&&(xe||ot!=f)||((j=ot).nodeType?we(Ge,ot,xe):st(Ge,ot,xe));return j=null,St}];De<ne;De++)if(G=l.relative[k[De].type])Be=[Sa(cl(Be),G)];else{if(G=l.filter[k[De].type].apply(null,k[De].matches),G[te]){for(Y=++De;Y<ne&&!l.relative[k[Y].type];Y++);return hl(De>1&&cl(Be),De>1&&Ca(k.slice(0,De-1).concat({value:k[De-2].type===" "?"*":""})).replace(Ie,"$1"),G,De<Y&&fl(k.slice(De,Y)),Y<ne&&fl(k=k.slice(Y)),Y<ne&&Ca(k))}Be.push(G)}return cl(Be)}function Xm(k,j){var G=j.length>0,Y=k.length>0,ne=function(de,Te,De,we,st){var Be,Ge,ot,xe=0,St="0",Rn=de&&[],dn=[],Wn=f,mr=de||Y&&l.find.TAG("*",st),Es=z+=Wn==null?1:Math.random()||.1,wn=mr.length;for(st&&(f=Te==w||Te||st);St!==wn&&(Be=mr[St])!=null;St++){if(Y&&Be){for(Ge=0,!Te&&Be.ownerDocument!=w&&(oi(Be),De=!x);ot=k[Ge++];)if(ot(Be,Te||w,De)){E.call(we,Be);break}st&&(z=Es)}G&&((Be=!ot&&Be)&&xe--,de&&Rn.push(Be))}if(xe+=St,G&&St!==xe){for(Ge=0;ot=j[Ge++];)ot(Rn,dn,Te,De);if(de){if(xe>0)for(;St--;)Rn[St]||dn[St]||(dn[St]=I.call(we));dn=Ra(dn)}E.apply(we,dn),st&&!de&&dn.length>0&&xe+j.length>1&&c.uniqueSort(we)}return st&&(z=Es,f=Wn),Rn};return G?Tn(ne):ne}function dl(k,j){var G,Y=[],ne=[],de=je[k+" "];if(!de){for(j||(j=ho(k)),G=j.length;G--;)de=fl(j[G]),de[te]?Y.push(de):ne.push(de);de=je(k,Xm(ne,Y)),de.selector=k}return de}function Fh(k,j,G,Y){var ne,de,Te,De,we,st=typeof k=="function"&&k,Be=!Y&&ho(k=st.selector||k);if(G=G||[],Be.length===1){if(de=Be[0]=Be[0].slice(0),de.length>2&&(Te=de[0]).type==="ID"&&j.nodeType===9&&x&&l.relative[de[1].type]){if(j=(l.find.ID(Te.matches[0].replace(At,Xe),j)||[])[0],j)st&&(j=j.parentNode);else return G;k=k.slice(de.shift().value.length)}for(ne=A.needsContext.test(k)?0:de.length;ne--&&(Te=de[ne],!l.relative[De=Te.type]);)if((we=l.find[De])&&(Y=we(Te.matches[0].replace(At,Xe),vt.test(de[0].type)&&ll(j.parentNode)||j))){if(de.splice(ne,1),k=Y.length&&Ca(de),!k)return E.apply(G,Y),G;break}}return(st||dl(k,Be))(Y,j,!x,G,!j||vt.test(k)&&ll(j.parentNode)||j),G}L.sortStable=te.split("").sort(Ft).join("")===te,oi(),L.sortDetached=_s(function(k){return k.compareDocumentPosition(w.createElement("fieldset"))&1}),c.find=Ze,c.expr[":"]=c.expr.pseudos,c.unique=c.uniqueSort,Ze.compile=dl,Ze.select=Fh,Ze.setDocument=oi,Ze.tokenize=ho,Ze.escape=c.escapeSelector,Ze.getText=c.text,Ze.isXML=c.isXMLDoc,Ze.selectors=c.expr,Ze.support=c.support,Ze.uniqueSort=c.uniqueSort})();var ve=function(o,l,f){for(var g=[],_=f!==void 0;(o=o[l])&&o.nodeType!==9;)if(o.nodeType===1){if(_&&c(o).is(f))break;g.push(o)}return g},he=function(o,l){for(var f=[];o;o=o.nextSibling)o.nodeType===1&&o!==l&&f.push(o);return f},Se=c.expr.match.needsContext,Fe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ze(o,l,f){return O(l)?c.grep(o,function(g,_){return!!l.call(g,_,g)!==f}):l.nodeType?c.grep(o,function(g){return g===l!==f}):typeof l!="string"?c.grep(o,function(g){return d.call(l,g)>-1!==f}):c.filter(l,o,f)}c.filter=function(o,l,f){var g=l[0];return f&&(o=":not("+o+")"),l.length===1&&g.nodeType===1?c.find.matchesSelector(g,o)?[g]:[]:c.find.matches(o,c.grep(l,function(_){return _.nodeType===1}))},c.fn.extend({find:function(o){var l,f,g=this.length,_=this;if(typeof o!="string")return this.pushStack(c(o).filter(function(){for(l=0;l<g;l++)if(c.contains(_[l],this))return!0}));for(f=this.pushStack([]),l=0;l<g;l++)c.find(o,_[l],f);return g>1?c.uniqueSort(f):f},filter:function(o){return this.pushStack(ze(this,o||[],!1))},not:function(o){return this.pushStack(ze(this,o||[],!0))},is:function(o){return!!ze(this,typeof o=="string"&&Se.test(o)?c(o):o||[],!1).length}});var Et,bt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,fe=c.fn.init=function(o,l,f){var g,_;if(!o)return this;if(f=f||Et,typeof o=="string")if(o[0]==="<"&&o[o.length-1]===">"&&o.length>=3?g=[null,o,null]:g=bt.exec(o),g&&(g[1]||!l))if(g[1]){if(l=l instanceof c?l[0]:l,c.merge(this,c.parseHTML(g[1],l&&l.nodeType?l.ownerDocument||l:$,!0)),Fe.test(g[1])&&c.isPlainObject(l))for(g in l)O(this[g])?this[g](l[g]):this.attr(g,l[g]);return this}else return _=$.getElementById(g[2]),_&&(this[0]=_,this.length=1),this;else return!l||l.jquery?(l||f).find(o):this.constructor(l).find(o);else{if(o.nodeType)return this[0]=o,this.length=1,this;if(O(o))return f.ready!==void 0?f.ready(o):o(c)}return c.makeArray(o,this)};fe.prototype=c.fn,Et=c($);var $e=/^(?:parents|prev(?:Until|All))/,gt={children:!0,contents:!0,next:!0,prev:!0};c.fn.extend({has:function(o){var l=c(o,this),f=l.length;return this.filter(function(){for(var g=0;g<f;g++)if(c.contains(this,l[g]))return!0})},closest:function(o,l){var f,g=0,_=this.length,E=[],w=typeof o!="string"&&c(o);if(!Se.test(o)){for(;g<_;g++)for(f=this[g];f&&f!==l;f=f.parentNode)if(f.nodeType<11&&(w?w.index(f)>-1:f.nodeType===1&&c.find.matchesSelector(f,o))){E.push(f);break}}return this.pushStack(E.length>1?c.uniqueSort(E):E)},index:function(o){return o?typeof o=="string"?d.call(c(o),this[0]):d.call(this,o.jquery?o[0]:o):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(o,l){return this.pushStack(c.uniqueSort(c.merge(this.get(),c(o,l))))},addBack:function(o){return this.add(o==null?this.prevObject:this.prevObject.filter(o))}});function nt(o,l){for(;(o=o[l])&&o.nodeType!==1;);return o}c.each({parent:function(o){var l=o.parentNode;return l&&l.nodeType!==11?l:null},parents:function(o){return ve(o,"parentNode")},parentsUntil:function(o,l,f){return ve(o,"parentNode",f)},next:function(o){return nt(o,"nextSibling")},prev:function(o){return nt(o,"previousSibling")},nextAll:function(o){return ve(o,"nextSibling")},prevAll:function(o){return ve(o,"previousSibling")},nextUntil:function(o,l,f){return ve(o,"nextSibling",f)},prevUntil:function(o,l,f){return ve(o,"previousSibling",f)},siblings:function(o){return he((o.parentNode||{}).firstChild,o)},children:function(o){return he(o.firstChild)},contents:function(o){return o.contentDocument!=null&&i(o.contentDocument)?o.contentDocument:(T(o,"template")&&(o=o.content||o),c.merge([],o.childNodes))}},function(o,l){c.fn[o]=function(f,g){var _=c.map(this,l,f);return o.slice(-5)!=="Until"&&(g=f),g&&typeof g=="string"&&(_=c.filter(g,_)),this.length>1&&(gt[o]||c.uniqueSort(_),$e.test(o)&&_.reverse()),this.pushStack(_)}});var tt=/[^\x20\t\r\n\f]+/g;function _n(o){var l={};return c.each(o.match(tt)||[],function(f,g){l[g]=!0}),l}c.Callbacks=function(o){o=typeof o=="string"?_n(o):c.extend({},o);var l,f,g,_,E=[],w=[],V=-1,x=function(){for(_=_||o.once,g=l=!0;w.length;V=-1)for(f=w.shift();++V<E.length;)E[V].apply(f[0],f[1])===!1&&o.stopOnFalse&&(V=E.length,f=!1);o.memory||(f=!1),l=!1,_&&(f?E=[]:E="")},H={add:function(){return E&&(f&&!l&&(V=E.length-1,w.push(f)),function J(te){c.each(te,function(z,se){O(se)?(!o.unique||!H.has(se))&&E.push(se):se&&se.length&&ee(se)!=="string"&&J(se)})}(arguments),f&&!l&&x()),this},remove:function(){return c.each(arguments,function(J,te){for(var z;(z=c.inArray(te,E,z))>-1;)E.splice(z,1),z<=V&&V--}),this},has:function(J){return J?c.inArray(J,E)>-1:E.length>0},empty:function(){return E&&(E=[]),this},disable:function(){return _=w=[],E=f="",this},disabled:function(){return!E},lock:function(){return _=w=[],!f&&!l&&(E=f=""),this},locked:function(){return!!_},fireWith:function(J,te){return _||(te=te||[],te=[J,te.slice?te.slice():te],w.push(te),l||x()),this},fire:function(){return H.fireWith(this,arguments),this},fired:function(){return!!g}};return H};function Lt(o){return o}function pe(o){throw o}function rt(o,l,f,g){var _;try{o&&O(_=o.promise)?_.call(o).done(l).fail(f):o&&O(_=o.then)?_.call(o,l,f):l.apply(void 0,[o].slice(g))}catch(E){f.apply(void 0,[E])}}c.extend({Deferred:function(o){var l=[["notify","progress",c.Callbacks("memory"),c.Callbacks("memory"),2],["resolve","done",c.Callbacks("once memory"),c.Callbacks("once memory"),0,"resolved"],["reject","fail",c.Callbacks("once memory"),c.Callbacks("once memory"),1,"rejected"]],f="pending",g={state:function(){return f},always:function(){return _.done(arguments).fail(arguments),this},catch:function(E){return g.then(null,E)},pipe:function(){var E=arguments;return c.Deferred(function(w){c.each(l,function(V,x){var H=O(E[x[4]])&&E[x[4]];_[x[1]](function(){var J=H&&H.apply(this,arguments);J&&O(J.promise)?J.promise().progress(w.notify).done(w.resolve).fail(w.reject):w[x[0]+"With"](this,H?[J]:arguments)})}),E=null}).promise()},then:function(E,w,V){var x=0;function H(J,te,z,se){return function(){var Ue=this,it=arguments,je=function(){var Ft,xn;if(!(J<x)){if(Ft=z.apply(Ue,it),Ft===te.promise())throw new TypeError("Thenable self-resolution");xn=Ft&&(typeof Ft=="object"||typeof Ft=="function")&&Ft.then,O(xn)?se?xn.call(Ft,H(x,te,Lt,se),H(x,te,pe,se)):(x++,xn.call(Ft,H(x,te,Lt,se),H(x,te,pe,se),H(x,te,Lt,te.notifyWith))):(z!==Lt&&(Ue=void 0,it=[Ft]),(se||te.resolveWith)(Ue,it))}},Wt=se?je:function(){try{je()}catch(Ft){c.Deferred.exceptionHook&&c.Deferred.exceptionHook(Ft,Wt.error),J+1>=x&&(z!==pe&&(Ue=void 0,it=[Ft]),te.rejectWith(Ue,it))}};J?Wt():(c.Deferred.getErrorHook?Wt.error=c.Deferred.getErrorHook():c.Deferred.getStackHook&&(Wt.error=c.Deferred.getStackHook()),e.setTimeout(Wt))}}return c.Deferred(function(J){l[0][3].add(H(0,J,O(V)?V:Lt,J.notifyWith)),l[1][3].add(H(0,J,O(E)?E:Lt)),l[2][3].add(H(0,J,O(w)?w:pe))}).promise()},promise:function(E){return E!=null?c.extend(E,g):g}},_={};return c.each(l,function(E,w){var V=w[2],x=w[5];g[w[1]]=V.add,x&&V.add(function(){f=x},l[3-E][2].disable,l[3-E][3].disable,l[0][2].lock,l[0][3].lock),V.add(w[3].fire),_[w[0]]=function(){return _[w[0]+"With"](this===_?void 0:this,arguments),this},_[w[0]+"With"]=V.fireWith}),g.promise(_),o&&o.call(_,_),_},when:function(o){var l=arguments.length,f=l,g=Array(f),_=s.call(arguments),E=c.Deferred(),w=function(V){return function(x){g[V]=this,_[V]=arguments.length>1?s.call(arguments):x,--l||E.resolveWith(g,_)}};if(l<=1&&(rt(o,E.done(w(f)).resolve,E.reject,!l),E.state()==="pending"||O(_[f]&&_[f].then)))return E.then();for(;f--;)rt(_[f],w(f),E.reject);return E.promise()}});var qt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;c.Deferred.exceptionHook=function(o,l){e.console&&e.console.warn&&o&&qt.test(o.name)&&e.console.warn("jQuery.Deferred exception: "+o.message,o.stack,l)},c.readyException=function(o){e.setTimeout(function(){throw o})};var zt=c.Deferred();c.fn.ready=function(o){return zt.then(o).catch(function(l){c.readyException(l)}),this},c.extend({isReady:!1,readyWait:1,ready:function(o){(o===!0?--c.readyWait:c.isReady)||(c.isReady=!0,!(o!==!0&&--c.readyWait>0)&&zt.resolveWith($,[c]))}}),c.ready.then=zt.then;function We(){$.removeEventListener("DOMContentLoaded",We),e.removeEventListener("load",We),c.ready()}$.readyState==="complete"||$.readyState!=="loading"&&!$.documentElement.doScroll?e.setTimeout(c.ready):($.addEventListener("DOMContentLoaded",We),e.addEventListener("load",We));var Mt=function(o,l,f,g,_,E,w){var V=0,x=o.length,H=f==null;if(ee(f)==="object"){_=!0;for(V in f)Mt(o,l,V,f[V],!0,E,w)}else if(g!==void 0&&(_=!0,O(g)||(w=!0),H&&(w?(l.call(o,g),l=null):(H=l,l=function(J,te,z){return H.call(c(J),z)})),l))for(;V<x;V++)l(o[V],f,w?g:g.call(o[V],V,l(o[V],f)));return _?o:H?l.call(o):x?l(o[0],f):E},An=/^-ms-/,Un=/-([a-z])/g;function ar(o,l){return l.toUpperCase()}function rn(o){return o.replace(An,"ms-").replace(Un,ar)}var En=function(o){return o.nodeType===1||o.nodeType===9||!+o.nodeType};function Cn(){this.expando=c.expando+Cn.uid++}Cn.uid=1,Cn.prototype={cache:function(o){var l=o[this.expando];return l||(l={},En(o)&&(o.nodeType?o[this.expando]=l:Object.defineProperty(o,this.expando,{value:l,configurable:!0}))),l},set:function(o,l,f){var g,_=this.cache(o);if(typeof l=="string")_[rn(l)]=f;else for(g in l)_[rn(g)]=l[g];return _},get:function(o,l){return l===void 0?this.cache(o):o[this.expando]&&o[this.expando][rn(l)]},access:function(o,l,f){return l===void 0||l&&typeof l=="string"&&f===void 0?this.get(o,l):(this.set(o,l,f),f!==void 0?f:l)},remove:function(o,l){var f,g=o[this.expando];if(g!==void 0){if(l!==void 0)for(Array.isArray(l)?l=l.map(rn):(l=rn(l),l=l in g?[l]:l.match(tt)||[]),f=l.length;f--;)delete g[l[f]];(l===void 0||c.isEmptyObject(g))&&(o.nodeType?o[this.expando]=void 0:delete o[this.expando])}},hasData:function(o){var l=o[this.expando];return l!==void 0&&!c.isEmptyObject(l)}};var Ae=new Cn,ct=new Cn,Vt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ge=/[A-Z]/g;function F(o){return o==="true"?!0:o==="false"?!1:o==="null"?null:o===+o+""?+o:Vt.test(o)?JSON.parse(o):o}function ce(o,l,f){var g;if(f===void 0&&o.nodeType===1)if(g="data-"+l.replace(ge,"-$&").toLowerCase(),f=o.getAttribute(g),typeof f=="string"){try{f=F(f)}catch{}ct.set(o,l,f)}else f=void 0;return f}c.extend({hasData:function(o){return ct.hasData(o)||Ae.hasData(o)},data:function(o,l,f){return ct.access(o,l,f)},removeData:function(o,l){ct.remove(o,l)},_data:function(o,l,f){return Ae.access(o,l,f)},_removeData:function(o,l){Ae.remove(o,l)}}),c.fn.extend({data:function(o,l){var f,g,_,E=this[0],w=E&&E.attributes;if(o===void 0){if(this.length&&(_=ct.get(E),E.nodeType===1&&!Ae.get(E,"hasDataAttrs"))){for(f=w.length;f--;)w[f]&&(g=w[f].name,g.indexOf("data-")===0&&(g=rn(g.slice(5)),ce(E,g,_[g])));Ae.set(E,"hasDataAttrs",!0)}return _}return typeof o=="object"?this.each(function(){ct.set(this,o)}):Mt(this,function(V){var x;if(E&&V===void 0)return x=ct.get(E,o),x!==void 0||(x=ce(E,o),x!==void 0)?x:void 0;this.each(function(){ct.set(this,o,V)})},null,l,arguments.length>1,null,!0)},removeData:function(o){return this.each(function(){ct.remove(this,o)})}}),c.extend({queue:function(o,l,f){var g;if(o)return l=(l||"fx")+"queue",g=Ae.get(o,l),f&&(!g||Array.isArray(f)?g=Ae.access(o,l,c.makeArray(f)):g.push(f)),g||[]},dequeue:function(o,l){l=l||"fx";var f=c.queue(o,l),g=f.length,_=f.shift(),E=c._queueHooks(o,l),w=function(){c.dequeue(o,l)};_==="inprogress"&&(_=f.shift(),g--),_&&(l==="fx"&&f.unshift("inprogress"),delete E.stop,_.call(o,w,E)),!g&&E&&E.empty.fire()},_queueHooks:function(o,l){var f=l+"queueHooks";return Ae.get(o,f)||Ae.access(o,f,{empty:c.Callbacks("once memory").add(function(){Ae.remove(o,[l+"queue",f])})})}}),c.fn.extend({queue:function(o,l){var f=2;return typeof o!="string"&&(l=o,o="fx",f--),arguments.length<f?c.queue(this[0],o):l===void 0?this:this.each(function(){var g=c.queue(this,o,l);c._queueHooks(this,o),o==="fx"&&g[0]!=="inprogress"&&c.dequeue(this,o)})},dequeue:function(o){return this.each(function(){c.dequeue(this,o)})},clearQueue:function(o){return this.queue(o||"fx",[])},promise:function(o,l){var f,g=1,_=c.Deferred(),E=this,w=this.length,V=function(){--g||_.resolveWith(E,[E])};for(typeof o!="string"&&(l=o,o=void 0),o=o||"fx";w--;)f=Ae.get(E[w],o+"queueHooks"),f&&f.empty&&(g++,f.empty.add(V));return V(),_.promise(l)}});var ye=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ce=new RegExp("^(?:([+-])=|)("+ye+")([a-z%]*)$","i"),kt=["Top","Right","Bottom","Left"],$t=$.documentElement,Qe=function(o){return c.contains(o.ownerDocument,o)},jn={composed:!0};$t.getRootNode&&(Qe=function(o){return c.contains(o.ownerDocument,o)||o.getRootNode(jn)===o.ownerDocument});var Bn=function(o,l){return o=l||o,o.style.display==="none"||o.style.display===""&&Qe(o)&&c.css(o,"display")==="none"};function Zn(o,l,f,g){var _,E,w=20,V=g?function(){return g.cur()}:function(){return c.css(o,l,"")},x=V(),H=f&&f[3]||(c.cssNumber[l]?"":"px"),J=o.nodeType&&(c.cssNumber[l]||H!=="px"&&+x)&&Ce.exec(c.css(o,l));if(J&&J[3]!==H){for(x=x/2,H=H||J[3],J=+x||1;w--;)c.style(o,l,J+H),(1-E)*(1-(E=V()/x||.5))<=0&&(w=0),J=J/E;J=J*2,c.style(o,l,J+H),f=f||[]}return f&&(J=+J||+x||0,_=f[1]?J+(f[1]+1)*f[2]:+f[2],g&&(g.unit=H,g.start=J,g.end=_)),_}var Tt={};function ur(o){var l,f=o.ownerDocument,g=o.nodeName,_=Tt[g];return _||(l=f.body.appendChild(f.createElement(g)),_=c.css(l,"display"),l.parentNode.removeChild(l),_==="none"&&(_="block"),Tt[g]=_,_)}function Ct(o,l){for(var f,g,_=[],E=0,w=o.length;E<w;E++)g=o[E],g.style&&(f=g.style.display,l?(f==="none"&&(_[E]=Ae.get(g,"display")||null,_[E]||(g.style.display="")),g.style.display===""&&Bn(g)&&(_[E]=ur(g))):f!=="none"&&(_[E]="none",Ae.set(g,"display",f)));for(E=0;E<w;E++)_[E]!=null&&(o[E].style.display=_[E]);return o}c.fn.extend({show:function(){return Ct(this,!0)},hide:function(){return Ct(this)},toggle:function(o){return typeof o=="boolean"?o?this.show():this.hide():this.each(function(){Bn(this)?c(this).show():c(this).hide()})}});var fn=/^(?:checkbox|radio)$/i,Zr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,S=/^$|^module$|\/(?:java|ecma)script/i;(function(){var o=$.createDocumentFragment(),l=o.appendChild($.createElement("div")),f=$.createElement("input");f.setAttribute("type","radio"),f.setAttribute("checked","checked"),f.setAttribute("name","t"),l.appendChild(f),L.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,l.innerHTML="<textarea>x</textarea>",L.noCloneChecked=!!l.cloneNode(!0).lastChild.defaultValue,l.innerHTML="<option></option>",L.option=!!l.lastChild})();var P={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};P.tbody=P.tfoot=P.colgroup=P.caption=P.thead,P.th=P.td,L.option||(P.optgroup=P.option=[1,"<select multiple='multiple'>","</select>"]);function B(o,l){var f;return typeof o.getElementsByTagName<"u"?f=o.getElementsByTagName(l||"*"):typeof o.querySelectorAll<"u"?f=o.querySelectorAll(l||"*"):f=[],l===void 0||l&&T(o,l)?c.merge([o],f):f}function Z(o,l){for(var f=0,g=o.length;f<g;f++)Ae.set(o[f],"globalEval",!l||Ae.get(l[f],"globalEval"))}var le=/<|&#?\w+;/;function me(o,l,f,g,_){for(var E,w,V,x,H,J,te=l.createDocumentFragment(),z=[],se=0,Ue=o.length;se<Ue;se++)if(E=o[se],E||E===0)if(ee(E)==="object")c.merge(z,E.nodeType?[E]:E);else if(!le.test(E))z.push(l.createTextNode(E));else{for(w=w||te.appendChild(l.createElement("div")),V=(Zr.exec(E)||["",""])[1].toLowerCase(),x=P[V]||P._default,w.innerHTML=x[1]+c.htmlPrefilter(E)+x[2],J=x[0];J--;)w=w.lastChild;c.merge(z,w.childNodes),w=te.firstChild,w.textContent=""}for(te.textContent="",se=0;E=z[se++];){if(g&&c.inArray(E,g)>-1){_&&_.push(E);continue}if(H=Qe(E),w=B(te.appendChild(E),"script"),H&&Z(w),f)for(J=0;E=w[J++];)S.test(E.type||"")&&f.push(E)}return te}var Pe=/^([^.]*)(?:\.(.+)|)/;function be(){return!0}function Me(){return!1}function Ee(o,l,f,g,_,E){var w,V;if(typeof l=="object"){typeof f!="string"&&(g=g||f,f=void 0);for(V in l)Ee(o,V,f,g,l[V],E);return o}if(g==null&&_==null?(_=f,g=f=void 0):_==null&&(typeof f=="string"?(_=g,g=void 0):(_=g,g=f,f=void 0)),_===!1)_=Me;else if(!_)return o;return E===1&&(w=_,_=function(x){return c().off(x),w.apply(this,arguments)},_.guid=w.guid||(w.guid=c.guid++)),o.each(function(){c.event.add(this,l,_,g,f)})}c.event={global:{},add:function(o,l,f,g,_){var E,w,V,x,H,J,te,z,se,Ue,it,je=Ae.get(o);if(En(o))for(f.handler&&(E=f,f=E.handler,_=E.selector),_&&c.find.matchesSelector($t,_),f.guid||(f.guid=c.guid++),(x=je.events)||(x=je.events=Object.create(null)),(w=je.handle)||(w=je.handle=function(Wt){return typeof c<"u"&&c.event.triggered!==Wt.type?c.event.dispatch.apply(o,arguments):void 0}),l=(l||"").match(tt)||[""],H=l.length;H--;)V=Pe.exec(l[H])||[],se=it=V[1],Ue=(V[2]||"").split(".").sort(),se&&(te=c.event.special[se]||{},se=(_?te.delegateType:te.bindType)||se,te=c.event.special[se]||{},J=c.extend({type:se,origType:it,data:g,handler:f,guid:f.guid,selector:_,needsContext:_&&c.expr.match.needsContext.test(_),namespace:Ue.join(".")},E),(z=x[se])||(z=x[se]=[],z.delegateCount=0,(!te.setup||te.setup.call(o,g,Ue,w)===!1)&&o.addEventListener&&o.addEventListener(se,w)),te.add&&(te.add.call(o,J),J.handler.guid||(J.handler.guid=f.guid)),_?z.splice(z.delegateCount++,0,J):z.push(J),c.event.global[se]=!0)},remove:function(o,l,f,g,_){var E,w,V,x,H,J,te,z,se,Ue,it,je=Ae.hasData(o)&&Ae.get(o);if(!(!je||!(x=je.events))){for(l=(l||"").match(tt)||[""],H=l.length;H--;){if(V=Pe.exec(l[H])||[],se=it=V[1],Ue=(V[2]||"").split(".").sort(),!se){for(se in x)c.event.remove(o,se+l[H],f,g,!0);continue}for(te=c.event.special[se]||{},se=(g?te.delegateType:te.bindType)||se,z=x[se]||[],V=V[2]&&new RegExp("(^|\\.)"+Ue.join("\\.(?:.*\\.|)")+"(\\.|$)"),w=E=z.length;E--;)J=z[E],(_||it===J.origType)&&(!f||f.guid===J.guid)&&(!V||V.test(J.namespace))&&(!g||g===J.selector||g==="**"&&J.selector)&&(z.splice(E,1),J.selector&&z.delegateCount--,te.remove&&te.remove.call(o,J));w&&!z.length&&((!te.teardown||te.teardown.call(o,Ue,je.handle)===!1)&&c.removeEvent(o,se,je.handle),delete x[se])}c.isEmptyObject(x)&&Ae.remove(o,"handle events")}},dispatch:function(o){var l,f,g,_,E,w,V=new Array(arguments.length),x=c.event.fix(o),H=(Ae.get(this,"events")||Object.create(null))[x.type]||[],J=c.event.special[x.type]||{};for(V[0]=x,l=1;l<arguments.length;l++)V[l]=arguments[l];if(x.delegateTarget=this,!(J.preDispatch&&J.preDispatch.call(this,x)===!1)){for(w=c.event.handlers.call(this,x,H),l=0;(_=w[l++])&&!x.isPropagationStopped();)for(x.currentTarget=_.elem,f=0;(E=_.handlers[f++])&&!x.isImmediatePropagationStopped();)(!x.rnamespace||E.namespace===!1||x.rnamespace.test(E.namespace))&&(x.handleObj=E,x.data=E.data,g=((c.event.special[E.origType]||{}).handle||E.handler).apply(_.elem,V),g!==void 0&&(x.result=g)===!1&&(x.preventDefault(),x.stopPropagation()));return J.postDispatch&&J.postDispatch.call(this,x),x.result}},handlers:function(o,l){var f,g,_,E,w,V=[],x=l.delegateCount,H=o.target;if(x&&H.nodeType&&!(o.type==="click"&&o.button>=1)){for(;H!==this;H=H.parentNode||this)if(H.nodeType===1&&!(o.type==="click"&&H.disabled===!0)){for(E=[],w={},f=0;f<x;f++)g=l[f],_=g.selector+" ",w[_]===void 0&&(w[_]=g.needsContext?c(_,this).index(H)>-1:c.find(_,this,null,[H]).length),w[_]&&E.push(g);E.length&&V.push({elem:H,handlers:E})}}return H=this,x<l.length&&V.push({elem:H,handlers:l.slice(x)}),V},addProp:function(o,l){Object.defineProperty(c.Event.prototype,o,{enumerable:!0,configurable:!0,get:O(l)?function(){if(this.originalEvent)return l(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[o]},set:function(f){Object.defineProperty(this,o,{enumerable:!0,configurable:!0,writable:!0,value:f})}})},fix:function(o){return o[c.expando]?o:new c.Event(o)},special:{load:{noBubble:!0},click:{setup:function(o){var l=this||o;return fn.test(l.type)&&l.click&&T(l,"input")&&Ne(l,"click",!0),!1},trigger:function(o){var l=this||o;return fn.test(l.type)&&l.click&&T(l,"input")&&Ne(l,"click"),!0},_default:function(o){var l=o.target;return fn.test(l.type)&&l.click&&T(l,"input")&&Ae.get(l,"click")||T(l,"a")}},beforeunload:{postDispatch:function(o){o.result!==void 0&&o.originalEvent&&(o.originalEvent.returnValue=o.result)}}}};function Ne(o,l,f){if(!f){Ae.get(o,l)===void 0&&c.event.add(o,l,be);return}Ae.set(o,l,!1),c.event.add(o,l,{namespace:!1,handler:function(g){var _,E=Ae.get(this,l);if(g.isTrigger&1&&this[l]){if(E)(c.event.special[l]||{}).delegateType&&g.stopPropagation();else if(E=s.call(arguments),Ae.set(this,l,E),this[l](),_=Ae.get(this,l),Ae.set(this,l,!1),E!==_)return g.stopImmediatePropagation(),g.preventDefault(),_}else E&&(Ae.set(this,l,c.event.trigger(E[0],E.slice(1),this)),g.stopPropagation(),g.isImmediatePropagationStopped=be)}})}c.removeEvent=function(o,l,f){o.removeEventListener&&o.removeEventListener(l,f)},c.Event=function(o,l){if(!(this instanceof c.Event))return new c.Event(o,l);o&&o.type?(this.originalEvent=o,this.type=o.type,this.isDefaultPrevented=o.defaultPrevented||o.defaultPrevented===void 0&&o.returnValue===!1?be:Me,this.target=o.target&&o.target.nodeType===3?o.target.parentNode:o.target,this.currentTarget=o.currentTarget,this.relatedTarget=o.relatedTarget):this.type=o,l&&c.extend(this,l),this.timeStamp=o&&o.timeStamp||Date.now(),this[c.expando]=!0},c.Event.prototype={constructor:c.Event,isDefaultPrevented:Me,isPropagationStopped:Me,isImmediatePropagationStopped:Me,isSimulated:!1,preventDefault:function(){var o=this.originalEvent;this.isDefaultPrevented=be,o&&!this.isSimulated&&o.preventDefault()},stopPropagation:function(){var o=this.originalEvent;this.isPropagationStopped=be,o&&!this.isSimulated&&o.stopPropagation()},stopImmediatePropagation:function(){var o=this.originalEvent;this.isImmediatePropagationStopped=be,o&&!this.isSimulated&&o.stopImmediatePropagation(),this.stopPropagation()}},c.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},c.event.addProp),c.each({focus:"focusin",blur:"focusout"},function(o,l){function f(g){if($.documentMode){var _=Ae.get(this,"handle"),E=c.event.fix(g);E.type=g.type==="focusin"?"focus":"blur",E.isSimulated=!0,_(g),E.target===E.currentTarget&&_(E)}else c.event.simulate(l,g.target,c.event.fix(g))}c.event.special[o]={setup:function(){var g;if(Ne(this,o,!0),$.documentMode)g=Ae.get(this,l),g||this.addEventListener(l,f),Ae.set(this,l,(g||0)+1);else return!1},trigger:function(){return Ne(this,o),!0},teardown:function(){var g;if($.documentMode)g=Ae.get(this,l)-1,g?Ae.set(this,l,g):(this.removeEventListener(l,f),Ae.remove(this,l));else return!1},_default:function(g){return Ae.get(g.target,o)},delegateType:l},c.event.special[l]={setup:function(){var g=this.ownerDocument||this.document||this,_=$.documentMode?this:g,E=Ae.get(_,l);E||($.documentMode?this.addEventListener(l,f):g.addEventListener(o,f,!0)),Ae.set(_,l,(E||0)+1)},teardown:function(){var g=this.ownerDocument||this.document||this,_=$.documentMode?this:g,E=Ae.get(_,l)-1;E?Ae.set(_,l,E):($.documentMode?this.removeEventListener(l,f):g.removeEventListener(o,f,!0),Ae.remove(_,l))}}}),c.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(o,l){c.event.special[o]={delegateType:l,bindType:l,handle:function(f){var g,_=this,E=f.relatedTarget,w=f.handleObj;return(!E||E!==_&&!c.contains(_,E))&&(f.type=w.origType,g=w.handler.apply(this,arguments),f.type=l),g}}}),c.fn.extend({on:function(o,l,f,g){return Ee(this,o,l,f,g)},one:function(o,l,f,g){return Ee(this,o,l,f,g,1)},off:function(o,l,f){var g,_;if(o&&o.preventDefault&&o.handleObj)return g=o.handleObj,c(o.delegateTarget).off(g.namespace?g.origType+"."+g.namespace:g.origType,g.selector,g.handler),this;if(typeof o=="object"){for(_ in o)this.off(_,l,o[_]);return this}return(l===!1||typeof l=="function")&&(f=l,l=void 0),f===!1&&(f=Me),this.each(function(){c.event.remove(this,o,f,l)})}});var mt=/<script|<style|<link/i,Kt=/checked\s*(?:[^=]|=\s*.checked.)/i,sn=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function lr(o,l){return T(o,"table")&&T(l.nodeType!==11?l:l.firstChild,"tr")&&c(o).children("tbody")[0]||o}function Nn(o){return o.type=(o.getAttribute("type")!==null)+"/"+o.type,o}function ls(o){return(o.type||"").slice(0,5)==="true/"?o.type=o.type.slice(5):o.removeAttribute("type"),o}function cr(o,l){var f,g,_,E,w,V,x;if(l.nodeType===1){if(Ae.hasData(o)&&(E=Ae.get(o),x=E.events,x)){Ae.remove(l,"handle events");for(_ in x)for(f=0,g=x[_].length;f<g;f++)c.event.add(l,_,x[_][f])}ct.hasData(o)&&(w=ct.access(o),V=c.extend({},w),ct.set(l,V))}}function ei(o,l){var f=l.nodeName.toLowerCase();f==="input"&&fn.test(o.type)?l.checked=o.checked:(f==="input"||f==="textarea")&&(l.defaultValue=o.defaultValue)}function on(o,l,f,g){l=u(l);var _,E,w,V,x,H,J=0,te=o.length,z=te-1,se=l[0],Ue=O(se);if(Ue||te>1&&typeof se=="string"&&!L.checkClone&&Kt.test(se))return o.each(function(it){var je=o.eq(it);Ue&&(l[0]=se.call(this,it,je.html())),on(je,l,f,g)});if(te&&(_=me(l,o[0].ownerDocument,!1,o,g),E=_.firstChild,_.childNodes.length===1&&(_=E),E||g)){for(w=c.map(B(_,"script"),Nn),V=w.length;J<te;J++)x=_,J!==z&&(x=c.clone(x,!0,!0),V&&c.merge(w,B(x,"script"))),f.call(o[J],x,J);if(V)for(H=w[w.length-1].ownerDocument,c.map(w,ls),J=0;J<V;J++)x=w[J],S.test(x.type||"")&&!Ae.access(x,"globalEval")&&c.contains(H,x)&&(x.src&&(x.type||"").toLowerCase()!=="module"?c._evalUrl&&!x.noModule&&c._evalUrl(x.src,{nonce:x.nonce||x.getAttribute("nonce")},H):X(x.textContent.replace(sn,""),x,H))}return o}function Di(o,l,f){for(var g,_=l?c.filter(l,o):o,E=0;(g=_[E])!=null;E++)!f&&g.nodeType===1&&c.cleanData(B(g)),g.parentNode&&(f&&Qe(g)&&Z(B(g,"script")),g.parentNode.removeChild(g));return o}c.extend({htmlPrefilter:function(o){return o},clone:function(o,l,f){var g,_,E,w,V=o.cloneNode(!0),x=Qe(o);if(!L.noCloneChecked&&(o.nodeType===1||o.nodeType===11)&&!c.isXMLDoc(o))for(w=B(V),E=B(o),g=0,_=E.length;g<_;g++)ei(E[g],w[g]);if(l)if(f)for(E=E||B(o),w=w||B(V),g=0,_=E.length;g<_;g++)cr(E[g],w[g]);else cr(o,V);return w=B(V,"script"),w.length>0&&Z(w,!x&&B(o,"script")),V},cleanData:function(o){for(var l,f,g,_=c.event.special,E=0;(f=o[E])!==void 0;E++)if(En(f)){if(l=f[Ae.expando]){if(l.events)for(g in l.events)_[g]?c.event.remove(f,g):c.removeEvent(f,g,l.handle);f[Ae.expando]=void 0}f[ct.expando]&&(f[ct.expando]=void 0)}}}),c.fn.extend({detach:function(o){return Di(this,o,!0)},remove:function(o){return Di(this,o)},text:function(o){return Mt(this,function(l){return l===void 0?c.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=l)})},null,o,arguments.length)},append:function(){return on(this,arguments,function(o){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var l=lr(this,o);l.appendChild(o)}})},prepend:function(){return on(this,arguments,function(o){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var l=lr(this,o);l.insertBefore(o,l.firstChild)}})},before:function(){return on(this,arguments,function(o){this.parentNode&&this.parentNode.insertBefore(o,this)})},after:function(){return on(this,arguments,function(o){this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling)})},empty:function(){for(var o,l=0;(o=this[l])!=null;l++)o.nodeType===1&&(c.cleanData(B(o,!1)),o.textContent="");return this},clone:function(o,l){return o=o??!1,l=l??o,this.map(function(){return c.clone(this,o,l)})},html:function(o){return Mt(this,function(l){var f=this[0]||{},g=0,_=this.length;if(l===void 0&&f.nodeType===1)return f.innerHTML;if(typeof l=="string"&&!mt.test(l)&&!P[(Zr.exec(l)||["",""])[1].toLowerCase()]){l=c.htmlPrefilter(l);try{for(;g<_;g++)f=this[g]||{},f.nodeType===1&&(c.cleanData(B(f,!1)),f.innerHTML=l);f=0}catch{}}f&&this.empty().append(l)},null,o,arguments.length)},replaceWith:function(){var o=[];return on(this,arguments,function(l){var f=this.parentNode;c.inArray(this,o)<0&&(c.cleanData(B(this)),f&&f.replaceChild(l,this))},o)}}),c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(o,l){c.fn[o]=function(f){for(var g,_=[],E=c(f),w=E.length-1,V=0;V<=w;V++)g=V===w?this:this.clone(!0),c(E[V])[l](g),h.apply(_,g.get());return this.pushStack(_)}});var ti=new RegExp("^("+ye+")(?!px)[a-z%]+$","i"),Dr=/^--/,hr=function(o){var l=o.ownerDocument.defaultView;return(!l||!l.opener)&&(l=e),l.getComputedStyle(o)},ki=function(o,l,f){var g,_,E={};for(_ in l)E[_]=o.style[_],o.style[_]=l[_];g=f.call(o);for(_ in l)o.style[_]=E[_];return g},cs=new RegExp(kt.join("|"),"i");(function(){function o(){if(H){x.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",H.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",$t.appendChild(x).appendChild(H);var J=e.getComputedStyle(H);f=J.top!=="1%",V=l(J.marginLeft)===12,H.style.right="60%",E=l(J.right)===36,g=l(J.width)===36,H.style.position="absolute",_=l(H.offsetWidth/3)===12,$t.removeChild(x),H=null}}function l(J){return Math.round(parseFloat(J))}var f,g,_,E,w,V,x=$.createElement("div"),H=$.createElement("div");H.style&&(H.style.backgroundClip="content-box",H.cloneNode(!0).style.backgroundClip="",L.clearCloneStyle=H.style.backgroundClip==="content-box",c.extend(L,{boxSizingReliable:function(){return o(),g},pixelBoxStyles:function(){return o(),E},pixelPosition:function(){return o(),f},reliableMarginLeft:function(){return o(),V},scrollboxSize:function(){return o(),_},reliableTrDimensions:function(){var J,te,z,se;return w==null&&(J=$.createElement("table"),te=$.createElement("tr"),z=$.createElement("div"),J.style.cssText="position:absolute;left:-11111px;border-collapse:separate",te.style.cssText="box-sizing:content-box;border:1px solid",te.style.height="1px",z.style.height="9px",z.style.display="block",$t.appendChild(J).appendChild(te).appendChild(z),se=e.getComputedStyle(te),w=parseInt(se.height,10)+parseInt(se.borderTopWidth,10)+parseInt(se.borderBottomWidth,10)===te.offsetHeight,$t.removeChild(J)),w}}))})();function Ni(o,l,f){var g,_,E,w,V=Dr.test(l),x=o.style;return f=f||hr(o),f&&(w=f.getPropertyValue(l)||f[l],V&&w&&(w=w.replace(Ie,"$1")||void 0),w===""&&!Qe(o)&&(w=c.style(o,l)),!L.pixelBoxStyles()&&ti.test(w)&&cs.test(l)&&(g=x.width,_=x.minWidth,E=x.maxWidth,x.minWidth=x.maxWidth=x.width=w,w=f.width,x.width=g,x.minWidth=_,x.maxWidth=E)),w!==void 0?w+"":w}function Oi(o,l){return{get:function(){if(o()){delete this.get;return}return(this.get=l).apply(this,arguments)}}}var to=["Webkit","Moz","ms"],hs=$.createElement("div").style,ni={};function kr(o){for(var l=o[0].toUpperCase()+o.slice(1),f=to.length;f--;)if(o=to[f]+l,o in hs)return o}function xi(o){var l=c.cssProps[o]||ni[o];return l||(o in hs?o:ni[o]=kr(o)||o)}var tl=/^(none|table(?!-c[ea]).+)/,ga={position:"absolute",visibility:"hidden",display:"block"},no={letterSpacing:"0",fontWeight:"400"};function ro(o,l,f){var g=Ce.exec(l);return g?Math.max(0,g[2]-(f||0))+(g[3]||"px"):l}function Li(o,l,f,g,_,E){var w=l==="width"?1:0,V=0,x=0,H=0;if(f===(g?"border":"content"))return 0;for(;w<4;w+=2)f==="margin"&&(H+=c.css(o,f+kt[w],!0,_)),g?(f==="content"&&(x-=c.css(o,"padding"+kt[w],!0,_)),f!=="margin"&&(x-=c.css(o,"border"+kt[w]+"Width",!0,_))):(x+=c.css(o,"padding"+kt[w],!0,_),f!=="padding"?x+=c.css(o,"border"+kt[w]+"Width",!0,_):V+=c.css(o,"border"+kt[w]+"Width",!0,_));return!g&&E>=0&&(x+=Math.max(0,Math.ceil(o["offset"+l[0].toUpperCase()+l.slice(1)]-E-x-V-.5))||0),x+H}function fs(o,l,f){var g=hr(o),_=!L.boxSizingReliable()||f,E=_&&c.css(o,"boxSizing",!1,g)==="border-box",w=E,V=Ni(o,l,g),x="offset"+l[0].toUpperCase()+l.slice(1);if(ti.test(V)){if(!f)return V;V="auto"}return(!L.boxSizingReliable()&&E||!L.reliableTrDimensions()&&T(o,"tr")||V==="auto"||!parseFloat(V)&&c.css(o,"display",!1,g)==="inline")&&o.getClientRects().length&&(E=c.css(o,"boxSizing",!1,g)==="border-box",w=x in o,w&&(V=o[x])),V=parseFloat(V)||0,V+Li(o,l,f||(E?"border":"content"),w,g,V)+"px"}c.extend({cssHooks:{opacity:{get:function(o,l){if(l){var f=Ni(o,"opacity");return f===""?"1":f}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(o,l,f,g){if(!(!o||o.nodeType===3||o.nodeType===8||!o.style)){var _,E,w,V=rn(l),x=Dr.test(l),H=o.style;if(x||(l=xi(V)),w=c.cssHooks[l]||c.cssHooks[V],f!==void 0){if(E=typeof f,E==="string"&&(_=Ce.exec(f))&&_[1]&&(f=Zn(o,l,_),E="number"),f==null||f!==f)return;E==="number"&&!x&&(f+=_&&_[3]||(c.cssNumber[V]?"":"px")),!L.clearCloneStyle&&f===""&&l.indexOf("background")===0&&(H[l]="inherit"),(!w||!("set"in w)||(f=w.set(o,f,g))!==void 0)&&(x?H.setProperty(l,f):H[l]=f)}else return w&&"get"in w&&(_=w.get(o,!1,g))!==void 0?_:H[l]}},css:function(o,l,f,g){var _,E,w,V=rn(l),x=Dr.test(l);return x||(l=xi(V)),w=c.cssHooks[l]||c.cssHooks[V],w&&"get"in w&&(_=w.get(o,!0,f)),_===void 0&&(_=Ni(o,l,g)),_==="normal"&&l in no&&(_=no[l]),f===""||f?(E=parseFloat(_),f===!0||isFinite(E)?E||0:_):_}}),c.each(["height","width"],function(o,l){c.cssHooks[l]={get:function(f,g,_){if(g)return tl.test(c.css(f,"display"))&&(!f.getClientRects().length||!f.getBoundingClientRect().width)?ki(f,ga,function(){return fs(f,l,_)}):fs(f,l,_)},set:function(f,g,_){var E,w=hr(f),V=!L.scrollboxSize()&&w.position==="absolute",x=V||_,H=x&&c.css(f,"boxSizing",!1,w)==="border-box",J=_?Li(f,l,_,H,w):0;return H&&V&&(J-=Math.ceil(f["offset"+l[0].toUpperCase()+l.slice(1)]-parseFloat(w[l])-Li(f,l,"border",!1,w)-.5)),J&&(E=Ce.exec(g))&&(E[3]||"px")!=="px"&&(f.style[l]=g,g=c.css(f,l)),ro(f,g,J)}}}),c.cssHooks.marginLeft=Oi(L.reliableMarginLeft,function(o,l){if(l)return(parseFloat(Ni(o,"marginLeft"))||o.getBoundingClientRect().left-ki(o,{marginLeft:0},function(){return o.getBoundingClientRect().left}))+"px"}),c.each({margin:"",padding:"",border:"Width"},function(o,l){c.cssHooks[o+l]={expand:function(f){for(var g=0,_={},E=typeof f=="string"?f.split(" "):[f];g<4;g++)_[o+kt[g]+l]=E[g]||E[g-2]||E[0];return _}},o!=="margin"&&(c.cssHooks[o+l].set=ro)}),c.fn.extend({css:function(o,l){return Mt(this,function(f,g,_){var E,w,V={},x=0;if(Array.isArray(g)){for(E=hr(f),w=g.length;x<w;x++)V[g[x]]=c.css(f,g[x],!1,E);return V}return _!==void 0?c.style(f,g,_):c.css(f,g)},o,l,arguments.length>1)}});function an(o,l,f,g,_){return new an.prototype.init(o,l,f,g,_)}c.Tween=an,an.prototype={constructor:an,init:function(o,l,f,g,_,E){this.elem=o,this.prop=f,this.easing=_||c.easing._default,this.options=l,this.start=this.now=this.cur(),this.end=g,this.unit=E||(c.cssNumber[f]?"":"px")},cur:function(){var o=an.propHooks[this.prop];return o&&o.get?o.get(this):an.propHooks._default.get(this)},run:function(o){var l,f=an.propHooks[this.prop];return this.options.duration?this.pos=l=c.easing[this.easing](o,this.options.duration*o,0,1,this.options.duration):this.pos=l=o,this.now=(this.end-this.start)*l+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),f&&f.set?f.set(this):an.propHooks._default.set(this),this}},an.prototype.init.prototype=an.prototype,an.propHooks={_default:{get:function(o){var l;return o.elem.nodeType!==1||o.elem[o.prop]!=null&&o.elem.style[o.prop]==null?o.elem[o.prop]:(l=c.css(o.elem,o.prop,""),!l||l==="auto"?0:l)},set:function(o){c.fx.step[o.prop]?c.fx.step[o.prop](o):o.elem.nodeType===1&&(c.cssHooks[o.prop]||o.elem.style[xi(o.prop)]!=null)?c.style(o.elem,o.prop,o.now+o.unit):o.elem[o.prop]=o.now}}},an.propHooks.scrollTop=an.propHooks.scrollLeft={set:function(o){o.elem.nodeType&&o.elem.parentNode&&(o.elem[o.prop]=o.now)}},c.easing={linear:function(o){return o},swing:function(o){return .5-Math.cos(o*Math.PI)/2},_default:"swing"},c.fx=an.prototype.init,c.fx.step={};var Nr,ds,nl=/^(?:toggle|show|hide)$/,ma=/queueHooks$/;function ps(){ds&&($.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(ps):e.setTimeout(ps,c.fx.interval),c.fx.tick())}function va(){return e.setTimeout(function(){Nr=void 0}),Nr=Date.now()}function Hn(o,l){var f,g=0,_={height:o};for(l=l?1:0;g<4;g+=2-l)f=kt[g],_["margin"+f]=_["padding"+f]=o;return l&&(_.opacity=_.width=o),_}function qn(o,l,f){for(var g,_=(Sn.tweeners[l]||[]).concat(Sn.tweeners["*"]),E=0,w=_.length;E<w;E++)if(g=_[E].call(f,l,o))return g}function gs(o,l,f){var g,_,E,w,V,x,H,J,te="width"in l||"height"in l,z=this,se={},Ue=o.style,it=o.nodeType&&Bn(o),je=Ae.get(o,"fxshow");f.queue||(w=c._queueHooks(o,"fx"),w.unqueued==null&&(w.unqueued=0,V=w.empty.fire,w.empty.fire=function(){w.unqueued||V()}),w.unqueued++,z.always(function(){z.always(function(){w.unqueued--,c.queue(o,"fx").length||w.empty.fire()})}));for(g in l)if(_=l[g],nl.test(_)){if(delete l[g],E=E||_==="toggle",_===(it?"hide":"show"))if(_==="show"&&je&&je[g]!==void 0)it=!0;else continue;se[g]=je&&je[g]||c.style(o,g)}if(x=!c.isEmptyObject(l),!(!x&&c.isEmptyObject(se))){te&&o.nodeType===1&&(f.overflow=[Ue.overflow,Ue.overflowX,Ue.overflowY],H=je&&je.display,H==null&&(H=Ae.get(o,"display")),J=c.css(o,"display"),J==="none"&&(H?J=H:(Ct([o],!0),H=o.style.display||H,J=c.css(o,"display"),Ct([o]))),(J==="inline"||J==="inline-block"&&H!=null)&&c.css(o,"float")==="none"&&(x||(z.done(function(){Ue.display=H}),H==null&&(J=Ue.display,H=J==="none"?"":J)),Ue.display="inline-block")),f.overflow&&(Ue.overflow="hidden",z.always(function(){Ue.overflow=f.overflow[0],Ue.overflowX=f.overflow[1],Ue.overflowY=f.overflow[2]})),x=!1;for(g in se)x||(je?"hidden"in je&&(it=je.hidden):je=Ae.access(o,"fxshow",{display:H}),E&&(je.hidden=!it),it&&Ct([o],!0),z.done(function(){it||Ct([o]),Ae.remove(o,"fxshow");for(g in se)c.style(o,g,se[g])})),x=qn(it?je[g]:0,g,z),g in je||(je[g]=x.start,it&&(x.end=x.start,x.start=0))}}function ms(o,l){var f,g,_,E,w;for(f in o)if(g=rn(f),_=l[g],E=o[f],Array.isArray(E)&&(_=E[1],E=o[f]=E[0]),f!==g&&(o[g]=E,delete o[f]),w=c.cssHooks[g],w&&"expand"in w){E=w.expand(E),delete o[g];for(f in E)f in o||(o[f]=E[f],l[f]=_)}else l[g]=_}function Sn(o,l,f){var g,_,E=0,w=Sn.prefilters.length,V=c.Deferred().always(function(){delete x.elem}),x=function(){if(_)return!1;for(var te=Nr||va(),z=Math.max(0,H.startTime+H.duration-te),se=z/H.duration||0,Ue=1-se,it=0,je=H.tweens.length;it<je;it++)H.tweens[it].run(Ue);return V.notifyWith(o,[H,Ue,z]),Ue<1&&je?z:(je||V.notifyWith(o,[H,1,0]),V.resolveWith(o,[H]),!1)},H=V.promise({elem:o,props:c.extend({},l),opts:c.extend(!0,{specialEasing:{},easing:c.easing._default},f),originalProperties:l,originalOptions:f,startTime:Nr||va(),duration:f.duration,tweens:[],createTween:function(te,z){var se=c.Tween(o,H.opts,te,z,H.opts.specialEasing[te]||H.opts.easing);return H.tweens.push(se),se},stop:function(te){var z=0,se=te?H.tweens.length:0;if(_)return this;for(_=!0;z<se;z++)H.tweens[z].run(1);return te?(V.notifyWith(o,[H,1,0]),V.resolveWith(o,[H,te])):V.rejectWith(o,[H,te]),this}}),J=H.props;for(ms(J,H.opts.specialEasing);E<w;E++)if(g=Sn.prefilters[E].call(H,o,J,H.opts),g)return O(g.stop)&&(c._queueHooks(H.elem,H.opts.queue).stop=g.stop.bind(g)),g;return c.map(J,qn,H),O(H.opts.start)&&H.opts.start.call(o,H),H.progress(H.opts.progress).done(H.opts.done,H.opts.complete).fail(H.opts.fail).always(H.opts.always),c.fx.timer(c.extend(x,{elem:o,anim:H,queue:H.opts.queue})),H}c.Animation=c.extend(Sn,{tweeners:{"*":[function(o,l){var f=this.createTween(o,l);return Zn(f.elem,o,Ce.exec(l),f),f}]},tweener:function(o,l){O(o)?(l=o,o=["*"]):o=o.match(tt);for(var f,g=0,_=o.length;g<_;g++)f=o[g],Sn.tweeners[f]=Sn.tweeners[f]||[],Sn.tweeners[f].unshift(l)},prefilters:[gs],prefilter:function(o,l){l?Sn.prefilters.unshift(o):Sn.prefilters.push(o)}}),c.speed=function(o,l,f){var g=o&&typeof o=="object"?c.extend({},o):{complete:f||!f&&l||O(o)&&o,duration:o,easing:f&&l||l&&!O(l)&&l};return c.fx.off?g.duration=0:typeof g.duration!="number"&&(g.duration in c.fx.speeds?g.duration=c.fx.speeds[g.duration]:g.duration=c.fx.speeds._default),(g.queue==null||g.queue===!0)&&(g.queue="fx"),g.old=g.complete,g.complete=function(){O(g.old)&&g.old.call(this),g.queue&&c.dequeue(this,g.queue)},g},c.fn.extend({fadeTo:function(o,l,f,g){return this.filter(Bn).css("opacity",0).show().end().animate({opacity:l},o,f,g)},animate:function(o,l,f,g){var _=c.isEmptyObject(o),E=c.speed(l,f,g),w=function(){var V=Sn(this,c.extend({},o),E);(_||Ae.get(this,"finish"))&&V.stop(!0)};return w.finish=w,_||E.queue===!1?this.each(w):this.queue(E.queue,w)},stop:function(o,l,f){var g=function(_){var E=_.stop;delete _.stop,E(f)};return typeof o!="string"&&(f=l,l=o,o=void 0),l&&this.queue(o||"fx",[]),this.each(function(){var _=!0,E=o!=null&&o+"queueHooks",w=c.timers,V=Ae.get(this);if(E)V[E]&&V[E].stop&&g(V[E]);else for(E in V)V[E]&&V[E].stop&&ma.test(E)&&g(V[E]);for(E=w.length;E--;)w[E].elem===this&&(o==null||w[E].queue===o)&&(w[E].anim.stop(f),_=!1,w.splice(E,1));(_||!f)&&c.dequeue(this,o)})},finish:function(o){return o!==!1&&(o=o||"fx"),this.each(function(){var l,f=Ae.get(this),g=f[o+"queue"],_=f[o+"queueHooks"],E=c.timers,w=g?g.length:0;for(f.finish=!0,c.queue(this,o,[]),_&&_.stop&&_.stop.call(this,!0),l=E.length;l--;)E[l].elem===this&&E[l].queue===o&&(E[l].anim.stop(!0),E.splice(l,1));for(l=0;l<w;l++)g[l]&&g[l].finish&&g[l].finish.call(this);delete f.finish})}}),c.each(["toggle","show","hide"],function(o,l){var f=c.fn[l];c.fn[l]=function(g,_,E){return g==null||typeof g=="boolean"?f.apply(this,arguments):this.animate(Hn(l,!0),g,_,E)}}),c.each({slideDown:Hn("show"),slideUp:Hn("hide"),slideToggle:Hn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(o,l){c.fn[o]=function(f,g,_){return this.animate(l,f,g,_)}}),c.timers=[],c.fx.tick=function(){var o,l=0,f=c.timers;for(Nr=Date.now();l<f.length;l++)o=f[l],!o()&&f[l]===o&&f.splice(l--,1);f.length||c.fx.stop(),Nr=void 0},c.fx.timer=function(o){c.timers.push(o),c.fx.start()},c.fx.interval=13,c.fx.start=function(){ds||(ds=!0,ps())},c.fx.stop=function(){ds=null},c.fx.speeds={slow:600,fast:200,_default:400},c.fn.delay=function(o,l){return o=c.fx&&c.fx.speeds[o]||o,l=l||"fx",this.queue(l,function(f,g){var _=e.setTimeout(f,o);g.stop=function(){e.clearTimeout(_)}})},function(){var o=$.createElement("input"),l=$.createElement("select"),f=l.appendChild($.createElement("option"));o.type="checkbox",L.checkOn=o.value!=="",L.optSelected=f.selected,o=$.createElement("input"),o.value="t",o.type="radio",L.radioValue=o.value==="t"}();var It,fr=c.expr.attrHandle;c.fn.extend({attr:function(o,l){return Mt(this,c.attr,o,l,arguments.length>1)},removeAttr:function(o){return this.each(function(){c.removeAttr(this,o)})}}),c.extend({attr:function(o,l,f){var g,_,E=o.nodeType;if(!(E===3||E===8||E===2)){if(typeof o.getAttribute>"u")return c.prop(o,l,f);if((E!==1||!c.isXMLDoc(o))&&(_=c.attrHooks[l.toLowerCase()]||(c.expr.match.bool.test(l)?It:void 0)),f!==void 0){if(f===null){c.removeAttr(o,l);return}return _&&"set"in _&&(g=_.set(o,f,l))!==void 0?g:(o.setAttribute(l,f+""),f)}return _&&"get"in _&&(g=_.get(o,l))!==null?g:(g=c.find.attr(o,l),g??void 0)}},attrHooks:{type:{set:function(o,l){if(!L.radioValue&&l==="radio"&&T(o,"input")){var f=o.value;return o.setAttribute("type",l),f&&(o.value=f),l}}}},removeAttr:function(o,l){var f,g=0,_=l&&l.match(tt);if(_&&o.nodeType===1)for(;f=_[g++];)o.removeAttribute(f)}}),It={set:function(o,l,f){return l===!1?c.removeAttr(o,f):o.setAttribute(f,f),f}},c.each(c.expr.match.bool.source.match(/\w+/g),function(o,l){var f=fr[l]||c.find.attr;fr[l]=function(g,_,E){var w,V,x=_.toLowerCase();return E||(V=fr[x],fr[x]=w,w=f(g,_,E)!=null?x:null,fr[x]=V),w}});var Mi=/^(?:input|select|textarea|button)$/i,Vi=/^(?:a|area)$/i;c.fn.extend({prop:function(o,l){return Mt(this,c.prop,o,l,arguments.length>1)},removeProp:function(o){return this.each(function(){delete this[c.propFix[o]||o]})}}),c.extend({prop:function(o,l,f){var g,_,E=o.nodeType;if(!(E===3||E===8||E===2))return(E!==1||!c.isXMLDoc(o))&&(l=c.propFix[l]||l,_=c.propHooks[l]),f!==void 0?_&&"set"in _&&(g=_.set(o,f,l))!==void 0?g:o[l]=f:_&&"get"in _&&(g=_.get(o,l))!==null?g:o[l]},propHooks:{tabIndex:{get:function(o){var l=c.find.attr(o,"tabindex");return l?parseInt(l,10):Mi.test(o.nodeName)||Vi.test(o.nodeName)&&o.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),L.optSelected||(c.propHooks.selected={get:function(o){var l=o.parentNode;return l&&l.parentNode&&l.parentNode.selectedIndex,null},set:function(o){var l=o.parentNode;l&&(l.selectedIndex,l.parentNode&&l.parentNode.selectedIndex)}}),c.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){c.propFix[this.toLowerCase()]=this});function Or(o){var l=o.match(tt)||[];return l.join(" ")}function dr(o){return o.getAttribute&&o.getAttribute("class")||""}function io(o){return Array.isArray(o)?o:typeof o=="string"?o.match(tt)||[]:[]}c.fn.extend({addClass:function(o){var l,f,g,_,E,w;return O(o)?this.each(function(V){c(this).addClass(o.call(this,V,dr(this)))}):(l=io(o),l.length?this.each(function(){if(g=dr(this),f=this.nodeType===1&&" "+Or(g)+" ",f){for(E=0;E<l.length;E++)_=l[E],f.indexOf(" "+_+" ")<0&&(f+=_+" ");w=Or(f),g!==w&&this.setAttribute("class",w)}}):this)},removeClass:function(o){var l,f,g,_,E,w;return O(o)?this.each(function(V){c(this).removeClass(o.call(this,V,dr(this)))}):arguments.length?(l=io(o),l.length?this.each(function(){if(g=dr(this),f=this.nodeType===1&&" "+Or(g)+" ",f){for(E=0;E<l.length;E++)for(_=l[E];f.indexOf(" "+_+" ")>-1;)f=f.replace(" "+_+" "," ");w=Or(f),g!==w&&this.setAttribute("class",w)}}):this):this.attr("class","")},toggleClass:function(o,l){var f,g,_,E,w=typeof o,V=w==="string"||Array.isArray(o);return O(o)?this.each(function(x){c(this).toggleClass(o.call(this,x,dr(this),l),l)}):typeof l=="boolean"&&V?l?this.addClass(o):this.removeClass(o):(f=io(o),this.each(function(){if(V)for(E=c(this),_=0;_<f.length;_++)g=f[_],E.hasClass(g)?E.removeClass(g):E.addClass(g);else(o===void 0||w==="boolean")&&(g=dr(this),g&&Ae.set(this,"__className__",g),this.setAttribute&&this.setAttribute("class",g||o===!1?"":Ae.get(this,"__className__")||""))}))},hasClass:function(o){var l,f,g=0;for(l=" "+o+" ";f=this[g++];)if(f.nodeType===1&&(" "+Or(dr(f))+" ").indexOf(l)>-1)return!0;return!1}});var rl=/\r/g;c.fn.extend({val:function(o){var l,f,g,_=this[0];return arguments.length?(g=O(o),this.each(function(E){var w;this.nodeType===1&&(g?w=o.call(this,E,c(this).val()):w=o,w==null?w="":typeof w=="number"?w+="":Array.isArray(w)&&(w=c.map(w,function(V){return V==null?"":V+""})),l=c.valHooks[this.type]||c.valHooks[this.nodeName.toLowerCase()],(!l||!("set"in l)||l.set(this,w,"value")===void 0)&&(this.value=w))})):_?(l=c.valHooks[_.type]||c.valHooks[_.nodeName.toLowerCase()],l&&"get"in l&&(f=l.get(_,"value"))!==void 0?f:(f=_.value,typeof f=="string"?f.replace(rl,""):f??"")):void 0}}),c.extend({valHooks:{option:{get:function(o){var l=c.find.attr(o,"value");return l??Or(c.text(o))}},select:{get:function(o){var l,f,g,_=o.options,E=o.selectedIndex,w=o.type==="select-one",V=w?null:[],x=w?E+1:_.length;for(E<0?g=x:g=w?E:0;g<x;g++)if(f=_[g],(f.selected||g===E)&&!f.disabled&&(!f.parentNode.disabled||!T(f.parentNode,"optgroup"))){if(l=c(f).val(),w)return l;V.push(l)}return V},set:function(o,l){for(var f,g,_=o.options,E=c.makeArray(l),w=_.length;w--;)g=_[w],(g.selected=c.inArray(c.valHooks.option.get(g),E)>-1)&&(f=!0);return f||(o.selectedIndex=-1),E}}}}),c.each(["radio","checkbox"],function(){c.valHooks[this]={set:function(o,l){if(Array.isArray(l))return o.checked=c.inArray(c(o).val(),l)>-1}},L.checkOn||(c.valHooks[this].get=function(o){return o.getAttribute("value")===null?"on":o.value})});var Fi=e.location,ya={guid:Date.now()},xr=/\?/;c.parseXML=function(o){var l,f;if(!o||typeof o!="string")return null;try{l=new e.DOMParser().parseFromString(o,"text/xml")}catch{}return f=l&&l.getElementsByTagName("parsererror")[0],(!l||f)&&c.error("Invalid XML: "+(f?c.map(f.childNodes,function(g){return g.textContent}).join(`
`):o)),l};var er=/^(?:focusinfocus|focusoutblur)$/,so=function(o){o.stopPropagation()};c.extend(c.event,{trigger:function(o,l,f,g){var _,E,w,V,x,H,J,te,z=[f||$],se=R.call(o,"type")?o.type:o,Ue=R.call(o,"namespace")?o.namespace.split("."):[];if(E=te=w=f=f||$,!(f.nodeType===3||f.nodeType===8)&&!er.test(se+c.event.triggered)&&(se.indexOf(".")>-1&&(Ue=se.split("."),se=Ue.shift(),Ue.sort()),x=se.indexOf(":")<0&&"on"+se,o=o[c.expando]?o:new c.Event(se,typeof o=="object"&&o),o.isTrigger=g?2:3,o.namespace=Ue.join("."),o.rnamespace=o.namespace?new RegExp("(^|\\.)"+Ue.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,o.result=void 0,o.target||(o.target=f),l=l==null?[o]:c.makeArray(l,[o]),J=c.event.special[se]||{},!(!g&&J.trigger&&J.trigger.apply(f,l)===!1))){if(!g&&!J.noBubble&&!q(f)){for(V=J.delegateType||se,er.test(V+se)||(E=E.parentNode);E;E=E.parentNode)z.push(E),w=E;w===(f.ownerDocument||$)&&z.push(w.defaultView||w.parentWindow||e)}for(_=0;(E=z[_++])&&!o.isPropagationStopped();)te=E,o.type=_>1?V:J.bindType||se,H=(Ae.get(E,"events")||Object.create(null))[o.type]&&Ae.get(E,"handle"),H&&H.apply(E,l),H=x&&E[x],H&&H.apply&&En(E)&&(o.result=H.apply(E,l),o.result===!1&&o.preventDefault());return o.type=se,!g&&!o.isDefaultPrevented()&&(!J._default||J._default.apply(z.pop(),l)===!1)&&En(f)&&x&&O(f[se])&&!q(f)&&(w=f[x],w&&(f[x]=null),c.event.triggered=se,o.isPropagationStopped()&&te.addEventListener(se,so),f[se](),o.isPropagationStopped()&&te.removeEventListener(se,so),c.event.triggered=void 0,w&&(f[x]=w)),o.result}},simulate:function(o,l,f){var g=c.extend(new c.Event,f,{type:o,isSimulated:!0});c.event.trigger(g,null,l)}}),c.fn.extend({trigger:function(o,l){return this.each(function(){c.event.trigger(o,l,this)})},triggerHandler:function(o,l){var f=this[0];if(f)return c.event.trigger(o,l,f,!0)}});var _a=/\[\]$/,oo=/\r?\n/g,ri=/^(?:submit|button|image|reset|file)$/i,il=/^(?:input|select|textarea|keygen)/i;function ao(o,l,f,g){var _;if(Array.isArray(l))c.each(l,function(E,w){f||_a.test(o)?g(o,w):ao(o+"["+(typeof w=="object"&&w!=null?E:"")+"]",w,f,g)});else if(!f&&ee(l)==="object")for(_ in l)ao(o+"["+_+"]",l[_],f,g);else g(o,l)}c.param=function(o,l){var f,g=[],_=function(E,w){var V=O(w)?w():w;g[g.length]=encodeURIComponent(E)+"="+encodeURIComponent(V??"")};if(o==null)return"";if(Array.isArray(o)||o.jquery&&!c.isPlainObject(o))c.each(o,function(){_(this.name,this.value)});else for(f in o)ao(f,o[f],l,_);return g.join("&")},c.fn.extend({serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var o=c.prop(this,"elements");return o?c.makeArray(o):this}).filter(function(){var o=this.type;return this.name&&!c(this).is(":disabled")&&il.test(this.nodeName)&&!ri.test(o)&&(this.checked||!fn.test(o))}).map(function(o,l){var f=c(this).val();return f==null?null:Array.isArray(f)?c.map(f,function(g){return{name:l.name,value:g.replace(oo,`\r
`)}}):{name:l.name,value:f.replace(oo,`\r
`)}}).get()}});var sl=/%20/g,pr=/#.*$/,ol=/([?&])_=[^&]*/,al=/^(.*?):[ \t]*([^\r\n]*)$/mg,vs=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ys=/^(?:GET|HEAD)$/,Ea=/^\/\//,ii={},Lr={},uo="*/".concat("*"),Ui=$.createElement("a");Ui.href=Fi.href;function Pt(o){return function(l,f){typeof l!="string"&&(f=l,l="*");var g,_=0,E=l.toLowerCase().match(tt)||[];if(O(f))for(;g=E[_++];)g[0]==="+"?(g=g.slice(1)||"*",(o[g]=o[g]||[]).unshift(f)):(o[g]=o[g]||[]).push(f)}}function Ta(o,l,f,g){var _={},E=o===Lr;function w(V){var x;return _[V]=!0,c.each(o[V]||[],function(H,J){var te=J(l,f,g);if(typeof te=="string"&&!E&&!_[te])return l.dataTypes.unshift(te),w(te),!1;if(E)return!(x=te)}),x}return w(l.dataTypes[0])||!_["*"]&&w("*")}function lo(o,l){var f,g,_=c.ajaxSettings.flatOptions||{};for(f in l)l[f]!==void 0&&((_[f]?o:g||(g={}))[f]=l[f]);return g&&c.extend(!0,o,g),o}function wa(o,l,f){for(var g,_,E,w,V=o.contents,x=o.dataTypes;x[0]==="*";)x.shift(),g===void 0&&(g=o.mimeType||l.getResponseHeader("Content-Type"));if(g){for(_ in V)if(V[_]&&V[_].test(g)){x.unshift(_);break}}if(x[0]in f)E=x[0];else{for(_ in f){if(!x[0]||o.converters[_+" "+x[0]]){E=_;break}w||(w=_)}E=E||w}if(E)return E!==x[0]&&x.unshift(E),f[E]}function ba(o,l,f,g){var _,E,w,V,x,H={},J=o.dataTypes.slice();if(J[1])for(w in o.converters)H[w.toLowerCase()]=o.converters[w];for(E=J.shift();E;)if(o.responseFields[E]&&(f[o.responseFields[E]]=l),!x&&g&&o.dataFilter&&(l=o.dataFilter(l,o.dataType)),x=E,E=J.shift(),E){if(E==="*")E=x;else if(x!=="*"&&x!==E){if(w=H[x+" "+E]||H["* "+E],!w){for(_ in H)if(V=_.split(" "),V[1]===E&&(w=H[x+" "+V[0]]||H["* "+V[0]],w)){w===!0?w=H[_]:H[_]!==!0&&(E=V[0],J.unshift(V[1]));break}}if(w!==!0)if(w&&o.throws)l=w(l);else try{l=w(l)}catch(te){return{state:"parsererror",error:w?te:"No conversion from "+x+" to "+E}}}}return{state:"success",data:l}}c.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fi.href,type:"GET",isLocal:vs.test(Fi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":uo,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":c.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(o,l){return l?lo(lo(o,c.ajaxSettings),l):lo(c.ajaxSettings,o)},ajaxPrefilter:Pt(ii),ajaxTransport:Pt(Lr),ajax:function(o,l){typeof o=="object"&&(l=o,o=void 0),l=l||{};var f,g,_,E,w,V,x,H,J,te,z=c.ajaxSetup({},l),se=z.context||z,Ue=z.context&&(se.nodeType||se.jquery)?c(se):c.event,it=c.Deferred(),je=c.Callbacks("once memory"),Wt=z.statusCode||{},Ft={},xn={},Ln="canceled",Je={readyState:0,getResponseHeader:function(at){var Dt;if(x){if(!E)for(E={};Dt=al.exec(_);)E[Dt[1].toLowerCase()+" "]=(E[Dt[1].toLowerCase()+" "]||[]).concat(Dt[2]);Dt=E[at.toLowerCase()+" "]}return Dt==null?null:Dt.join(", ")},getAllResponseHeaders:function(){return x?_:null},setRequestHeader:function(at,Dt){return x==null&&(at=xn[at.toLowerCase()]=xn[at.toLowerCase()]||at,Ft[at]=Dt),this},overrideMimeType:function(at){return x==null&&(z.mimeType=at),this},statusCode:function(at){var Dt;if(at)if(x)Je.always(at[Je.status]);else for(Dt in at)Wt[Dt]=[Wt[Dt],at[Dt]];return this},abort:function(at){var Dt=at||Ln;return f&&f.abort(Dt),Bt(0,Dt),this}};if(it.promise(Je),z.url=((o||z.url||Fi.href)+"").replace(Ea,Fi.protocol+"//"),z.type=l.method||l.type||z.method||z.type,z.dataTypes=(z.dataType||"*").toLowerCase().match(tt)||[""],z.crossDomain==null){V=$.createElement("a");try{V.href=z.url,V.href=V.href,z.crossDomain=Ui.protocol+"//"+Ui.host!=V.protocol+"//"+V.host}catch{z.crossDomain=!0}}if(z.data&&z.processData&&typeof z.data!="string"&&(z.data=c.param(z.data,z.traditional)),Ta(ii,z,l,Je),x)return Je;H=c.event&&z.global,H&&c.active++===0&&c.event.trigger("ajaxStart"),z.type=z.type.toUpperCase(),z.hasContent=!ys.test(z.type),g=z.url.replace(pr,""),z.hasContent?z.data&&z.processData&&(z.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(z.data=z.data.replace(sl,"+")):(te=z.url.slice(g.length),z.data&&(z.processData||typeof z.data=="string")&&(g+=(xr.test(g)?"&":"?")+z.data,delete z.data),z.cache===!1&&(g=g.replace(ol,"$1"),te=(xr.test(g)?"&":"?")+"_="+ya.guid+++te),z.url=g+te),z.ifModified&&(c.lastModified[g]&&Je.setRequestHeader("If-Modified-Since",c.lastModified[g]),c.etag[g]&&Je.setRequestHeader("If-None-Match",c.etag[g])),(z.data&&z.hasContent&&z.contentType!==!1||l.contentType)&&Je.setRequestHeader("Content-Type",z.contentType),Je.setRequestHeader("Accept",z.dataTypes[0]&&z.accepts[z.dataTypes[0]]?z.accepts[z.dataTypes[0]]+(z.dataTypes[0]!=="*"?", "+uo+"; q=0.01":""):z.accepts["*"]);for(J in z.headers)Je.setRequestHeader(J,z.headers[J]);if(z.beforeSend&&(z.beforeSend.call(se,Je,z)===!1||x))return Je.abort();if(Ln="abort",je.add(z.complete),Je.done(z.success),Je.fail(z.error),f=Ta(Lr,z,l,Je),!f)Bt(-1,"No Transport");else{if(Je.readyState=1,H&&Ue.trigger("ajaxSend",[Je,z]),x)return Je;z.async&&z.timeout>0&&(w=e.setTimeout(function(){Je.abort("timeout")},z.timeout));try{x=!1,f.send(Ft,Bt)}catch(at){if(x)throw at;Bt(-1,at)}}function Bt(at,Dt,$n,a){var p,v,A,W,K,ue=Dt;x||(x=!0,w&&e.clearTimeout(w),f=void 0,_=a||"",Je.readyState=at>0?4:0,p=at>=200&&at<300||at===304,$n&&(W=wa(z,Je,$n)),!p&&c.inArray("script",z.dataTypes)>-1&&c.inArray("json",z.dataTypes)<0&&(z.converters["text script"]=function(){}),W=ba(z,W,Je,p),p?(z.ifModified&&(K=Je.getResponseHeader("Last-Modified"),K&&(c.lastModified[g]=K),K=Je.getResponseHeader("etag"),K&&(c.etag[g]=K)),at===204||z.type==="HEAD"?ue="nocontent":at===304?ue="notmodified":(ue=W.state,v=W.data,A=W.error,p=!A)):(A=ue,(at||!ue)&&(ue="error",at<0&&(at=0))),Je.status=at,Je.statusText=(Dt||ue)+"",p?it.resolveWith(se,[v,ue,Je]):it.rejectWith(se,[Je,ue,A]),Je.statusCode(Wt),Wt=void 0,H&&Ue.trigger(p?"ajaxSuccess":"ajaxError",[Je,z,p?v:A]),je.fireWith(se,[Je,ue]),H&&(Ue.trigger("ajaxComplete",[Je,z]),--c.active||c.event.trigger("ajaxStop")))}return Je},getJSON:function(o,l,f){return c.get(o,l,f,"json")},getScript:function(o,l){return c.get(o,void 0,l,"script")}}),c.each(["get","post"],function(o,l){c[l]=function(f,g,_,E){return O(g)&&(E=E||_,_=g,g=void 0),c.ajax(c.extend({url:f,type:l,dataType:E,data:g,success:_},c.isPlainObject(f)&&f))}}),c.ajaxPrefilter(function(o){var l;for(l in o.headers)l.toLowerCase()==="content-type"&&(o.contentType=o.headers[l]||"")}),c._evalUrl=function(o,l,f){return c.ajax({url:o,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(g){c.globalEval(g,l,f)}})},c.fn.extend({wrapAll:function(o){var l;return this[0]&&(O(o)&&(o=o.call(this[0])),l=c(o,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&l.insertBefore(this[0]),l.map(function(){for(var f=this;f.firstElementChild;)f=f.firstElementChild;return f}).append(this)),this},wrapInner:function(o){return O(o)?this.each(function(l){c(this).wrapInner(o.call(this,l))}):this.each(function(){var l=c(this),f=l.contents();f.length?f.wrapAll(o):l.append(o)})},wrap:function(o){var l=O(o);return this.each(function(f){c(this).wrapAll(l?o.call(this,f):o)})},unwrap:function(o){return this.parent(o).not("body").each(function(){c(this).replaceWith(this.childNodes)}),this}}),c.expr.pseudos.hidden=function(o){return!c.expr.pseudos.visible(o)},c.expr.pseudos.visible=function(o){return!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length)},c.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Ia={0:200,1223:204},gr=c.ajaxSettings.xhr();L.cors=!!gr&&"withCredentials"in gr,L.ajax=gr=!!gr,c.ajaxTransport(function(o){var l,f;if(L.cors||gr&&!o.crossDomain)return{send:function(g,_){var E,w=o.xhr();if(w.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(E in o.xhrFields)w[E]=o.xhrFields[E];o.mimeType&&w.overrideMimeType&&w.overrideMimeType(o.mimeType),!o.crossDomain&&!g["X-Requested-With"]&&(g["X-Requested-With"]="XMLHttpRequest");for(E in g)w.setRequestHeader(E,g[E]);l=function(V){return function(){l&&(l=f=w.onload=w.onerror=w.onabort=w.ontimeout=w.onreadystatechange=null,V==="abort"?w.abort():V==="error"?typeof w.status!="number"?_(0,"error"):_(w.status,w.statusText):_(Ia[w.status]||w.status,w.statusText,(w.responseType||"text")!=="text"||typeof w.responseText!="string"?{binary:w.response}:{text:w.responseText},w.getAllResponseHeaders()))}},w.onload=l(),f=w.onerror=w.ontimeout=l("error"),w.onabort!==void 0?w.onabort=f:w.onreadystatechange=function(){w.readyState===4&&e.setTimeout(function(){l&&f()})},l=l("abort");try{w.send(o.hasContent&&o.data||null)}catch(V){if(l)throw V}},abort:function(){l&&l()}}}),c.ajaxPrefilter(function(o){o.crossDomain&&(o.contents.script=!1)}),c.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(o){return c.globalEval(o),o}}}),c.ajaxPrefilter("script",function(o){o.cache===void 0&&(o.cache=!1),o.crossDomain&&(o.type="GET")}),c.ajaxTransport("script",function(o){if(o.crossDomain||o.scriptAttrs){var l,f;return{send:function(g,_){l=c("<script>").attr(o.scriptAttrs||{}).prop({charset:o.scriptCharset,src:o.url}).on("load error",f=function(E){l.remove(),f=null,E&&_(E.type==="error"?404:200,E.type)}),$.head.appendChild(l[0])},abort:function(){f&&f()}}}});var co=[],On=/(=)\?(?=&|$)|\?\?/;c.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var o=co.pop()||c.expando+"_"+ya.guid++;return this[o]=!0,o}}),c.ajaxPrefilter("json jsonp",function(o,l,f){var g,_,E,w=o.jsonp!==!1&&(On.test(o.url)?"url":typeof o.data=="string"&&(o.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&On.test(o.data)&&"data");if(w||o.dataTypes[0]==="jsonp")return g=o.jsonpCallback=O(o.jsonpCallback)?o.jsonpCallback():o.jsonpCallback,w?o[w]=o[w].replace(On,"$1"+g):o.jsonp!==!1&&(o.url+=(xr.test(o.url)?"&":"?")+o.jsonp+"="+g),o.converters["script json"]=function(){return E||c.error(g+" was not called"),E[0]},o.dataTypes[0]="json",_=e[g],e[g]=function(){E=arguments},f.always(function(){_===void 0?c(e).removeProp(g):e[g]=_,o[g]&&(o.jsonpCallback=l.jsonpCallback,co.push(g)),E&&O(_)&&_(E[0]),E=_=void 0}),"script"}),L.createHTMLDocument=function(){var o=$.implementation.createHTMLDocument("").body;return o.innerHTML="<form></form><form></form>",o.childNodes.length===2}(),c.parseHTML=function(o,l,f){if(typeof o!="string")return[];typeof l=="boolean"&&(f=l,l=!1);var g,_,E;return l||(L.createHTMLDocument?(l=$.implementation.createHTMLDocument(""),g=l.createElement("base"),g.href=$.location.href,l.head.appendChild(g)):l=$),_=Fe.exec(o),E=!f&&[],_?[l.createElement(_[1])]:(_=me([o],l,E),E&&E.length&&c(E).remove(),c.merge([],_.childNodes))},c.fn.load=function(o,l,f){var g,_,E,w=this,V=o.indexOf(" ");return V>-1&&(g=Or(o.slice(V)),o=o.slice(0,V)),O(l)?(f=l,l=void 0):l&&typeof l=="object"&&(_="POST"),w.length>0&&c.ajax({url:o,type:_||"GET",dataType:"html",data:l}).done(function(x){E=arguments,w.html(g?c("<div>").append(c.parseHTML(x)).find(g):x)}).always(f&&function(x,H){w.each(function(){f.apply(this,E||[x.responseText,H,x])})}),this},c.expr.pseudos.animated=function(o){return c.grep(c.timers,function(l){return o===l.elem}).length},c.offset={setOffset:function(o,l,f){var g,_,E,w,V,x,H,J=c.css(o,"position"),te=c(o),z={};J==="static"&&(o.style.position="relative"),V=te.offset(),E=c.css(o,"top"),x=c.css(o,"left"),H=(J==="absolute"||J==="fixed")&&(E+x).indexOf("auto")>-1,H?(g=te.position(),w=g.top,_=g.left):(w=parseFloat(E)||0,_=parseFloat(x)||0),O(l)&&(l=l.call(o,f,c.extend({},V))),l.top!=null&&(z.top=l.top-V.top+w),l.left!=null&&(z.left=l.left-V.left+_),"using"in l?l.using.call(o,z):te.css(z)}},c.fn.extend({offset:function(o){if(arguments.length)return o===void 0?this:this.each(function(_){c.offset.setOffset(this,o,_)});var l,f,g=this[0];if(g)return g.getClientRects().length?(l=g.getBoundingClientRect(),f=g.ownerDocument.defaultView,{top:l.top+f.pageYOffset,left:l.left+f.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var o,l,f,g=this[0],_={top:0,left:0};if(c.css(g,"position")==="fixed")l=g.getBoundingClientRect();else{for(l=this.offset(),f=g.ownerDocument,o=g.offsetParent||f.documentElement;o&&(o===f.body||o===f.documentElement)&&c.css(o,"position")==="static";)o=o.parentNode;o&&o!==g&&o.nodeType===1&&(_=c(o).offset(),_.top+=c.css(o,"borderTopWidth",!0),_.left+=c.css(o,"borderLeftWidth",!0))}return{top:l.top-_.top-c.css(g,"marginTop",!0),left:l.left-_.left-c.css(g,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var o=this.offsetParent;o&&c.css(o,"position")==="static";)o=o.offsetParent;return o||$t})}}),c.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(o,l){var f=l==="pageYOffset";c.fn[o]=function(g){return Mt(this,function(_,E,w){var V;if(q(_)?V=_:_.nodeType===9&&(V=_.defaultView),w===void 0)return V?V[l]:_[E];V?V.scrollTo(f?V.pageXOffset:w,f?w:V.pageYOffset):_[E]=w},o,g,arguments.length)}}),c.each(["top","left"],function(o,l){c.cssHooks[l]=Oi(L.pixelPosition,function(f,g){if(g)return g=Ni(f,l),ti.test(g)?c(f).position()[l]+"px":g})}),c.each({Height:"height",Width:"width"},function(o,l){c.each({padding:"inner"+o,content:l,"":"outer"+o},function(f,g){c.fn[g]=function(_,E){var w=arguments.length&&(f||typeof _!="boolean"),V=f||(_===!0||E===!0?"margin":"border");return Mt(this,function(x,H,J){var te;return q(x)?g.indexOf("outer")===0?x["inner"+o]:x.document.documentElement["client"+o]:x.nodeType===9?(te=x.documentElement,Math.max(x.body["scroll"+o],te["scroll"+o],x.body["offset"+o],te["offset"+o],te["client"+o])):J===void 0?c.css(x,H,V):c.style(x,H,J,V)},l,w?_:void 0,w)}})}),c.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(o,l){c.fn[l]=function(f){return this.on(l,f)}}),c.fn.extend({bind:function(o,l,f){return this.on(o,null,l,f)},unbind:function(o,l){return this.off(o,null,l)},delegate:function(o,l,f,g){return this.on(l,o,f,g)},undelegate:function(o,l,f){return arguments.length===1?this.off(o,"**"):this.off(l,o||"**",f)},hover:function(o,l){return this.on("mouseenter",o).on("mouseleave",l||o)}}),c.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(o,l){c.fn[l]=function(f,g){return arguments.length>0?this.on(l,null,f,g):this.trigger(l)}});var Aa=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;c.proxy=function(o,l){var f,g,_;if(typeof l=="string"&&(f=o[l],l=o,o=f),!!O(o))return g=s.call(arguments,2),_=function(){return o.apply(l||this,g.concat(s.call(arguments)))},_.guid=o.guid=o.guid||c.guid++,_},c.holdReady=function(o){o?c.readyWait++:c.ready(!0)},c.isArray=Array.isArray,c.parseJSON=JSON.parse,c.nodeName=T,c.isFunction=O,c.isWindow=q,c.camelCase=rn,c.type=ee,c.now=Date.now,c.isNumeric=function(o){var l=c.type(o);return(l==="number"||l==="string")&&!isNaN(o-parseFloat(o))},c.trim=function(o){return o==null?"":(o+"").replace(Aa,"$1")};var ul=e.jQuery,ji=e.$;return c.noConflict=function(o){return e.$===c&&(e.$=ji),o&&e.jQuery===c&&(e.jQuery=ul),c},typeof t>"u"&&(e.jQuery=e.$=c),c})}(Tl)),Tl.exports}(function(n){(function(e){e(["jquery"],function(t){return function(){var r,i,s=0,u={error:"error",info:"info",success:"success",warning:"warning"},h={clear:O,remove:q,error:m,getContainer:y,info:R,options:{},subscribe:N,success:U,version:"2.1.4",warning:L},d;return h;function m(T,I,D){return re({type:u.error,iconClass:c().iconClasses.error,message:T,optionsOverride:D,title:I})}function y(T,I){return T||(T=c()),r=t("#"+T.containerId),r.length||I&&(r=X(T)),r}function R(T,I,D){return re({type:u.info,iconClass:c().iconClasses.info,message:T,optionsOverride:D,title:I})}function N(T){i=T}function U(T,I,D){return re({type:u.success,iconClass:c().iconClasses.success,message:T,optionsOverride:D,title:I})}function L(T,I,D){return re({type:u.warning,iconClass:c().iconClasses.warning,message:T,optionsOverride:D,title:I})}function O(T,I){var D=c();r||y(D),Q(T,D,I)||$(D)}function q(T){var I=c();if(r||y(I),T&&t(":focus",T).length===0){C(T);return}r.children().length&&r.remove()}function $(T){for(var I=r.children(),D=I.length-1;D>=0;D--)Q(t(I[D]),T)}function Q(T,I,D){var M=D&&D.force?D.force:!1;return T&&(M||t(":focus",T).length===0)?(T[I.hideMethod]({duration:I.hideDuration,easing:I.hideEasing,complete:function(){C(T)}}),!0):!1}function X(T){return r=t("<div/>").attr("id",T.containerId).addClass(T.positionClass),r.appendTo(t(T.target)),r}function ee(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,closeMethod:!1,closeDuration:!1,closeEasing:!1,closeOnHover:!0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",escapeHtml:!1,target:"body",closeHtml:'<button type="button">&times;</button>',closeClass:"toast-close-button",newestOnTop:!0,preventDuplicates:!1,progressBar:!1,progressClass:"toast-progress",rtl:!1}}function ie(T){i&&i(T)}function re(T){var I=c(),D=T.iconClass||I.iconClass;if(typeof T.optionsOverride<"u"&&(I=t.extend(I,T.optionsOverride),D=T.optionsOverride.iconClass||D),Lt(I,T))return;s++,r=y(I,!0);var M=null,b=t("<div/>"),Ie=t("<div/>"),ke=t("<div/>"),lt=t("<div/>"),Ve=t(I.closeHtml),_e={intervalId:null,hideEta:null,maxHideTime:null},ve={toastId:s,state:"visible",startTime:new Date,options:I,map:T};return Se(),Et(),ze(),ie(ve),I.debug&&console&&console.log(ve),b;function he(We){return We==null&&(We=""),We.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Se(){bt(),$e(),gt(),nt(),tt(),_n(),fe(),Fe()}function Fe(){var We="";switch(T.iconClass){case"toast-success":case"toast-info":We="polite";break;default:We="assertive"}b.attr("aria-live",We)}function ze(){I.closeOnHover&&b.hover(qt,rt),!I.onclick&&I.tapToDismiss&&b.click(pe),I.closeButton&&Ve&&Ve.click(function(We){We.stopPropagation?We.stopPropagation():We.cancelBubble!==void 0&&We.cancelBubble!==!0&&(We.cancelBubble=!0),I.onCloseClick&&I.onCloseClick(We),pe(!0)}),I.onclick&&b.click(function(We){I.onclick(We),pe()})}function Et(){b.hide(),b[I.showMethod]({duration:I.showDuration,easing:I.showEasing,complete:I.onShown}),I.timeOut>0&&(M=setTimeout(pe,I.timeOut),_e.maxHideTime=parseFloat(I.timeOut),_e.hideEta=new Date().getTime()+_e.maxHideTime,I.progressBar&&(_e.intervalId=setInterval(zt,10)))}function bt(){T.iconClass&&b.addClass(I.toastClass).addClass(D)}function fe(){I.newestOnTop?r.prepend(b):r.append(b)}function $e(){if(T.title){var We=T.title;I.escapeHtml&&(We=he(T.title)),Ie.append(We).addClass(I.titleClass),b.append(Ie)}}function gt(){if(T.message){var We=T.message;I.escapeHtml&&(We=he(T.message)),ke.append(We).addClass(I.messageClass),b.append(ke)}}function nt(){I.closeButton&&(Ve.addClass(I.closeClass).attr("role","button"),b.prepend(Ve))}function tt(){I.progressBar&&(lt.addClass(I.progressClass),b.prepend(lt))}function _n(){I.rtl&&b.addClass("rtl")}function Lt(We,Mt){if(We.preventDuplicates){if(Mt.message===d)return!0;d=Mt.message}return!1}function pe(We){var Mt=We&&I.closeMethod!==!1?I.closeMethod:I.hideMethod,An=We&&I.closeDuration!==!1?I.closeDuration:I.hideDuration,Un=We&&I.closeEasing!==!1?I.closeEasing:I.hideEasing;if(!(t(":focus",b).length&&!We))return clearTimeout(_e.intervalId),b[Mt]({duration:An,easing:Un,complete:function(){C(b),clearTimeout(M),I.onHidden&&ve.state!=="hidden"&&I.onHidden(),ve.state="hidden",ve.endTime=new Date,ie(ve)}})}function rt(){(I.timeOut>0||I.extendedTimeOut>0)&&(M=setTimeout(pe,I.extendedTimeOut),_e.maxHideTime=parseFloat(I.extendedTimeOut),_e.hideEta=new Date().getTime()+_e.maxHideTime)}function qt(){clearTimeout(M),_e.hideEta=0,b.stop(!0,!0)[I.showMethod]({duration:I.showDuration,easing:I.showEasing})}function zt(){var We=(_e.hideEta-new Date().getTime())/_e.maxHideTime*100;lt.width(We+"%")}}function c(){return t.extend({},ee(),h.options)}function C(T){r||(r=y()),!T.is(":visible")&&(T.remove(),T=null,r.children().length===0&&(r.remove(),d=void 0))}}()})})(function(e,t){n.exports?n.exports=t(HE()):window.toastr=t(window.jQuery)})})(_p);var qE=_p.exports;const RC=BE(qE);var $E=Object.defineProperty,WE=(n,e,t)=>e in n?$E(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_t=(n,e,t)=>(WE(n,typeof e!="symbol"?e+"":e,t),t);const GE=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,zE=/^-?[0-9]\d*$/,KE=/^(?=.*[A-Za-z])(?=.*\d).{8,}$/,YE=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,QE=n=>{let e=n;return typeof n=="string"&&(e=n.trim()),!e},XE=n=>GE.test(n),JE=(n,e)=>n.length>e,ZE=(n,e)=>n.length<e,eT=n=>typeof n!="string"?!1:!isNaN(+n)&&!isNaN(parseFloat(n)),tT=n=>zE.test(n),nT=n=>KE.test(n),rT=n=>YE.test(n),iT=(n,e)=>n>e,sT=(n,e)=>n<e,Vr=n=>typeof n!="string"||n==="";var ht=(n=>(n.Required="required",n.Email="email",n.MinLength="minLength",n.MaxLength="maxLength",n.Password="password",n.Number="number",n.Integer="integer",n.MaxNumber="maxNumber",n.MinNumber="minNumber",n.StrongPassword="strongPassword",n.CustomRegexp="customRegexp",n.MinFilesCount="minFilesCount",n.MaxFilesCount="maxFilesCount",n.Files="files",n))(ht||{}),Kl=(n=>(n.Required="required",n))(Kl||{}),Ep=(n=>(n.Label="label",n.LabelArrow="labelArrow",n))(Ep||{});const mf=[{key:ht.Required,dict:{en:"The field is required"}},{key:ht.Email,dict:{en:"Email has invalid format"}},{key:ht.MaxLength,dict:{en:"The field must contain a maximum of :value characters"}},{key:ht.MinLength,dict:{en:"The field must contain a minimum of :value characters"}},{key:ht.Password,dict:{en:"Password must contain minimum eight characters, at least one letter and one number"}},{key:ht.StrongPassword,dict:{en:"Password should contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"}},{key:ht.Number,dict:{en:"Value should be a number"}},{key:ht.MaxNumber,dict:{en:"Number should be less or equal than :value"}},{key:ht.MinNumber,dict:{en:"Number should be more or equal than :value"}},{key:ht.MinFilesCount,dict:{en:"Files count should be more or equal than :value"}},{key:ht.MaxFilesCount,dict:{en:"Files count should be less or equal than :value"}},{key:ht.Files,dict:{en:"Uploaded files have one or several invalid properties (extension/size/type etc)."}}],oT="Value is incorrect",fo=n=>typeof n=="object"&&n!==null&&"then"in n&&typeof n.then=="function",aT=n=>{let e=n;const t=[];for(;e;)t.unshift(e),e=e.parentNode;return t},uT=(n,e)=>{const t=[...e].reverse();for(let r=0,i=t.length;r<i;++r){const s=t[r];for(const u in n){const h=n[u];if(h.groupElem===s)return[u,h]}}return null},vr=n=>Array.isArray(n)?n.filter(e=>e.length>0):typeof n=="string"&&n.trim()?[...n.split(" ").filter(e=>e.length>0)]:[],po=n=>n instanceof Element||n instanceof HTMLDocument,lT=".just-validate-error-label[data-tooltip=true]{position:fixed;padding:4px 8px;background:#423f3f;color:#fff;white-space:nowrap;z-index:10;border-radius:4px;transform:translateY(-5px)}.just-validate-error-label[data-tooltip=true]:before{content:'';width:0;height:0;border-left:solid 5px transparent;border-right:solid 5px transparent;border-bottom:solid 5px #423f3f;position:absolute;z-index:3;display:block;bottom:-5px;transform:rotate(180deg);left:calc(50% - 5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]{transform:translateX(-5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]:before{right:-7px;bottom:auto;left:auto;top:calc(50% - 2px);transform:rotate(90deg)}.just-validate-error-label[data-tooltip=true][data-direction=right]{transform:translateX(5px)}.just-validate-error-label[data-tooltip=true][data-direction=right]:before{right:auto;bottom:auto;left:-7px;top:calc(50% - 2px);transform:rotate(-90deg)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]{transform:translateY(5px)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]:before{right:auto;bottom:auto;left:calc(50% - 5px);top:-5px;transform:rotate(0)}",Da=5,wl={errorFieldStyle:{color:"#b81111",border:"1px solid #B81111"},errorFieldCssClass:"just-validate-error-field",successFieldCssClass:"just-validate-success-field",errorLabelStyle:{color:"#b81111"},errorLabelCssClass:"just-validate-error-label",successLabelCssClass:"just-validate-success-label",focusInvalidField:!0,lockForm:!0,testingMode:!1,validateBeforeSubmitting:!1,submitFormAutomatically:!1};class PC{constructor(e,t,r){_t(this,"form",null),_t(this,"fields",{}),_t(this,"groupFields",{}),_t(this,"errors",{}),_t(this,"isValid",!1),_t(this,"isSubmitted",!1),_t(this,"globalConfig",wl),_t(this,"errorLabels",{}),_t(this,"successLabels",{}),_t(this,"eventListeners",[]),_t(this,"dictLocale",mf),_t(this,"currentLocale","en"),_t(this,"customStyleTags",{}),_t(this,"onSuccessCallback"),_t(this,"onFailCallback"),_t(this,"onValidateCallback"),_t(this,"tooltips",[]),_t(this,"lastScrollPosition"),_t(this,"isScrollTick"),_t(this,"fieldIds",new Map),_t(this,"getKeyByFieldSelector",i=>this.fieldIds.get(i)),_t(this,"getFieldSelectorByKey",i=>{for(const[s,u]of this.fieldIds)if(i===u)return s}),_t(this,"getCompatibleFields",()=>{const i={};return Object.keys(this.fields).forEach(s=>{let u=s;const h=this.getFieldSelectorByKey(s);typeof h=="string"&&(u=h),i[u]={...this.fields[s]}}),i}),_t(this,"setKeyByFieldSelector",i=>{if(this.fieldIds.has(i))return this.fieldIds.get(i);const s=String(this.fieldIds.size+1);return this.fieldIds.set(i,s),s}),_t(this,"refreshAllTooltips",()=>{this.tooltips.forEach(i=>{i.refresh()})}),_t(this,"handleDocumentScroll",()=>{this.lastScrollPosition=window.scrollY,this.isScrollTick||(window.requestAnimationFrame(()=>{this.refreshAllTooltips(),this.isScrollTick=!1}),this.isScrollTick=!0)}),_t(this,"formSubmitHandler",i=>{i.preventDefault(),this.isSubmitted=!0,this.validateHandler(i)}),_t(this,"handleFieldChange",i=>{let s;for(const u in this.fields)if(this.fields[u].elem===i){s=u;break}s&&(this.fields[s].touched=!0,this.validateField(s,!0))}),_t(this,"handleGroupChange",i=>{let s;for(const u in this.groupFields)if(this.groupFields[u].elems.find(d=>d===i)){s=u;break}s&&(this.groupFields[s].touched=!0,this.validateGroup(s,!0))}),_t(this,"handlerChange",i=>{i.target&&(this.handleFieldChange(i.target),this.handleGroupChange(i.target),this.renderErrors())}),this.initialize(e,t,r)}initialize(e,t,r){if(this.form=null,this.errors={},this.isValid=!1,this.isSubmitted=!1,this.globalConfig=wl,this.errorLabels={},this.successLabels={},this.eventListeners=[],this.customStyleTags={},this.tooltips=[],this.currentLocale="en",typeof e=="string"){const i=document.querySelector(e);if(!i)throw Error(`Form with ${e} selector not found! Please check the form selector`);this.setForm(i)}else if(e instanceof HTMLFormElement)this.setForm(e);else throw Error("Form selector is not valid. Please specify a string selector or a DOM element.");if(this.globalConfig={...wl,...t},r&&(this.dictLocale=[...r,...mf]),this.isTooltip()){const i=document.createElement("style");i.textContent=lT,this.customStyleTags[Ep.Label]=document.head.appendChild(i),this.addListener("scroll",document,this.handleDocumentScroll)}}getLocalisedString(e,t,r){var i;const s=r??e;let u=(i=this.dictLocale.find(h=>h.key===s))==null?void 0:i.dict[this.currentLocale];if(u||r&&(u=r),u&&t!==void 0)switch(e){case ht.MaxLength:case ht.MinLength:case ht.MaxNumber:case ht.MinNumber:case ht.MinFilesCount:case ht.MaxFilesCount:u=u.replace(":value",String(t))}return u||r||oT}getFieldErrorMessage(e,t){const r=typeof e.errorMessage=="function"?e.errorMessage(this.getElemValue(t),this.fields):e.errorMessage;return this.getLocalisedString(e.rule,e.value,r)}getFieldSuccessMessage(e,t){const r=typeof e=="function"?e(this.getElemValue(t),this.fields):e;return this.getLocalisedString(void 0,void 0,r)}getGroupErrorMessage(e){return this.getLocalisedString(e.rule,void 0,e.errorMessage)}getGroupSuccessMessage(e){if(e.successMessage)return this.getLocalisedString(void 0,void 0,e.successMessage)}setFieldInvalid(e,t){this.fields[e].isValid=!1,this.fields[e].errorMessage=this.getFieldErrorMessage(t,this.fields[e].elem)}setFieldValid(e,t){this.fields[e].isValid=!0,t!==void 0&&(this.fields[e].successMessage=this.getFieldSuccessMessage(t,this.fields[e].elem))}setGroupInvalid(e,t){this.groupFields[e].isValid=!1,this.groupFields[e].errorMessage=this.getGroupErrorMessage(t)}setGroupValid(e,t){this.groupFields[e].isValid=!0,this.groupFields[e].successMessage=this.getGroupSuccessMessage(t)}getElemValue(e){switch(e.type){case"checkbox":return e.checked;case"file":return e.files;default:return e.value}}validateGroupRule(e,t,r){switch(r.rule){case Kl.Required:t.every(i=>!i.checked)?this.setGroupInvalid(e,r):this.setGroupValid(e,r)}}validateFieldRule(e,t,r,i=!1){const s=r.value,u=this.getElemValue(t);if(r.plugin){r.plugin(u,this.getCompatibleFields())||this.setFieldInvalid(e,r);return}switch(r.rule){case ht.Required:{QE(u)&&this.setFieldInvalid(e,r);break}case ht.Email:{if(Vr(u))break;XE(u)||this.setFieldInvalid(e,r);break}case ht.MaxLength:{if(s===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof s!="number"){console.error(`Value for ${r.rule} rule for [${e}] should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(Vr(u))break;JE(u,s)&&this.setFieldInvalid(e,r);break}case ht.MinLength:{if(s===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof s!="number"){console.error(`Value for ${r.rule} rule for [${e}] should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(Vr(u))break;ZE(u,s)&&this.setFieldInvalid(e,r);break}case ht.Password:{if(Vr(u))break;nT(u)||this.setFieldInvalid(e,r);break}case ht.StrongPassword:{if(Vr(u))break;rT(u)||this.setFieldInvalid(e,r);break}case ht.Number:{if(Vr(u))break;eT(u)||this.setFieldInvalid(e,r);break}case ht.Integer:{if(Vr(u))break;tT(u)||this.setFieldInvalid(e,r);break}case ht.MaxNumber:{if(s===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof s!="number"){console.error(`Value for ${r.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(Vr(u))break;const h=+u;(Number.isNaN(h)||iT(h,s))&&this.setFieldInvalid(e,r);break}case ht.MinNumber:{if(s===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof s!="number"){console.error(`Value for ${r.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(Vr(u))break;const h=+u;(Number.isNaN(h)||sT(h,s))&&this.setFieldInvalid(e,r);break}case ht.CustomRegexp:{if(s===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,r);return}let h;try{h=new RegExp(s)}catch{console.error(`Value for ${r.rule} rule for [${e}] should be a valid regexp. This field will be always invalid.`),this.setFieldInvalid(e,r);break}const d=String(u);d!==""&&!h.test(d)&&this.setFieldInvalid(e,r);break}case ht.MinFilesCount:{if(s===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof s!="number"){console.error(`Value for ${r.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(Number.isFinite(u==null?void 0:u.length)&&u.length<s){this.setFieldInvalid(e,r);break}break}case ht.MaxFilesCount:{if(s===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof s!="number"){console.error(`Value for ${r.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(Number.isFinite(u==null?void 0:u.length)&&u.length>s){this.setFieldInvalid(e,r);break}break}case ht.Files:{if(s===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,r);return}if(typeof s!="object"){console.error(`Value for ${r.rule} rule for [${e}] field should be an object. This field will be always invalid.`),this.setFieldInvalid(e,r);return}const h=s.files;if(typeof h!="object"){console.error(`Value for ${r.rule} rule for [${e}] field should be an object with files array. This field will be always invalid.`),this.setFieldInvalid(e,r);return}const d=(m,y)=>{const R=Number.isFinite(y.minSize)&&m.size<y.minSize,N=Number.isFinite(y.maxSize)&&m.size>y.maxSize,U=Array.isArray(y.names)&&!y.names.includes(m.name),L=Array.isArray(y.extensions)&&!y.extensions.includes(m.name.split(".")[m.name.split(".").length-1]),O=Array.isArray(y.types)&&!y.types.includes(m.type);return R||N||U||L||O};if(typeof u=="object"&&u!==null)for(let m=0,y=u.length;m<y;++m){const R=u.item(m);if(!R){this.setFieldInvalid(e,r);break}if(d(R,h)){this.setFieldInvalid(e,r);break}}break}default:{if(typeof r.validator!="function"){console.error(`Validator for custom rule for [${e}] field should be a function. This field will be always invalid.`),this.setFieldInvalid(e,r);return}const h=r.validator(u,this.getCompatibleFields());if(typeof h!="boolean"&&typeof h!="function"&&console.error(`Validator return value for [${e}] field should be boolean or function. It will be cast to boolean.`),typeof h=="function")if(i)this.fields[e].asyncCheckPending=!0;else{this.fields[e].asyncCheckPending=!1;const d=h();if(!fo(d)){console.error(`Validator function for custom rule for [${e}] field should return a Promise. This field will be always invalid.`),this.setFieldInvalid(e,r);return}return d.then(m=>{m||this.setFieldInvalid(e,r)}).catch(()=>{this.setFieldInvalid(e,r)})}h||this.setFieldInvalid(e,r)}}}isFormValid(){let e=!0;for(let t=0,r=Object.values(this.fields).length;t<r;++t){const i=Object.values(this.fields)[t];if(i.isValid===void 0){e=void 0;break}if(i.isValid===!1){e=!1;break}}for(let t=0,r=Object.values(this.groupFields).length;t<r;++t){const i=Object.values(this.groupFields)[t];if(i.isValid===void 0){e=void 0;break}if(i.isValid===!1){e=!1;break}}return e}validateField(e,t=!1){var r;const i=this.fields[e];i.isValid=!0;const s=[];return[...i.rules].reverse().forEach(u=>{const h=this.validateFieldRule(e,i.elem,u,t);fo(h)&&s.push(h)}),i.isValid&&this.setFieldValid(e,(r=i.config)==null?void 0:r.successMessage),Promise.allSettled(s).finally(()=>{var u;t&&((u=this.onValidateCallback)==null||u.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))})}revalidateField(e){if(typeof e!="string"&&!po(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");const t=this.getKeyByFieldSelector(e);return!t||!this.fields[t]?(console.error("Field not found. Check the field selector."),Promise.reject()):new Promise(r=>{this.validateField(t,!0).finally(()=>{this.clearFieldStyle(t),this.clearFieldLabel(t),this.renderFieldError(t,!0),r(!!this.fields[t].isValid)})})}revalidateGroup(e){if(typeof e!="string"&&!po(e))throw Error("Group selector is not valid. Please specify a string selector or a valid DOM element.");const t=this.getKeyByFieldSelector(e);return!t||!this.groupFields[t]?(console.error("Group not found. Check the group selector."),Promise.reject()):new Promise(r=>{this.validateGroup(t).finally(()=>{this.clearFieldLabel(t),this.renderGroupError(t,!0),r(!!this.groupFields[t].isValid)})})}validateGroup(e,t=!1){const r=this.groupFields[e],i=[];return[...r.rules].reverse().forEach(s=>{const u=this.validateGroupRule(e,r.elems,s);fo(u)&&i.push(u)}),Promise.allSettled(i).finally(()=>{var s;t&&((s=this.onValidateCallback)==null||s.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))})}focusInvalidField(){for(const e in this.fields){const t=this.fields[e];if(!t.isValid){setTimeout(()=>t.elem.focus(),0);break}}}afterSubmitValidation(e=!1){this.renderErrors(e),this.globalConfig.focusInvalidField&&this.focusInvalidField()}validate(e=!1){return new Promise(t=>{const r=[];Object.keys(this.fields).forEach(i=>{const s=this.validateField(i);fo(s)&&r.push(s)}),Object.keys(this.groupFields).forEach(i=>{const s=this.validateGroup(i);fo(s)&&r.push(s)}),Promise.allSettled(r).then(()=>{var i;this.afterSubmitValidation(e),(i=this.onValidateCallback)==null||i.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}),t(!!r.length)})})}revalidate(){return new Promise(e=>{this.validateHandler(void 0,!0).finally(()=>{this.globalConfig.focusInvalidField&&this.focusInvalidField(),e(this.isValid)})})}validateHandler(e,t=!1){return this.globalConfig.lockForm&&this.lockForm(),this.validate(t).finally(()=>{var r,i,s;this.globalConfig.lockForm&&this.unlockForm(),this.isValid?((r=this.onSuccessCallback)==null||r.call(this,e),this.globalConfig.submitFormAutomatically&&((i=e==null?void 0:e.currentTarget)==null||i.submit())):(s=this.onFailCallback)==null||s.call(this,this.getCompatibleFields(),this.groupFields)})}setForm(e){this.form=e,this.form.setAttribute("novalidate","novalidate"),this.removeListener("submit",this.form,this.formSubmitHandler),this.addListener("submit",this.form,this.formSubmitHandler)}addListener(e,t,r){t.addEventListener(e,r),this.eventListeners.push({type:e,elem:t,func:r})}removeListener(e,t,r){t.removeEventListener(e,r),this.eventListeners=this.eventListeners.filter(i=>i.type!==e||i.elem!==t)}addField(e,t,r){if(typeof e!="string"&&!po(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");let i;if(typeof e=="string"?i=this.form.querySelector(e):i=e,!i)throw Error("Field doesn't exist in the DOM! Please check the field selector.");if(!Array.isArray(t)||!t.length)throw Error("Rules argument should be an array and should contain at least 1 element.");t.forEach(u=>{if(!("rule"in u||"validator"in u||"plugin"in u))throw Error("Rules argument must contain at least one rule or validator property.");if(!u.validator&&!u.plugin&&(!u.rule||!Object.values(ht).includes(u.rule)))throw Error(`Rule should be one of these types: ${Object.values(ht).join(", ")}. Provided value: ${u.rule}`)});const s=this.setKeyByFieldSelector(e);return this.fields[s]={elem:i,rules:t,isValid:void 0,touched:!1,config:r},this.setListeners(i),(this.isSubmitted||this.globalConfig.validateBeforeSubmitting)&&this.validateField(s),this}removeField(e){if(typeof e!="string"&&!po(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");const t=this.getKeyByFieldSelector(e);if(!t||!this.fields[t])return console.error("Field not found. Check the field selector."),this;const r=this.getListenerType(this.fields[t].elem.type);return this.removeListener(r,this.fields[t].elem,this.handlerChange),this.clearErrors(),delete this.fields[t],this}removeGroup(e){if(typeof e!="string")throw Error("Group selector is not valid. Please specify a string selector.");const t=this.getKeyByFieldSelector(e);return!t||!this.groupFields[t]?(console.error("Group not found. Check the group selector."),this):(this.groupFields[t].elems.forEach(r=>{const i=this.getListenerType(r.type);this.removeListener(i,r,this.handlerChange)}),this.clearErrors(),delete this.groupFields[t],this)}addRequiredGroup(e,t,r,i){if(typeof e!="string"&&!po(e))throw Error("Group selector is not valid. Please specify a string selector or a valid DOM element.");let s;if(typeof e=="string"?s=this.form.querySelector(e):s=e,!s)throw Error("Group selector not found! Please check the group selector.");const u=s.querySelectorAll("input"),h=Array.from(u).filter(m=>{const y=uT(this.groupFields,aT(m));return y?y[1].elems.find(R=>R!==m):!0}),d=this.setKeyByFieldSelector(e);return this.groupFields[d]={rules:[{rule:Kl.Required,errorMessage:t,successMessage:i}],groupElem:s,elems:h,touched:!1,isValid:void 0,config:r},u.forEach(m=>{this.setListeners(m)}),this}getListenerType(e){switch(e){case"checkbox":case"select-one":case"file":case"radio":return"change";default:return"input"}}setListeners(e){const t=this.getListenerType(e.type);this.removeListener(t,e,this.handlerChange),this.addListener(t,e,this.handlerChange)}clearFieldLabel(e){var t,r;(t=this.errorLabels[e])==null||t.remove(),(r=this.successLabels[e])==null||r.remove()}clearFieldStyle(e){var t,r,i,s;const u=this.fields[e],h=((t=u.config)==null?void 0:t.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(h).forEach(m=>{u.elem.style[m]=""});const d=((r=u.config)==null?void 0:r.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(d).forEach(m=>{u.elem.style[m]=""}),u.elem.classList.remove(...vr(((i=u.config)==null?void 0:i.errorFieldCssClass)||this.globalConfig.errorFieldCssClass),...vr(((s=u.config)==null?void 0:s.successFieldCssClass)||this.globalConfig.successFieldCssClass))}clearErrors(){var e,t;Object.keys(this.errorLabels).forEach(r=>this.errorLabels[r].remove()),Object.keys(this.successLabels).forEach(r=>this.successLabels[r].remove());for(const r in this.fields)this.clearFieldStyle(r);for(const r in this.groupFields){const i=this.groupFields[r],s=((e=i.config)==null?void 0:e.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(s).forEach(h=>{i.elems.forEach(d=>{var m;d.style[h]="",d.classList.remove(...vr(((m=i.config)==null?void 0:m.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))})});const u=((t=i.config)==null?void 0:t.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(u).forEach(h=>{i.elems.forEach(d=>{var m;d.style[h]="",d.classList.remove(...vr(((m=i.config)==null?void 0:m.successFieldCssClass)||this.globalConfig.successFieldCssClass))})})}this.tooltips=[]}isTooltip(){return!!this.globalConfig.tooltip}lockForm(){const e=this.form.querySelectorAll("input, textarea, button, select");for(let t=0,r=e.length;t<r;++t)e[t].setAttribute("data-just-validate-fallback-disabled",e[t].disabled?"true":"false"),e[t].setAttribute("disabled","disabled"),e[t].style.pointerEvents="none",e[t].style.webkitFilter="grayscale(100%)",e[t].style.filter="grayscale(100%)"}unlockForm(){const e=this.form.querySelectorAll("input, textarea, button, select");for(let t=0,r=e.length;t<r;++t)e[t].getAttribute("data-just-validate-fallback-disabled")!=="true"&&e[t].removeAttribute("disabled"),e[t].style.pointerEvents="",e[t].style.webkitFilter="",e[t].style.filter=""}renderTooltip(e,t,r){var i;const{top:s,left:u,width:h,height:d}=e.getBoundingClientRect(),m=t.getBoundingClientRect(),y=r||((i=this.globalConfig.tooltip)==null?void 0:i.position);switch(y){case"left":{t.style.top=`${s+d/2-m.height/2}px`,t.style.left=`${u-m.width-Da}px`;break}case"top":{t.style.top=`${s-m.height-Da}px`,t.style.left=`${u+h/2-m.width/2}px`;break}case"right":{t.style.top=`${s+d/2-m.height/2}px`,t.style.left=`${u+h+Da}px`;break}case"bottom":{t.style.top=`${s+d+Da}px`,t.style.left=`${u+h/2-m.width/2}px`;break}}return t.dataset.direction=y,{refresh:()=>{this.renderTooltip(e,t,r)}}}createErrorLabelElem(e,t,r){const i=document.createElement("div");i.innerHTML=t;const s=this.isTooltip()?r==null?void 0:r.errorLabelStyle:(r==null?void 0:r.errorLabelStyle)||this.globalConfig.errorLabelStyle;return Object.assign(i.style,s),i.classList.add(...vr((r==null?void 0:r.errorLabelCssClass)||this.globalConfig.errorLabelCssClass),"just-validate-error-label"),this.isTooltip()&&(i.dataset.tooltip="true"),this.globalConfig.testingMode&&(i.dataset.testId=`error-label-${e}`),this.errorLabels[e]=i,i}createSuccessLabelElem(e,t,r){if(t===void 0)return null;const i=document.createElement("div");i.innerHTML=t;const s=(r==null?void 0:r.successLabelStyle)||this.globalConfig.successLabelStyle;return Object.assign(i.style,s),i.classList.add(...vr((r==null?void 0:r.successLabelCssClass)||this.globalConfig.successLabelCssClass),"just-validate-success-label"),this.globalConfig.testingMode&&(i.dataset.testId=`success-label-${e}`),this.successLabels[e]=i,i}renderErrorsContainer(e,t){const r=t||this.globalConfig.errorsContainer;if(typeof r=="string"){const i=this.form.querySelector(r);if(i)return i.appendChild(e),!0;console.error(`Error container with ${r} selector not found. Errors will be rendered as usual`)}return r instanceof Element?(r.appendChild(e),!0):(r!==void 0&&console.error("Error container not found. It should be a string or existing Element. Errors will be rendered as usual"),!1)}renderGroupLabel(e,t,r,i){!i&&this.renderErrorsContainer(t,r)||e.appendChild(t)}renderFieldLabel(e,t,r,i){var s,u,h,d,m,y,R;if(!(!i&&this.renderErrorsContainer(t,r)))if(e.type==="checkbox"||e.type==="radio"){const N=document.querySelector(`label[for="${e.getAttribute("id")}"]`);((u=(s=e.parentElement)==null?void 0:s.tagName)==null?void 0:u.toLowerCase())==="label"?(d=(h=e.parentElement)==null?void 0:h.parentElement)==null||d.appendChild(t):N?(m=N.parentElement)==null||m.appendChild(t):(y=e.parentElement)==null||y.appendChild(t)}else(R=e.parentElement)==null||R.appendChild(t)}showLabels(e,t){Object.keys(e).forEach((r,i)=>{const s=e[r],u=this.getKeyByFieldSelector(r);if(!u||!this.fields[u]){console.error("Field not found. Check the field selector.");return}const h=this.fields[u];h.isValid=!t,this.clearFieldStyle(u),this.clearFieldLabel(u),this.renderFieldError(u,!1,s),i===0&&this.globalConfig.focusInvalidField&&setTimeout(()=>h.elem.focus(),0)})}showErrors(e){if(typeof e!="object")throw Error("[showErrors]: Errors should be an object with key: value format");this.showLabels(e,!0)}showSuccessLabels(e){if(typeof e!="object")throw Error("[showSuccessLabels]: Labels should be an object with key: value format");this.showLabels(e,!1)}renderFieldError(e,t=!1,r){var i,s,u,h,d,m;const y=this.fields[e];if(y.isValid===!1&&(this.isValid=!1),y.isValid===void 0||!t&&!this.isSubmitted&&!y.touched&&r===void 0)return;if(y.isValid){if(!y.asyncCheckPending){const N=this.createSuccessLabelElem(e,r!==void 0?r:y.successMessage,y.config);N&&this.renderFieldLabel(y.elem,N,(i=y.config)==null?void 0:i.errorsContainer,!0),y.elem.classList.add(...vr(((s=y.config)==null?void 0:s.successFieldCssClass)||this.globalConfig.successFieldCssClass))}return}y.elem.classList.add(...vr(((u=y.config)==null?void 0:u.errorFieldCssClass)||this.globalConfig.errorFieldCssClass));const R=this.createErrorLabelElem(e,r!==void 0?r:y.errorMessage,y.config);this.renderFieldLabel(y.elem,R,(h=y.config)==null?void 0:h.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(y.elem,R,(m=(d=y.config)==null?void 0:d.tooltip)==null?void 0:m.position))}renderGroupError(e,t=!0){var r,i,s,u;const h=this.groupFields[e];if(h.isValid===!1&&(this.isValid=!1),h.isValid===void 0||!t&&!this.isSubmitted&&!h.touched)return;if(h.isValid){h.elems.forEach(y=>{var R,N;Object.assign(y.style,((R=h.config)==null?void 0:R.successFieldStyle)||this.globalConfig.successFieldStyle),y.classList.add(...vr(((N=h.config)==null?void 0:N.successFieldCssClass)||this.globalConfig.successFieldCssClass))});const m=this.createSuccessLabelElem(e,h.successMessage,h.config);m&&this.renderGroupLabel(h.groupElem,m,(r=h.config)==null?void 0:r.errorsContainer,!0);return}this.isValid=!1,h.elems.forEach(m=>{var y,R;Object.assign(m.style,((y=h.config)==null?void 0:y.errorFieldStyle)||this.globalConfig.errorFieldStyle),m.classList.add(...vr(((R=h.config)==null?void 0:R.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))});const d=this.createErrorLabelElem(e,h.errorMessage,h.config);this.renderGroupLabel(h.groupElem,d,(i=h.config)==null?void 0:i.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(h.groupElem,d,(u=(s=h.config)==null?void 0:s.tooltip)==null?void 0:u.position))}renderErrors(e=!1){if(!(!this.isSubmitted&&!e&&!this.globalConfig.validateBeforeSubmitting)){this.clearErrors(),this.isValid=!0;for(const t in this.groupFields)this.renderGroupError(t);for(const t in this.fields)this.renderFieldError(t)}}destroy(){this.eventListeners.forEach(e=>{this.removeListener(e.type,e.elem,e.func)}),Object.keys(this.customStyleTags).forEach(e=>{this.customStyleTags[e].remove()}),this.clearErrors(),this.globalConfig.lockForm&&this.unlockForm()}refresh(){this.destroy(),this.form?(this.initialize(this.form,this.globalConfig),Object.keys(this.fields).forEach(e=>{const t=this.getFieldSelectorByKey(e);t&&this.addField(t,[...this.fields[e].rules],this.fields[e].config)})):console.error("Cannot initialize the library! Form is not defined")}setCurrentLocale(e){if(typeof e!="string"&&e!==void 0){console.error("Current locale should be a string");return}this.currentLocale=e,this.isSubmitted&&this.validate()}onSuccess(e){return this.onSuccessCallback=e,this}onFail(e){return this.onFailCallback=e,this}onValidate(e){return this.onValidateCallback=e,this}}var vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zi,Tp;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(c,C){function T(){}T.prototype=C.prototype,c.D=C.prototype,c.prototype=new T,c.prototype.constructor=c,c.C=function(I,D,M){for(var b=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)b[Ie-2]=arguments[Ie];return C.prototype[D].apply(I,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(c,C,T){T||(T=0);var I=Array(16);if(typeof C=="string")for(var D=0;16>D;++D)I[D]=C.charCodeAt(T++)|C.charCodeAt(T++)<<8|C.charCodeAt(T++)<<16|C.charCodeAt(T++)<<24;else for(D=0;16>D;++D)I[D]=C[T++]|C[T++]<<8|C[T++]<<16|C[T++]<<24;C=c.g[0],T=c.g[1],D=c.g[2];var M=c.g[3],b=C+(M^T&(D^M))+I[0]+3614090360&4294967295;C=T+(b<<7&4294967295|b>>>25),b=M+(D^C&(T^D))+I[1]+3905402710&4294967295,M=C+(b<<12&4294967295|b>>>20),b=D+(T^M&(C^T))+I[2]+606105819&4294967295,D=M+(b<<17&4294967295|b>>>15),b=T+(C^D&(M^C))+I[3]+3250441966&4294967295,T=D+(b<<22&4294967295|b>>>10),b=C+(M^T&(D^M))+I[4]+4118548399&4294967295,C=T+(b<<7&4294967295|b>>>25),b=M+(D^C&(T^D))+I[5]+1200080426&4294967295,M=C+(b<<12&4294967295|b>>>20),b=D+(T^M&(C^T))+I[6]+2821735955&4294967295,D=M+(b<<17&4294967295|b>>>15),b=T+(C^D&(M^C))+I[7]+4249261313&4294967295,T=D+(b<<22&4294967295|b>>>10),b=C+(M^T&(D^M))+I[8]+1770035416&4294967295,C=T+(b<<7&4294967295|b>>>25),b=M+(D^C&(T^D))+I[9]+2336552879&4294967295,M=C+(b<<12&4294967295|b>>>20),b=D+(T^M&(C^T))+I[10]+4294925233&4294967295,D=M+(b<<17&4294967295|b>>>15),b=T+(C^D&(M^C))+I[11]+2304563134&4294967295,T=D+(b<<22&4294967295|b>>>10),b=C+(M^T&(D^M))+I[12]+1804603682&4294967295,C=T+(b<<7&4294967295|b>>>25),b=M+(D^C&(T^D))+I[13]+4254626195&4294967295,M=C+(b<<12&4294967295|b>>>20),b=D+(T^M&(C^T))+I[14]+2792965006&4294967295,D=M+(b<<17&4294967295|b>>>15),b=T+(C^D&(M^C))+I[15]+1236535329&4294967295,T=D+(b<<22&4294967295|b>>>10),b=C+(D^M&(T^D))+I[1]+4129170786&4294967295,C=T+(b<<5&4294967295|b>>>27),b=M+(T^D&(C^T))+I[6]+3225465664&4294967295,M=C+(b<<9&4294967295|b>>>23),b=D+(C^T&(M^C))+I[11]+643717713&4294967295,D=M+(b<<14&4294967295|b>>>18),b=T+(M^C&(D^M))+I[0]+3921069994&4294967295,T=D+(b<<20&4294967295|b>>>12),b=C+(D^M&(T^D))+I[5]+3593408605&4294967295,C=T+(b<<5&4294967295|b>>>27),b=M+(T^D&(C^T))+I[10]+38016083&4294967295,M=C+(b<<9&4294967295|b>>>23),b=D+(C^T&(M^C))+I[15]+3634488961&4294967295,D=M+(b<<14&4294967295|b>>>18),b=T+(M^C&(D^M))+I[4]+3889429448&4294967295,T=D+(b<<20&4294967295|b>>>12),b=C+(D^M&(T^D))+I[9]+568446438&4294967295,C=T+(b<<5&4294967295|b>>>27),b=M+(T^D&(C^T))+I[14]+3275163606&4294967295,M=C+(b<<9&4294967295|b>>>23),b=D+(C^T&(M^C))+I[3]+4107603335&4294967295,D=M+(b<<14&4294967295|b>>>18),b=T+(M^C&(D^M))+I[8]+1163531501&4294967295,T=D+(b<<20&4294967295|b>>>12),b=C+(D^M&(T^D))+I[13]+2850285829&4294967295,C=T+(b<<5&4294967295|b>>>27),b=M+(T^D&(C^T))+I[2]+4243563512&4294967295,M=C+(b<<9&4294967295|b>>>23),b=D+(C^T&(M^C))+I[7]+1735328473&4294967295,D=M+(b<<14&4294967295|b>>>18),b=T+(M^C&(D^M))+I[12]+2368359562&4294967295,T=D+(b<<20&4294967295|b>>>12),b=C+(T^D^M)+I[5]+4294588738&4294967295,C=T+(b<<4&4294967295|b>>>28),b=M+(C^T^D)+I[8]+2272392833&4294967295,M=C+(b<<11&4294967295|b>>>21),b=D+(M^C^T)+I[11]+1839030562&4294967295,D=M+(b<<16&4294967295|b>>>16),b=T+(D^M^C)+I[14]+4259657740&4294967295,T=D+(b<<23&4294967295|b>>>9),b=C+(T^D^M)+I[1]+2763975236&4294967295,C=T+(b<<4&4294967295|b>>>28),b=M+(C^T^D)+I[4]+1272893353&4294967295,M=C+(b<<11&4294967295|b>>>21),b=D+(M^C^T)+I[7]+4139469664&4294967295,D=M+(b<<16&4294967295|b>>>16),b=T+(D^M^C)+I[10]+3200236656&4294967295,T=D+(b<<23&4294967295|b>>>9),b=C+(T^D^M)+I[13]+681279174&4294967295,C=T+(b<<4&4294967295|b>>>28),b=M+(C^T^D)+I[0]+3936430074&4294967295,M=C+(b<<11&4294967295|b>>>21),b=D+(M^C^T)+I[3]+3572445317&4294967295,D=M+(b<<16&4294967295|b>>>16),b=T+(D^M^C)+I[6]+76029189&4294967295,T=D+(b<<23&4294967295|b>>>9),b=C+(T^D^M)+I[9]+3654602809&4294967295,C=T+(b<<4&4294967295|b>>>28),b=M+(C^T^D)+I[12]+3873151461&4294967295,M=C+(b<<11&4294967295|b>>>21),b=D+(M^C^T)+I[15]+530742520&4294967295,D=M+(b<<16&4294967295|b>>>16),b=T+(D^M^C)+I[2]+3299628645&4294967295,T=D+(b<<23&4294967295|b>>>9),b=C+(D^(T|~M))+I[0]+4096336452&4294967295,C=T+(b<<6&4294967295|b>>>26),b=M+(T^(C|~D))+I[7]+1126891415&4294967295,M=C+(b<<10&4294967295|b>>>22),b=D+(C^(M|~T))+I[14]+2878612391&4294967295,D=M+(b<<15&4294967295|b>>>17),b=T+(M^(D|~C))+I[5]+4237533241&4294967295,T=D+(b<<21&4294967295|b>>>11),b=C+(D^(T|~M))+I[12]+1700485571&4294967295,C=T+(b<<6&4294967295|b>>>26),b=M+(T^(C|~D))+I[3]+2399980690&4294967295,M=C+(b<<10&4294967295|b>>>22),b=D+(C^(M|~T))+I[10]+4293915773&4294967295,D=M+(b<<15&4294967295|b>>>17),b=T+(M^(D|~C))+I[1]+2240044497&4294967295,T=D+(b<<21&4294967295|b>>>11),b=C+(D^(T|~M))+I[8]+1873313359&4294967295,C=T+(b<<6&4294967295|b>>>26),b=M+(T^(C|~D))+I[15]+4264355552&4294967295,M=C+(b<<10&4294967295|b>>>22),b=D+(C^(M|~T))+I[6]+2734768916&4294967295,D=M+(b<<15&4294967295|b>>>17),b=T+(M^(D|~C))+I[13]+1309151649&4294967295,T=D+(b<<21&4294967295|b>>>11),b=C+(D^(T|~M))+I[4]+4149444226&4294967295,C=T+(b<<6&4294967295|b>>>26),b=M+(T^(C|~D))+I[11]+3174756917&4294967295,M=C+(b<<10&4294967295|b>>>22),b=D+(C^(M|~T))+I[2]+718787259&4294967295,D=M+(b<<15&4294967295|b>>>17),b=T+(M^(D|~C))+I[9]+3951481745&4294967295,c.g[0]=c.g[0]+C&4294967295,c.g[1]=c.g[1]+(D+(b<<21&4294967295|b>>>11))&4294967295,c.g[2]=c.g[2]+D&4294967295,c.g[3]=c.g[3]+M&4294967295}r.prototype.u=function(c,C){C===void 0&&(C=c.length);for(var T=C-this.blockSize,I=this.B,D=this.h,M=0;M<C;){if(D==0)for(;M<=T;)i(this,c,M),M+=this.blockSize;if(typeof c=="string"){for(;M<C;)if(I[D++]=c.charCodeAt(M++),D==this.blockSize){i(this,I),D=0;break}}else for(;M<C;)if(I[D++]=c[M++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=C},r.prototype.v=function(){var c=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);c[0]=128;for(var C=1;C<c.length-8;++C)c[C]=0;var T=8*this.o;for(C=c.length-8;C<c.length;++C)c[C]=T&255,T/=256;for(this.u(c),c=Array(16),C=T=0;4>C;++C)for(var I=0;32>I;I+=8)c[T++]=this.g[C]>>>I&255;return c};function s(c,C){var T=h;return Object.prototype.hasOwnProperty.call(T,c)?T[c]:T[c]=C(c)}function u(c,C){this.h=C;for(var T=[],I=!0,D=c.length-1;0<=D;D--){var M=c[D]|0;I&&M==C||(T[D]=M,I=!1)}this.g=T}var h={};function d(c){return-128<=c&&128>c?s(c,function(C){return new u([C|0],0>C?-1:0)}):new u([c|0],0>c?-1:0)}function m(c){if(isNaN(c)||!isFinite(c))return R;if(0>c)return q(m(-c));for(var C=[],T=1,I=0;c>=T;I++)C[I]=c/T|0,T*=4294967296;return new u(C,0)}function y(c,C){if(c.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(c.charAt(0)=="-")return q(y(c.substring(1),C));if(0<=c.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=m(Math.pow(C,8)),I=R,D=0;D<c.length;D+=8){var M=Math.min(8,c.length-D),b=parseInt(c.substring(D,D+M),C);8>M?(M=m(Math.pow(C,M)),I=I.j(M).add(m(b))):(I=I.j(T),I=I.add(m(b)))}return I}var R=d(0),N=d(1),U=d(16777216);n=u.prototype,n.m=function(){if(O(this))return-q(this).m();for(var c=0,C=1,T=0;T<this.g.length;T++){var I=this.i(T);c+=(0<=I?I:4294967296+I)*C,C*=4294967296}return c},n.toString=function(c){if(c=c||10,2>c||36<c)throw Error("radix out of range: "+c);if(L(this))return"0";if(O(this))return"-"+q(this).toString(c);for(var C=m(Math.pow(c,6)),T=this,I="";;){var D=ee(T,C).g;T=$(T,D.j(C));var M=((0<T.g.length?T.g[0]:T.h)>>>0).toString(c);if(T=D,L(T))return M+I;for(;6>M.length;)M="0"+M;I=M+I}},n.i=function(c){return 0>c?0:c<this.g.length?this.g[c]:this.h};function L(c){if(c.h!=0)return!1;for(var C=0;C<c.g.length;C++)if(c.g[C]!=0)return!1;return!0}function O(c){return c.h==-1}n.l=function(c){return c=$(this,c),O(c)?-1:L(c)?0:1};function q(c){for(var C=c.g.length,T=[],I=0;I<C;I++)T[I]=~c.g[I];return new u(T,~c.h).add(N)}n.abs=function(){return O(this)?q(this):this},n.add=function(c){for(var C=Math.max(this.g.length,c.g.length),T=[],I=0,D=0;D<=C;D++){var M=I+(this.i(D)&65535)+(c.i(D)&65535),b=(M>>>16)+(this.i(D)>>>16)+(c.i(D)>>>16);I=b>>>16,M&=65535,b&=65535,T[D]=b<<16|M}return new u(T,T[T.length-1]&-2147483648?-1:0)};function $(c,C){return c.add(q(C))}n.j=function(c){if(L(this)||L(c))return R;if(O(this))return O(c)?q(this).j(q(c)):q(q(this).j(c));if(O(c))return q(this.j(q(c)));if(0>this.l(U)&&0>c.l(U))return m(this.m()*c.m());for(var C=this.g.length+c.g.length,T=[],I=0;I<2*C;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<c.g.length;D++){var M=this.i(I)>>>16,b=this.i(I)&65535,Ie=c.i(D)>>>16,ke=c.i(D)&65535;T[2*I+2*D]+=b*ke,Q(T,2*I+2*D),T[2*I+2*D+1]+=M*ke,Q(T,2*I+2*D+1),T[2*I+2*D+1]+=b*Ie,Q(T,2*I+2*D+1),T[2*I+2*D+2]+=M*Ie,Q(T,2*I+2*D+2)}for(I=0;I<C;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=C;I<2*C;I++)T[I]=0;return new u(T,0)};function Q(c,C){for(;(c[C]&65535)!=c[C];)c[C+1]+=c[C]>>>16,c[C]&=65535,C++}function X(c,C){this.g=c,this.h=C}function ee(c,C){if(L(C))throw Error("division by zero");if(L(c))return new X(R,R);if(O(c))return C=ee(q(c),C),new X(q(C.g),q(C.h));if(O(C))return C=ee(c,q(C)),new X(q(C.g),C.h);if(30<c.g.length){if(O(c)||O(C))throw Error("slowDivide_ only works with positive integers.");for(var T=N,I=C;0>=I.l(c);)T=ie(T),I=ie(I);var D=re(T,1),M=re(I,1);for(I=re(I,2),T=re(T,2);!L(I);){var b=M.add(I);0>=b.l(c)&&(D=D.add(T),M=b),I=re(I,1),T=re(T,1)}return C=$(c,D.j(C)),new X(D,C)}for(D=R;0<=c.l(C);){for(T=Math.max(1,Math.floor(c.m()/C.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),M=m(T),b=M.j(C);O(b)||0<b.l(c);)T-=I,M=m(T),b=M.j(C);L(M)&&(M=N),D=D.add(M),c=$(c,b)}return new X(D,c)}n.A=function(c){return ee(this,c).h},n.and=function(c){for(var C=Math.max(this.g.length,c.g.length),T=[],I=0;I<C;I++)T[I]=this.i(I)&c.i(I);return new u(T,this.h&c.h)},n.or=function(c){for(var C=Math.max(this.g.length,c.g.length),T=[],I=0;I<C;I++)T[I]=this.i(I)|c.i(I);return new u(T,this.h|c.h)},n.xor=function(c){for(var C=Math.max(this.g.length,c.g.length),T=[],I=0;I<C;I++)T[I]=this.i(I)^c.i(I);return new u(T,this.h^c.h)};function ie(c){for(var C=c.g.length+1,T=[],I=0;I<C;I++)T[I]=c.i(I)<<1|c.i(I-1)>>>31;return new u(T,c.h)}function re(c,C){var T=C>>5;C%=32;for(var I=c.g.length-T,D=[],M=0;M<I;M++)D[M]=0<C?c.i(M+T)>>>C|c.i(M+T+1)<<32-C:c.i(M+T);return new u(D,c.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Tp=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=y,zi=u}).apply(typeof vf<"u"?vf:typeof self<"u"?self:typeof window<"u"?window:{});var ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wp,_o,bp,Ga,Yl,Ip,Ap,Cp;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,p,v){return a==Array.prototype||a==Object.prototype||(a[p]=v.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ka=="object"&&ka];for(var p=0;p<a.length;++p){var v=a[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=t(this);function i(a,p){if(p)e:{var v=r;a=a.split(".");for(var A=0;A<a.length-1;A++){var W=a[A];if(!(W in v))break e;v=v[W]}a=a[a.length-1],A=v[a],p=p(A),p!=A&&p!=null&&e(v,a,{configurable:!0,writable:!0,value:p})}}function s(a,p){a instanceof String&&(a+="");var v=0,A=!1,W={next:function(){if(!A&&v<a.length){var K=v++;return{value:p(K,a[K]),done:!1}}return A=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(a){return a||function(){return s(this,function(p,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function d(a){var p=typeof a;return p=p!="object"?p:a?Array.isArray(a)?"array":p:"null",p=="array"||p=="object"&&typeof a.length=="number"}function m(a){var p=typeof a;return p=="object"&&a!=null||p=="function"}function y(a,p,v){return a.call.apply(a.bind,arguments)}function R(a,p,v){if(!a)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,A),a.apply(p,W)}}return function(){return a.apply(p,arguments)}}function N(a,p,v){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:R,N.apply(null,arguments)}function U(a,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),a.apply(this,A)}}function L(a,p){function v(){}v.prototype=p.prototype,a.aa=p.prototype,a.prototype=new v,a.prototype.constructor=a,a.Qb=function(A,W,K){for(var ue=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)ue[vt-2]=arguments[vt];return p.prototype[W].apply(A,ue)}}function O(a){const p=a.length;if(0<p){const v=Array(p);for(let A=0;A<p;A++)v[A]=a[A];return v}return[]}function q(a,p){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(d(A)){const W=a.length||0,K=A.length||0;a.length=W+K;for(let ue=0;ue<K;ue++)a[W+ue]=A[ue]}else a.push(A)}}class ${constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function Q(a){return/^[\s\xa0]*$/.test(a)}function X(){var a=h.navigator;return a&&(a=a.userAgent)?a:""}function ee(a){return ee[" "](a),a}ee[" "]=function(){};var ie=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function re(a,p,v){for(const A in a)p.call(v,a[A],A,a)}function c(a,p){for(const v in a)p.call(void 0,a[v],v,a)}function C(a){const p={};for(const v in a)p[v]=a[v];return p}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,p){let v,A;for(let W=1;W<arguments.length;W++){A=arguments[W];for(v in A)a[v]=A[v];for(let K=0;K<T.length;K++)v=T[K],Object.prototype.hasOwnProperty.call(A,v)&&(a[v]=A[v])}}function D(a){var p=1;a=a.split(":");const v=[];for(;0<p&&a.length;)v.push(a.shift()),p--;return a.length&&v.push(a.join(":")),v}function M(a){h.setTimeout(()=>{throw a},0)}function b(){var a=ve;let p=null;return a.g&&(p=a.g,a.g=a.g.next,a.g||(a.h=null),p.next=null),p}class Ie{constructor(){this.h=this.g=null}add(p,v){const A=ke.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var ke=new $(()=>new lt,a=>a.reset());class lt{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let Ve,_e=!1,ve=new Ie,he=()=>{const a=h.Promise.resolve(void 0);Ve=()=>{a.then(Se)}};var Se=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(v){M(v)}var p=ke;p.j(a),100>p.h&&(p.h++,a.next=p.g,p.g=a)}_e=!1};function Fe(){this.s=this.s,this.C=this.C}Fe.prototype.s=!1,Fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},Fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ze(a,p){this.type=a,this.g=this.target=p,this.defaultPrevented=!1}ze.prototype.h=function(){this.defaultPrevented=!0};var Et=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var a=!1,p=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const v=()=>{};h.addEventListener("test",v,p),h.removeEventListener("test",v,p)}catch{}return a}();function bt(a,p){if(ze.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var v=this.type=a.type,A=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=p,p=a.relatedTarget){if(ie){e:{try{ee(p.nodeName);var W=!0;break e}catch{}W=!1}W||(p=null)}}else v=="mouseover"?p=a.fromElement:v=="mouseout"&&(p=a.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:fe[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&bt.aa.h.call(this)}}L(bt,ze);var fe={2:"touch",3:"pen",4:"mouse"};bt.prototype.h=function(){bt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $e="closure_listenable_"+(1e6*Math.random()|0),gt=0;function nt(a,p,v,A,W){this.listener=a,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=W,this.key=++gt,this.da=this.fa=!1}function tt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function _n(a){this.src=a,this.g={},this.h=0}_n.prototype.add=function(a,p,v,A,W){var K=a.toString();a=this.g[K],a||(a=this.g[K]=[],this.h++);var ue=pe(a,p,A,W);return-1<ue?(p=a[ue],v||(p.fa=!1)):(p=new nt(p,this.src,K,!!A,W),p.fa=v,a.push(p)),p};function Lt(a,p){var v=p.type;if(v in a.g){var A=a.g[v],W=Array.prototype.indexOf.call(A,p,void 0),K;(K=0<=W)&&Array.prototype.splice.call(A,W,1),K&&(tt(p),a.g[v].length==0&&(delete a.g[v],a.h--))}}function pe(a,p,v,A){for(var W=0;W<a.length;++W){var K=a[W];if(!K.da&&K.listener==p&&K.capture==!!v&&K.ha==A)return W}return-1}var rt="closure_lm_"+(1e6*Math.random()|0),qt={};function zt(a,p,v,A,W){if(Array.isArray(p)){for(var K=0;K<p.length;K++)zt(a,p[K],v,A,W);return null}return v=Ae(v),a&&a[$e]?a.K(p,v,m(A)?!!A.capture:!!A,W):We(a,p,v,!1,A,W)}function We(a,p,v,A,W,K){if(!p)throw Error("Invalid event type");var ue=m(W)?!!W.capture:!!W,vt=En(a);if(vt||(a[rt]=vt=new _n(a)),v=vt.add(p,v,A,ue,K),v.proxy)return v;if(A=Mt(),v.proxy=A,A.src=a,A.listener=v,a.addEventListener)Et||(W=ue),W===void 0&&(W=!1),a.addEventListener(p.toString(),A,W);else if(a.attachEvent)a.attachEvent(ar(p.toString()),A);else if(a.addListener&&a.removeListener)a.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Mt(){function a(v){return p.call(a.src,a.listener,v)}const p=rn;return a}function An(a,p,v,A,W){if(Array.isArray(p))for(var K=0;K<p.length;K++)An(a,p[K],v,A,W);else A=m(A)?!!A.capture:!!A,v=Ae(v),a&&a[$e]?(a=a.i,p=String(p).toString(),p in a.g&&(K=a.g[p],v=pe(K,v,A,W),-1<v&&(tt(K[v]),Array.prototype.splice.call(K,v,1),K.length==0&&(delete a.g[p],a.h--)))):a&&(a=En(a))&&(p=a.g[p.toString()],a=-1,p&&(a=pe(p,v,A,W)),(v=-1<a?p[a]:null)&&Un(v))}function Un(a){if(typeof a!="number"&&a&&!a.da){var p=a.src;if(p&&p[$e])Lt(p.i,a);else{var v=a.type,A=a.proxy;p.removeEventListener?p.removeEventListener(v,A,a.capture):p.detachEvent?p.detachEvent(ar(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=En(p))?(Lt(v,a),v.h==0&&(v.src=null,p[rt]=null)):tt(a)}}}function ar(a){return a in qt?qt[a]:qt[a]="on"+a}function rn(a,p){if(a.da)a=!0;else{p=new bt(p,this);var v=a.listener,A=a.ha||a.src;a.fa&&Un(a),a=v.call(A,p)}return a}function En(a){return a=a[rt],a instanceof _n?a:null}var Cn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ae(a){return typeof a=="function"?a:(a[Cn]||(a[Cn]=function(p){return a.handleEvent(p)}),a[Cn])}function ct(){Fe.call(this),this.i=new _n(this),this.M=this,this.F=null}L(ct,Fe),ct.prototype[$e]=!0,ct.prototype.removeEventListener=function(a,p,v,A){An(this,a,p,v,A)};function Vt(a,p){var v,A=a.F;if(A)for(v=[];A;A=A.F)v.push(A);if(a=a.M,A=p.type||p,typeof p=="string")p=new ze(p,a);else if(p instanceof ze)p.target=p.target||a;else{var W=p;p=new ze(A,a),I(p,W)}if(W=!0,v)for(var K=v.length-1;0<=K;K--){var ue=p.g=v[K];W=ge(ue,A,!0,p)&&W}if(ue=p.g=a,W=ge(ue,A,!0,p)&&W,W=ge(ue,A,!1,p)&&W,v)for(K=0;K<v.length;K++)ue=p.g=v[K],W=ge(ue,A,!1,p)&&W}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var a=this.i,p;for(p in a.g){for(var v=a.g[p],A=0;A<v.length;A++)tt(v[A]);delete a.g[p],a.h--}}this.F=null},ct.prototype.K=function(a,p,v,A){return this.i.add(String(a),p,!1,v,A)},ct.prototype.L=function(a,p,v,A){return this.i.add(String(a),p,!0,v,A)};function ge(a,p,v,A){if(p=a.i.g[String(p)],!p)return!0;p=p.concat();for(var W=!0,K=0;K<p.length;++K){var ue=p[K];if(ue&&!ue.da&&ue.capture==v){var vt=ue.listener,At=ue.ha||ue.src;ue.fa&&Lt(a.i,ue),W=vt.call(At,A)!==!1&&W}}return W&&!A.defaultPrevented}function F(a,p,v){if(typeof a=="function")v&&(a=N(a,v));else if(a&&typeof a.handleEvent=="function")a=N(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(a,p||0)}function ce(a){a.g=F(()=>{a.g=null,a.i&&(a.i=!1,ce(a))},a.l);const p=a.h;a.h=null,a.m.apply(null,p)}class ye extends Fe{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ce(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ce(a){Fe.call(this),this.h=a,this.g={}}L(Ce,Fe);var kt=[];function $t(a){re(a.g,function(p,v){this.g.hasOwnProperty(v)&&Un(p)},a),a.g={}}Ce.prototype.N=function(){Ce.aa.N.call(this),$t(this)},Ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=h.JSON.stringify,jn=h.JSON.parse,Bn=class{stringify(a){return h.JSON.stringify(a,void 0)}parse(a){return h.JSON.parse(a,void 0)}};function Zn(){}Zn.prototype.h=null;function Tt(a){return a.h||(a.h=a.i())}function ur(){}var Ct={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fn(){ze.call(this,"d")}L(fn,ze);function Zr(){ze.call(this,"c")}L(Zr,ze);var S={},P=null;function B(){return P=P||new ct}S.La="serverreachability";function Z(a){ze.call(this,S.La,a)}L(Z,ze);function le(a){const p=B();Vt(p,new Z(p))}S.STAT_EVENT="statevent";function me(a,p){ze.call(this,S.STAT_EVENT,a),this.stat=p}L(me,ze);function Pe(a){const p=B();Vt(p,new me(p,a))}S.Ma="timingevent";function be(a,p){ze.call(this,S.Ma,a),this.size=p}L(be,ze);function Me(a,p){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){a()},p)}function Ee(){this.g=!0}Ee.prototype.xa=function(){this.g=!1};function Ne(a,p,v,A,W,K){a.info(function(){if(a.g)if(K)for(var ue="",vt=K.split("&"),At=0;At<vt.length;At++){var Xe=vt[At].split("=");if(1<Xe.length){var en=Xe[0];Xe=Xe[1];var tn=en.split("_");ue=2<=tn.length&&tn[1]=="type"?ue+(en+"="+Xe+"&"):ue+(en+"=redacted&")}}else ue=null;else ue=K;return"XMLHTTP REQ ("+A+") [attempt "+W+"]: "+p+`
`+v+`
`+ue})}function mt(a,p,v,A,W,K,ue){a.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+W+"]: "+p+`
`+v+`
`+K+" "+ue})}function Kt(a,p,v,A){a.info(function(){return"XMLHTTP TEXT ("+p+"): "+lr(a,v)+(A?" "+A:"")})}function sn(a,p){a.info(function(){return"TIMEOUT: "+p})}Ee.prototype.info=function(){};function lr(a,p){if(!a.g)return p;if(!p)return null;try{var v=JSON.parse(p);if(v){for(a=0;a<v.length;a++)if(Array.isArray(v[a])){var A=v[a];if(!(2>A.length)){var W=A[1];if(Array.isArray(W)&&!(1>W.length)){var K=W[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ue=1;ue<W.length;ue++)W[ue]=""}}}}return Qe(v)}catch{return p}}var Nn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ls={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cr;function ei(){}L(ei,Zn),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},cr=new ei;function on(a,p,v,A){this.j=a,this.i=p,this.l=v,this.R=A||1,this.U=new Ce(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Di}function Di(){this.i=null,this.g="",this.h=!1}var ti={},Dr={};function hr(a,p,v){a.L=1,a.v=fr(qn(p)),a.m=v,a.P=!0,ki(a,null)}function ki(a,p){a.F=Date.now(),Oi(a),a.A=qn(a.v);var v=a.A,A=a.R;Array.isArray(A)||(A=[String(A)]),oo(v.i,"t",A),a.C=0,v=a.j.J,a.h=new Di,a.g=xn(a.j,v?p:null,!a.m),0<a.O&&(a.M=new ye(N(a.Y,a,a.g),a.O)),p=a.U,v=a.g,A=a.ca;var W="readystatechange";Array.isArray(W)||(W&&(kt[0]=W.toString()),W=kt);for(var K=0;K<W.length;K++){var ue=zt(v,W[K],A||p.handleEvent,!1,p.h||p);if(!ue)break;p.g[ue.key]=ue}p=a.H?C(a.H):{},a.m?(a.u||(a.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,p)):(a.u="GET",a.g.ea(a.A,a.u,null,p)),le(),Ne(a.i,a.u,a.A,a.l,a.R,a.m)}on.prototype.ca=function(a){a=a.target;const p=this.M;p&&On(a)==3?p.j():this.Y(a)},on.prototype.Y=function(a){try{if(a==this.g)e:{const tn=On(this.g);var p=this.g.Ba();const si=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||Aa(this.g)))){this.J||tn!=4||p==7||(p==8||0>=si?le(3):le(2)),hs(this);var v=this.g.Z();this.X=v;t:if(cs(this)){var A=Aa(this.g);a="";var W=A.length,K=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),ni(this);var ue="";break t}this.h.i=new h.TextDecoder}for(p=0;p<W;p++)this.h.h=!0,a+=this.h.i.decode(A[p],{stream:!(K&&p==W-1)});A.length=0,this.h.g+=a,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=v==200,mt(this.i,this.u,this.A,this.l,this.R,tn,v),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,At=this.g;if((vt=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(vt)){var Xe=vt;break t}}Xe=null}if(v=Xe)Kt(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xi(this,v);else{this.o=!1,this.s=3,Pe(12),kr(this),ni(this);break e}}if(this.P){v=!0;let Ze;for(;!this.J&&this.C<ue.length;)if(Ze=Ni(this,ue),Ze==Dr){tn==4&&(this.s=4,Pe(14),v=!1),Kt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ze==ti){this.s=4,Pe(15),Kt(this.i,this.l,ue,"[Invalid Chunk]"),v=!1;break}else Kt(this.i,this.l,Ze,null),xi(this,Ze);if(cs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||ue.length!=0||this.h.h||(this.s=1,Pe(16),v=!1),this.o=this.o&&v,!v)Kt(this.i,this.l,ue,"[Invalid Chunked Response]"),kr(this),ni(this);else if(0<ue.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),te(en),en.M=!0,Pe(11))}}else Kt(this.i,this.l,ue,null),xi(this,ue);tn==4&&kr(this),this.o&&!this.J&&(tn==4?Ue(this.j,this):(this.o=!1,Oi(this)))}else ul(this.g),v==400&&0<ue.indexOf("Unknown SID")?(this.s=3,Pe(12)):(this.s=0,Pe(13)),kr(this),ni(this)}}}catch{}finally{}};function cs(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Ni(a,p){var v=a.C,A=p.indexOf(`
`,v);return A==-1?Dr:(v=Number(p.substring(v,A)),isNaN(v)?ti:(A+=1,A+v>p.length?Dr:(p=p.slice(A,A+v),a.C=A+v,p)))}on.prototype.cancel=function(){this.J=!0,kr(this)};function Oi(a){a.S=Date.now()+a.I,to(a,a.I)}function to(a,p){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Me(N(a.ba,a),p)}function hs(a){a.B&&(h.clearTimeout(a.B),a.B=null)}on.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(sn(this.i,this.A),this.L!=2&&(le(),Pe(17)),kr(this),this.s=2,ni(this)):to(this,this.S-a)};function ni(a){a.j.G==0||a.J||Ue(a.j,a)}function kr(a){hs(a);var p=a.M;p&&typeof p.ma=="function"&&p.ma(),a.M=null,$t(a.U),a.g&&(p=a.g,a.g=null,p.abort(),p.ma())}function xi(a,p){try{var v=a.j;if(v.G!=0&&(v.g==a||Li(v.h,a))){if(!a.K&&Li(v.h,a)&&v.G==3){try{var A=v.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var W=A;if(W[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<a.F)se(v),f(v);else break e;J(v),Pe(18)}}else v.za=W[1],0<v.za-v.T&&37500>W[2]&&v.F&&v.v==0&&!v.C&&(v.C=Me(N(v.Za,v),6e3));if(1>=ro(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else je(v,11)}else if((a.K||v.g==a)&&se(v),!Q(p))for(W=v.Da.g.parse(p),p=0;p<W.length;p++){let Xe=W[p];if(v.T=Xe[0],Xe=Xe[1],v.G==2)if(Xe[0]=="c"){v.K=Xe[1],v.ia=Xe[2];const en=Xe[3];en!=null&&(v.la=en,v.j.info("VER="+v.la));const tn=Xe[4];tn!=null&&(v.Aa=tn,v.j.info("SVER="+v.Aa));const si=Xe[5];si!=null&&typeof si=="number"&&0<si&&(A=1.5*si,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const Ze=a.g;if(Ze){const Mr=Ze.g?Ze.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var K=A.h;K.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(fs(K,K.h),K.h=null))}if(A.D){const Tn=Ze.g?Ze.g.getResponseHeader("X-HTTP-Session-Id"):null;Tn&&(A.ya=Tn,It(A.I,A.D,Tn))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-a.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var ue=a;if(A.qa=Ft(A,A.J?A.ia:null,A.W),ue.K){an(A.h,ue);var vt=ue,At=A.L;At&&(vt.I=At),vt.B&&(hs(vt),Oi(vt)),A.g=ue}else H(A);0<v.i.length&&_(v)}else Xe[0]!="stop"&&Xe[0]!="close"||je(v,7);else v.G==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?je(v,7):l(v):Xe[0]!="noop"&&v.l&&v.l.ta(Xe),v.v=0)}}le(4)}catch{}}var tl=class{constructor(a,p){this.g=a,this.map=p}};function ga(a){this.l=a||10,h.PerformanceNavigationTiming?(a=h.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function no(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function ro(a){return a.h?1:a.g?a.g.size:0}function Li(a,p){return a.h?a.h==p:a.g?a.g.has(p):!1}function fs(a,p){a.g?a.g.add(p):a.h=p}function an(a,p){a.h&&a.h==p?a.h=null:a.g&&a.g.has(p)&&a.g.delete(p)}ga.prototype.cancel=function(){if(this.i=Nr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Nr(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let p=a.i;for(const v of a.g.values())p=p.concat(v.D);return p}return O(a.i)}function ds(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(d(a)){for(var p=[],v=a.length,A=0;A<v;A++)p.push(a[A]);return p}p=[],v=0;for(A in a)p[v++]=a[A];return p}function nl(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(d(a)||typeof a=="string"){var p=[];a=a.length;for(var v=0;v<a;v++)p.push(v);return p}p=[],v=0;for(const A in a)p[v++]=A;return p}}}function ma(a,p){if(a.forEach&&typeof a.forEach=="function")a.forEach(p,void 0);else if(d(a)||typeof a=="string")Array.prototype.forEach.call(a,p,void 0);else for(var v=nl(a),A=ds(a),W=A.length,K=0;K<W;K++)p.call(void 0,A[K],v&&v[K],a)}var ps=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(a,p){if(a){a=a.split("&");for(var v=0;v<a.length;v++){var A=a[v].indexOf("="),W=null;if(0<=A){var K=a[v].substring(0,A);W=a[v].substring(A+1)}else K=a[v];p(K,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Hn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Hn){this.h=a.h,gs(this,a.j),this.o=a.o,this.g=a.g,ms(this,a.s),this.l=a.l;var p=a.i,v=new xr;v.i=p.i,p.g&&(v.g=new Map(p.g),v.h=p.h),Sn(this,v),this.m=a.m}else a&&(p=String(a).match(ps))?(this.h=!1,gs(this,p[1]||"",!0),this.o=Mi(p[2]||""),this.g=Mi(p[3]||"",!0),ms(this,p[4]),this.l=Mi(p[5]||"",!0),Sn(this,p[6]||"",!0),this.m=Mi(p[7]||"")):(this.h=!1,this.i=new xr(null,this.h))}Hn.prototype.toString=function(){var a=[],p=this.j;p&&a.push(Vi(p,dr,!0),":");var v=this.g;return(v||p=="file")&&(a.push("//"),(p=this.o)&&a.push(Vi(p,dr,!0),"@"),a.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&a.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&a.push("/"),a.push(Vi(v,v.charAt(0)=="/"?rl:io,!0))),(v=this.i.toString())&&a.push("?",v),(v=this.m)&&a.push("#",Vi(v,ya)),a.join("")};function qn(a){return new Hn(a)}function gs(a,p,v){a.j=v?Mi(p,!0):p,a.j&&(a.j=a.j.replace(/:$/,""))}function ms(a,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);a.s=p}else a.s=null}function Sn(a,p,v){p instanceof xr?(a.i=p,il(a.i,a.h)):(v||(p=Vi(p,Fi)),a.i=new xr(p,a.h))}function It(a,p,v){a.i.set(p,v)}function fr(a){return It(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Mi(a,p){return a?p?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Vi(a,p,v){return typeof a=="string"?(a=encodeURI(a).replace(p,Or),v&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Or(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var dr=/[#\/\?@]/g,io=/[#\?:]/g,rl=/[#\?]/g,Fi=/[#\?@]/g,ya=/#/g;function xr(a,p){this.h=this.g=null,this.i=a||null,this.j=!!p}function er(a){a.g||(a.g=new Map,a.h=0,a.i&&va(a.i,function(p,v){a.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}n=xr.prototype,n.add=function(a,p){er(this),this.i=null,a=ri(this,a);var v=this.g.get(a);return v||this.g.set(a,v=[]),v.push(p),this.h+=1,this};function so(a,p){er(a),p=ri(a,p),a.g.has(p)&&(a.i=null,a.h-=a.g.get(p).length,a.g.delete(p))}function _a(a,p){return er(a),p=ri(a,p),a.g.has(p)}n.forEach=function(a,p){er(this),this.g.forEach(function(v,A){v.forEach(function(W){a.call(p,W,A,this)},this)},this)},n.na=function(){er(this);const a=Array.from(this.g.values()),p=Array.from(this.g.keys()),v=[];for(let A=0;A<p.length;A++){const W=a[A];for(let K=0;K<W.length;K++)v.push(p[A])}return v},n.V=function(a){er(this);let p=[];if(typeof a=="string")_a(this,a)&&(p=p.concat(this.g.get(ri(this,a))));else{a=Array.from(this.g.values());for(let v=0;v<a.length;v++)p=p.concat(a[v])}return p},n.set=function(a,p){return er(this),this.i=null,a=ri(this,a),_a(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[p]),this.h+=1,this},n.get=function(a,p){return a?(a=this.V(a),0<a.length?String(a[0]):p):p};function oo(a,p,v){so(a,p),0<v.length&&(a.i=null,a.g.set(ri(a,p),O(v)),a.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],p=Array.from(this.g.keys());for(var v=0;v<p.length;v++){var A=p[v];const K=encodeURIComponent(String(A)),ue=this.V(A);for(A=0;A<ue.length;A++){var W=K;ue[A]!==""&&(W+="="+encodeURIComponent(String(ue[A]))),a.push(W)}}return this.i=a.join("&")};function ri(a,p){return p=String(p),a.j&&(p=p.toLowerCase()),p}function il(a,p){p&&!a.j&&(er(a),a.i=null,a.g.forEach(function(v,A){var W=A.toLowerCase();A!=W&&(so(this,A),oo(this,W,v))},a)),a.j=p}function ao(a,p){const v=new Ee;if(h.Image){const A=new Image;A.onload=U(pr,v,"TestLoadImage: loaded",!0,p,A),A.onerror=U(pr,v,"TestLoadImage: error",!1,p,A),A.onabort=U(pr,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=U(pr,v,"TestLoadImage: timeout",!1,p,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=a}else p(!1)}function sl(a,p){const v=new Ee,A=new AbortController,W=setTimeout(()=>{A.abort(),pr(v,"TestPingServer: timeout",!1,p)},1e4);fetch(a,{signal:A.signal}).then(K=>{clearTimeout(W),K.ok?pr(v,"TestPingServer: ok",!0,p):pr(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(W),pr(v,"TestPingServer: error",!1,p)})}function pr(a,p,v,A,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),A(v)}catch{}}function ol(){this.g=new Bn}function al(a,p,v){const A=v||"";try{ma(a,function(W,K){let ue=W;m(W)&&(ue=Qe(W)),p.push(A+K+"="+encodeURIComponent(ue))})}catch(W){throw p.push(A+"type="+encodeURIComponent("_badmap")),W}}function vs(a){this.l=a.Ub||null,this.j=a.eb||!1}L(vs,Zn),vs.prototype.g=function(){return new ys(this.l,this.j)},vs.prototype.i=function(a){return function(){return a}}({});function ys(a,p){ct.call(this),this.D=a,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(ys,ct),n=ys.prototype,n.open=function(a,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=p,this.readyState=1,Lr(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(p.body=a),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ii(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Lr(this)),this.g&&(this.readyState=3,Lr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ea(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ea(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var p=a.value?a.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!a.done}))&&(this.response=this.responseText+=p)}a.done?ii(this):Lr(this),this.readyState==3&&Ea(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,ii(this))},n.Qa=function(a){this.g&&(this.response=a,ii(this))},n.ga=function(){this.g&&ii(this)};function ii(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Lr(a)}n.setRequestHeader=function(a,p){this.u.append(a,p)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,a.push(v[0]+": "+v[1]),v=p.next();return a.join(`\r
`)};function Lr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function uo(a){let p="";return re(a,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function Ui(a,p,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=uo(v),typeof a=="string"?v!=null&&encodeURIComponent(String(v)):It(a,p,v))}function Pt(a){ct.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Pt,ct);var Ta=/^https?$/i,lo=["POST","PUT"];n=Pt.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);p=p?p.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cr.g(),this.v=this.o?Tt(this.o):Tt(cr),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(p,String(a),!0),this.B=!1}catch(K){wa(this,K);return}if(a=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var W in A)v.set(W,A[W]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),W=h.FormData&&a instanceof h.FormData,!(0<=Array.prototype.indexOf.call(lo,p,void 0))||A||W||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of v)this.g.setRequestHeader(K,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{co(this),this.u=!0,this.g.send(a),this.u=!1}catch(K){wa(this,K)}};function wa(a,p){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=p,a.m=5,ba(a),gr(a)}function ba(a){a.A||(a.A=!0,Vt(a,"complete"),Vt(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Vt(this,"complete"),Vt(this,"abort"),gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gr(this,!0)),Pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ia(this):this.bb())},n.bb=function(){Ia(this)};function Ia(a){if(a.h&&typeof u<"u"&&(!a.v[1]||On(a)!=4||a.Z()!=2)){if(a.u&&On(a)==4)F(a.Ea,0,a);else if(Vt(a,"readystatechange"),On(a)==4){a.h=!1;try{const ue=a.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var A;if(A=ue===0){var W=String(a.D).match(ps)[1]||null;!W&&h.self&&h.self.location&&(W=h.self.location.protocol.slice(0,-1)),A=!Ta.test(W?W.toLowerCase():"")}v=A}if(v)Vt(a,"complete"),Vt(a,"success");else{a.m=6;try{var K=2<On(a)?a.g.statusText:""}catch{K=""}a.l=K+" ["+a.Z()+"]",ba(a)}}finally{gr(a)}}}}function gr(a,p){if(a.g){co(a);const v=a.g,A=a.v[0]?()=>{}:null;a.g=null,a.v=null,p||Vt(a,"ready");try{v.onreadystatechange=A}catch{}}}function co(a){a.I&&(h.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function On(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var p=this.g.responseText;return a&&p.indexOf(a)==0&&(p=p.substring(a.length)),jn(p)}};function Aa(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ul(a){const p={};a=(a.g&&2<=On(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<a.length;A++){if(Q(a[A]))continue;var v=D(a[A]);const W=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=p[W]||[];p[W]=K,K.push(v)}c(p,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ji(a,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[a]||p}function o(a){this.Aa=0,this.i=[],this.j=new Ee,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ji("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ji("baseRetryDelayMs",5e3,a),this.cb=ji("retryDelaySeedMs",1e4,a),this.Wa=ji("forwardChannelMaxRetries",2,a),this.wa=ji("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ga(a&&a.concurrentRequestLimit),this.Da=new ol,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=o.prototype,n.la=8,n.G=1,n.connect=function(a,p,v,A){Pe(0),this.W=a,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=Ft(this,null,this.W),_(this)};function l(a){if(g(a),a.G==3){var p=a.U++,v=qn(a.I);if(It(v,"SID",a.K),It(v,"RID",p),It(v,"TYPE","terminate"),V(a,v),p=new on(a,a.j,p),p.L=2,p.v=fr(qn(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!v&&h.Image&&(new Image().src=p.v,v=!0),v||(p.g=xn(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Oi(p)}Wt(a)}function f(a){a.g&&(te(a),a.g.cancel(),a.g=null)}function g(a){f(a),a.u&&(h.clearTimeout(a.u),a.u=null),se(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&h.clearTimeout(a.s),a.s=null)}function _(a){if(!no(a.h)&&!a.s){a.s=!0;var p=a.Ga;Ve||he(),_e||(Ve(),_e=!0),ve.add(p,a),a.B=0}}function E(a,p){return ro(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=p.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Me(N(a.Ga,a,p),it(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const W=new on(this,this.j,a);let K=this.o;if(this.S&&(K?(K=C(K),I(K,this.S)):K=this.S),this.m!==null||this.O||(W.H=K,K=null),this.P)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=x(this,W,p),v=qn(this.I),It(v,"RID",a),It(v,"CVER",22),this.D&&It(v,"X-HTTP-Session-Id",this.D),V(this,v),K&&(this.O?p="headers="+encodeURIComponent(String(uo(K)))+"&"+p:this.m&&Ui(v,this.m,K)),fs(this.h,W),this.Ua&&It(v,"TYPE","init"),this.P?(It(v,"$req",p),It(v,"SID","null"),W.T=!0,hr(W,v,null)):hr(W,v,p),this.G=2}}else this.G==3&&(a?w(this,a):this.i.length==0||no(this.h)||w(this))};function w(a,p){var v;p?v=p.l:v=a.U++;const A=qn(a.I);It(A,"SID",a.K),It(A,"RID",v),It(A,"AID",a.T),V(a,A),a.m&&a.o&&Ui(A,a.m,a.o),v=new on(a,a.j,v,a.B+1),a.m===null&&(v.H=a.o),p&&(a.i=p.D.concat(a.i)),p=x(a,v,1e3),v.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),fs(a.h,v),hr(v,A,p)}function V(a,p){a.H&&re(a.H,function(v,A){It(p,A,v)}),a.l&&ma({},function(v,A){It(p,A,v)})}function x(a,p,v){v=Math.min(a.i.length,v);var A=a.l?N(a.l.Na,a.l,a):null;e:{var W=a.i;let K=-1;for(;;){const ue=["count="+v];K==-1?0<v?(K=W[0].g,ue.push("ofs="+K)):K=0:ue.push("ofs="+K);let vt=!0;for(let At=0;At<v;At++){let Xe=W[At].g;const en=W[At].map;if(Xe-=K,0>Xe)K=Math.max(0,W[At].g-100),vt=!1;else try{al(en,ue,"req"+Xe+"_")}catch{A&&A(en)}}if(vt){A=ue.join("&");break e}}}return a=a.i.splice(0,v),p.D=a,A}function H(a){if(!a.g&&!a.u){a.Y=1;var p=a.Fa;Ve||he(),_e||(Ve(),_e=!0),ve.add(p,a),a.v=0}}function J(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Me(N(a.Fa,a),it(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,z(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Me(N(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pe(10),f(this),z(this))};function te(a){a.A!=null&&(h.clearTimeout(a.A),a.A=null)}function z(a){a.g=new on(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var p=qn(a.qa);It(p,"RID","rpc"),It(p,"SID",a.K),It(p,"AID",a.T),It(p,"CI",a.F?"0":"1"),!a.F&&a.ja&&It(p,"TO",a.ja),It(p,"TYPE","xmlhttp"),V(a,p),a.m&&a.o&&Ui(p,a.m,a.o),a.L&&(a.g.I=a.L);var v=a.g;a=a.ia,v.L=1,v.v=fr(qn(p)),v.m=null,v.P=!0,ki(v,a)}n.Za=function(){this.C!=null&&(this.C=null,f(this),J(this),Pe(19))};function se(a){a.C!=null&&(h.clearTimeout(a.C),a.C=null)}function Ue(a,p){var v=null;if(a.g==p){se(a),te(a),a.g=null;var A=2}else if(Li(a.h,p))v=p.D,an(a.h,p),A=1;else return;if(a.G!=0){if(p.o)if(A==1){v=p.m?p.m.length:0,p=Date.now()-p.F;var W=a.B;A=B(),Vt(A,new be(A,v)),_(a)}else H(a);else if(W=p.s,W==3||W==0&&0<p.X||!(A==1&&E(a,p)||A==2&&J(a)))switch(v&&0<v.length&&(p=a.h,p.i=p.i.concat(v)),W){case 1:je(a,5);break;case 4:je(a,10);break;case 3:je(a,6);break;default:je(a,2)}}}function it(a,p){let v=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(v*=2),v*p}function je(a,p){if(a.j.info("Error code "+p),p==2){var v=N(a.fb,a),A=a.Xa;const W=!A;A=new Hn(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||gs(A,"https"),fr(A),W?ao(A.toString(),v):sl(A.toString(),v)}else Pe(2);a.G=0,a.l&&a.l.sa(p),Wt(a),g(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))};function Wt(a){if(a.G=0,a.ka=[],a.l){const p=Nr(a.h);(p.length!=0||a.i.length!=0)&&(q(a.ka,p),q(a.ka,a.i),a.h.i.length=0,O(a.i),a.i.length=0),a.l.ra()}}function Ft(a,p,v){var A=v instanceof Hn?qn(v):new Hn(v);if(A.g!="")p&&(A.g=p+"."+A.g),ms(A,A.s);else{var W=h.location;A=W.protocol,p=p?p+"."+W.hostname:W.hostname,W=+W.port;var K=new Hn(null);A&&gs(K,A),p&&(K.g=p),W&&ms(K,W),v&&(K.l=v),A=K}return v=a.D,p=a.ya,v&&p&&It(A,v,p),It(A,"VER",a.la),V(a,A),A}function xn(a,p,v){if(p&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=a.Ca&&!a.pa?new Pt(new vs({eb:v})):new Pt(a.pa),p.Ha(a.J),p}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ln(){}n=Ln.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Je(){}Je.prototype.g=function(a,p){return new Bt(a,p)};function Bt(a,p){ct.call(this),this.g=new o(p),this.l=a,this.h=p&&p.messageUrlParams||null,a=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(a?a["X-WebChannel-Content-Type"]=p.messageContentType:a={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(a?a["X-WebChannel-Client-Profile"]=p.va:a={"X-WebChannel-Client-Profile":p.va}),this.g.S=a,(a=p&&p.Sb)&&!Q(a)&&(this.g.m=a),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!Q(p)&&(this.g.D=p,a=this.h,a!==null&&p in a&&(a=this.h,p in a&&delete a[p])),this.j=new $n(this)}L(Bt,ct),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){l(this.g)},Bt.prototype.o=function(a){var p=this.g;if(typeof a=="string"){var v={};v.__data__=a,a=v}else this.u&&(v={},v.__data__=Qe(a),a=v);p.i.push(new tl(p.Ya++,a)),p.G==3&&_(p)},Bt.prototype.N=function(){this.g.l=null,delete this.j,l(this.g),delete this.g,Bt.aa.N.call(this)};function at(a){fn.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var p=a.__sm__;if(p){e:{for(const v in p){a=v;break e}a=void 0}(this.i=a)&&(a=this.i,p=p!==null&&a in p?p[a]:void 0),this.data=p}else this.data=a}L(at,fn);function Dt(){Zr.call(this),this.status=1}L(Dt,Zr);function $n(a){this.g=a}L($n,Ln),$n.prototype.ua=function(){Vt(this.g,"a")},$n.prototype.ta=function(a){Vt(this.g,new at(a))},$n.prototype.sa=function(a){Vt(this.g,new Dt)},$n.prototype.ra=function(){Vt(this.g,"b")},Je.prototype.createWebChannel=Je.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Cp=function(){return new Je},Ap=function(){return B()},Ip=S,Yl={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nn.NO_ERROR=0,Nn.TIMEOUT=8,Nn.HTTP_ERROR=6,Ga=Nn,ls.COMPLETE="complete",bp=ls,ur.EventType=Ct,Ct.OPEN="a",Ct.CLOSE="b",Ct.ERROR="c",Ct.MESSAGE="d",ct.prototype.listen=ct.prototype.K,_o=ur,Pt.prototype.listenOnce=Pt.prototype.L,Pt.prototype.getLastError=Pt.prototype.Ka,Pt.prototype.getLastErrorCode=Pt.prototype.Ba,Pt.prototype.getStatus=Pt.prototype.Z,Pt.prototype.getResponseJson=Pt.prototype.Oa,Pt.prototype.getResponseText=Pt.prototype.oa,Pt.prototype.send=Pt.prototype.ea,Pt.prototype.setWithCredentials=Pt.prototype.Ha,wp=Pt}).apply(typeof ka<"u"?ka:typeof self<"u"?self:typeof window<"u"?window:{});const yf="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ks="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new Tc("@firebase/firestore");function go(){return Zi.logLevel}function Re(n,...e){if(Zi.logLevel<=ft.DEBUG){const t=e.map(Mc);Zi.debug(`Firestore (${Ks}): ${n}`,...t)}}function Yr(n,...e){if(Zi.logLevel<=ft.ERROR){const t=e.map(Mc);Zi.error(`Firestore (${Ks}): ${n}`,...t)}}function Ms(n,...e){if(Zi.logLevel<=ft.WARN){const t=e.map(Mc);Zi.warn(`Firestore (${Ks}): ${n}`,...t)}}function Mc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(n="Unexpected state"){const e=`FIRESTORE (${Ks}) INTERNAL ASSERTION FAILED: `+n;throw Yr(e),new Error(e)}function wt(n,e){n||qe()}function Ye(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(gn.UNAUTHENTICATED))}shutdown(){}}class hT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fT{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){wt(this.o===void 0);let r=this.i;const i=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let s=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vi,e.enqueueRetryable(()=>i(this.currentUser))};const u=()=>{const d=s;e.enqueueRetryable(async()=>{await d.promise,await i(this.currentUser)})},h=d=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vi)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string"),new Sp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string"),new gn(e)}}class dT{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pT{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dT(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(gn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mT{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){wt(this.o===void 0);const r=s=>{s.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.R;return this.R=s.token,Re("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt(typeof t.token=="string"),this.R=t.token,new gT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vT(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function pt(n,e){return n<e?-1:n>e?1:0}function Vs(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Jt(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pt(this.nanoseconds,e.nanoseconds):pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ke(e)}static min(){return new Ke(new Jt(0,0))}static max(){return new Ke(new Jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t,r){t===void 0?t=0:t>e.length&&qe(),r===void 0?r=e.length-t:r>e.length-t&&qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Oo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Oo?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Nt extends Oo{construct(e,t,r){return new Nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Nt(t)}static emptyPath(){return new Nt([])}}const yT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Oo{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return yT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ln(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Oe(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new Oe(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[i+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new Oe(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,i+=2}else h==="`"?(u=!u,i++):h!=="."||u?(r+=h,i++):(s(),i++)}if(s(),u)throw new Oe(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.path=e}static fromPath(e){return new Le(Nt.fromString(e))}static fromName(e){return new Le(Nt.fromString(e).popFirst(5))}static empty(){return new Le(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Le(new Nt(e.slice()))}}function _T(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ke.fromTimestamp(r===1e9?new Jt(t+1,0):new Jt(t,r));return new Ei(i,Le.empty(),e)}function ET(n){return new Ei(n.readTime,n.key,-1)}class Ei{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ei(Ke.min(),Le.empty(),-1)}static max(){return new Ei(Ke.max(),Le.empty(),-1)}}function TT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Le.comparator(n.documentKey,e.documentKey),t!==0?t:pt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==wT)throw n;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,s=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++s,u&&s===i&&t()},d=>r(d))}),u=!0,s===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const s=e.length,u=new Array(s);let h=0;for(let d=0;d<s;d++){const m=d;t(e[m]).next(y=>{u[m]=y,++h,h===s&&r(u)},y=>i(y))}})}static doWhile(e,t){return new oe((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function IT(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ta(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Vc.oe=-1;function Pu(n){return n==null}function cu(n){return n===0&&1/n==-1/0}function AT(n){return typeof n=="number"&&Number.isInteger(n)&&!cu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ys(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Pp(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new Ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Na(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Na(this.root,e,this.comparator,!1)}getReverseIterator(){return new Na(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Na(this.root,e,this.comparator,!0)}}class Na{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??un.RED,this.left=i??un.EMPTY,this.right=s??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new un(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return un.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw qe();const e=this.left.check();if(e!==this.right.check())throw qe();return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw qe()}get value(){throw qe()}get color(){throw qe()}get left(){throw qe()}get right(){throw qe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ef(this.data.getIterator())}getIteratorFrom(e){return new Ef(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof cn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new cn(this.comparator);return t.data=e,t}}class Ef{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new rr([])}unionWith(e){let t=new cn(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new rr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vs(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Dp("Invalid base64 string: "+s):s}}(e);return new hn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let u=0;u<i.length;++u)s+=String.fromCharCode(i[u]);return s}(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const CT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(n){if(wt(!!n),typeof n=="string"){let e=0;const t=CT.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(n.seconds),nanos:Ht(n.nanos)}}function Ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function es(n){return typeof n=="string"?hn.fromBase64String(n):hn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Uc(n){const e=n.mapValue.fields.__previous_value__;return Fc(e)?Uc(e):e}function xo(n){const e=Ti(n.mapValue.fields.__local_write_time__.timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,t,r,i,s,u,h,d,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}}class Lo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ts(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fc(n)?4:PT(n)?9007199254740991:RT(n)?10:11:qe()}function Ir(n,e){if(n===e)return!0;const t=ts(n);if(t!==ts(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xo(n).isEqual(xo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const u=Ti(i.timestampValue),h=Ti(s.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return es(i.bytesValue).isEqual(es(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Ht(i.geoPointValue.latitude)===Ht(s.geoPointValue.latitude)&&Ht(i.geoPointValue.longitude)===Ht(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ht(i.integerValue)===Ht(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const u=Ht(i.doubleValue),h=Ht(s.doubleValue);return u===h?cu(u)===cu(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Vs(n.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return function(i,s){const u=i.mapValue.fields||{},h=s.mapValue.fields||{};if(_f(u)!==_f(h))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(h[d]===void 0||!Ir(u[d],h[d])))return!1;return!0}(n,e);default:return qe()}}function Mo(n,e){return(n.values||[]).find(t=>Ir(t,e))!==void 0}function Fs(n,e){if(n===e)return 0;const t=ts(n),r=ts(e);if(t!==r)return pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const h=Ht(s.integerValue||s.doubleValue),d=Ht(u.integerValue||u.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(n,e);case 3:return Tf(n.timestampValue,e.timestampValue);case 4:return Tf(xo(n),xo(e));case 5:return pt(n.stringValue,e.stringValue);case 6:return function(s,u){const h=es(s),d=es(u);return h.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const h=s.split("/"),d=u.split("/");for(let m=0;m<h.length&&m<d.length;m++){const y=pt(h[m],d[m]);if(y!==0)return y}return pt(h.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const h=pt(Ht(s.latitude),Ht(u.latitude));return h!==0?h:pt(Ht(s.longitude),Ht(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return wf(n.arrayValue,e.arrayValue);case 10:return function(s,u){var h,d,m,y;const R=s.fields||{},N=u.fields||{},U=(h=R.value)===null||h===void 0?void 0:h.arrayValue,L=(d=N.value)===null||d===void 0?void 0:d.arrayValue,O=pt(((m=U==null?void 0:U.values)===null||m===void 0?void 0:m.length)||0,((y=L==null?void 0:L.values)===null||y===void 0?void 0:y.length)||0);return O!==0?O:wf(U,L)}(n.mapValue,e.mapValue);case 11:return function(s,u){if(s===Oa.mapValue&&u===Oa.mapValue)return 0;if(s===Oa.mapValue)return 1;if(u===Oa.mapValue)return-1;const h=s.fields||{},d=Object.keys(h),m=u.fields||{},y=Object.keys(m);d.sort(),y.sort();for(let R=0;R<d.length&&R<y.length;++R){const N=pt(d[R],y[R]);if(N!==0)return N;const U=Fs(h[d[R]],m[y[R]]);if(U!==0)return U}return pt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw qe()}}function Tf(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pt(n,e);const t=Ti(n),r=Ti(e),i=pt(t.seconds,r.seconds);return i!==0?i:pt(t.nanos,r.nanos)}function wf(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=Fs(t[i],r[i]);if(s)return s}return pt(t.length,r.length)}function Us(n){return Ql(n)}function Ql(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Ti(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return es(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Le.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Ql(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const u of r)s?s=!1:i+=",",i+=`${u}:${Ql(t.fields[u])}`;return i+"}"}(n.mapValue):qe()}function Xl(n){return!!n&&"integerValue"in n}function jc(n){return!!n&&"arrayValue"in n}function bf(n){return!!n&&"nullValue"in n}function If(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function za(n){return!!n&&"mapValue"in n}function RT(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function bo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ys(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bo(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function PT(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!za(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bo(t)}setAll(e){let t=ln.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const d=this.getFieldsMap(t);this.applyChanges(d,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=bo(u):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());za(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];za(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ys(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Kn(bo(this.value))}}function kp(n){const e=[];return Ys(n.fields,(t,r)=>{const i=new ln([t]);if(za(r)){const s=kp(r.mapValue).fields;if(s.length===0)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new rr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,r,i,s,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=u,this.documentState=h}static newInvalidDocument(e){return new vn(e,0,Ke.min(),Ke.min(),Ke.min(),Kn.empty(),0)}static newFoundDocument(e,t,r,i){return new vn(e,1,t,Ke.min(),r,i,0)}static newNoDocument(e,t){return new vn(e,2,t,Ke.min(),Ke.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Ke.min(),Ke.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,t){this.position=e,this.inclusive=t}}function Af(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(s.field.isKeyField()?r=Le.comparator(Le.fromName(u.referenceValue),t.key):r=Fs(u,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cf(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ir(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,t="asc"){this.field=e,this.dir=t}}function DT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{}class Qt extends Np{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new NT(e,t,r):t==="array-contains"?new LT(e,r):t==="in"?new MT(e,r):t==="not-in"?new VT(e,r):t==="array-contains-any"?new FT(e,r):new Qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new OT(e,r):new xT(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Fs(t,this.value)):t!==null&&ts(this.value)===ts(t)&&this.matchesComparison(Fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return qe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends Np{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Ar(e,t)}matches(e){return Op(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Op(n){return n.op==="and"}function xp(n){return kT(n)&&Op(n)}function kT(n){for(const e of n.filters)if(e instanceof Ar)return!1;return!0}function Jl(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+Us(n.value);if(xp(n))return n.filters.map(e=>Jl(e)).join(",");{const e=n.filters.map(t=>Jl(t)).join(",");return`${n.op}(${e})`}}function Lp(n,e){return n instanceof Qt?function(r,i){return i instanceof Qt&&r.op===i.op&&r.field.isEqual(i.field)&&Ir(r.value,i.value)}(n,e):n instanceof Ar?function(r,i){return i instanceof Ar&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,u,h)=>s&&Lp(u,i.filters[h]),!0):!1}(n,e):void qe()}function Mp(n){return n instanceof Qt?function(t){return`${t.field.canonicalString()} ${t.op} ${Us(t.value)}`}(n):n instanceof Ar?function(t){return t.op.toString()+" {"+t.getFilters().map(Mp).join(" ,")+"}"}(n):"Filter"}class NT extends Qt{constructor(e,t,r){super(e,t,r),this.key=Le.fromName(r.referenceValue)}matches(e){const t=Le.comparator(e.key,this.key);return this.matchesComparison(t)}}class OT extends Qt{constructor(e,t){super(e,"in",t),this.keys=Vp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xT extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=Vp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vp(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Le.fromName(r.referenceValue))}class LT extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return jc(t)&&Mo(t.arrayValue,this.value)}}class MT extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Mo(this.value.arrayValue,t)}}class VT extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Mo(this.value.arrayValue,t)}}class FT extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!jc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t=null,r=[],i=[],s=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=h,this.ue=null}}function Sf(n,e=null,t=[],r=[],i=null,s=null,u=null){return new UT(n,e,t,r,i,s,u)}function Bc(n){const e=Ye(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Jl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Pu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Us(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Us(r)).join(",")),e.ue=t}return e.ue}function Hc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!DT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Lp(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cf(n.startAt,e.startAt)&&Cf(n.endAt,e.endAt)}function Zl(n){return Le.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t=null,r=[],i=[],s=null,u="F",h=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jT(n,e,t,r,i,s,u,h){return new Du(n,e,t,r,i,s,u,h)}function Fp(n){return new Du(n)}function Rf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BT(n){return n.collectionGroup!==null}function Io(n){const e=Ye(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new cn(ln.comparator);return u.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new fu(s,r))}),t.has(ln.keyField().canonicalString())||e.ce.push(new fu(ln.keyField(),r))}return e.ce}function Tr(n){const e=Ye(n);return e.le||(e.le=HT(e,Io(n))),e.le}function HT(n,e){if(n.limitType==="F")return Sf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new fu(i.field,s)});const t=n.endAt?new hu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hu(n.startAt.position,n.startAt.inclusive):null;return Sf(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ec(n,e,t){return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ku(n,e){return Hc(Tr(n),Tr(e))&&n.limitType===e.limitType}function Up(n){return`${Bc(Tr(n))}|lt:${n.limitType}`}function Ts(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Mp(i)).join(", ")}]`),Pu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Us(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Us(i)).join(",")),`Target(${r})`}(Tr(n))}; limitType=${n.limitType})`}function Nu(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Io(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(u,h,d){const m=Af(u,h,d);return u.inclusive?m<=0:m<0}(r.startAt,Io(r),i)||r.endAt&&!function(u,h,d){const m=Af(u,h,d);return u.inclusive?m>=0:m>0}(r.endAt,Io(r),i))}(n,e)}function qT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jp(n){return(e,t)=>{let r=!1;for(const i of Io(n)){const s=$T(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $T(n,e,t){const r=n.field.isKeyField()?Le.comparator(e.key,t.key):function(s,u,h){const d=u.data.field(s),m=h.data.field(s);return d!==null&&m!==null?Fs(d,m):qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return qe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ys(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Pp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT=new Ot(Le.comparator);function Qr(){return WT}const Bp=new Ot(Le.comparator);function Eo(...n){let e=Bp;for(const t of n)e=e.insert(t.key,t);return e}function Hp(n){let e=Bp;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Gi(){return Ao()}function qp(){return Ao()}function Ao(){return new Qs(n=>n.toString(),(n,e)=>n.isEqual(e))}const GT=new Ot(Le.comparator),zT=new cn(Le.comparator);function ut(...n){let e=zT;for(const t of n)e=e.add(t);return e}const KT=new cn(pt);function YT(){return KT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cu(e)?"-0":e}}function $p(n){return{integerValue:""+n}}function QT(n,e){return AT(e)?$p(e):qc(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this._=void 0}}function XT(n,e,t){return n instanceof du?function(i,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Fc(s)&&(s=Uc(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Vo?Gp(n,e):n instanceof Fo?zp(n,e):function(i,s){const u=Wp(i,s),h=Pf(u)+Pf(i.Pe);return Xl(u)&&Xl(i.Pe)?$p(h):qc(i.serializer,h)}(n,e)}function JT(n,e,t){return n instanceof Vo?Gp(n,e):n instanceof Fo?zp(n,e):t}function Wp(n,e){return n instanceof pu?function(r){return Xl(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class du extends Ou{}class Vo extends Ou{constructor(e){super(),this.elements=e}}function Gp(n,e){const t=Kp(e);for(const r of n.elements)t.some(i=>Ir(i,r))||t.push(r);return{arrayValue:{values:t}}}class Fo extends Ou{constructor(e){super(),this.elements=e}}function zp(n,e){let t=Kp(e);for(const r of n.elements)t=t.filter(i=>!Ir(i,r));return{arrayValue:{values:t}}}class pu extends Ou{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Pf(n){return Ht(n.integerValue||n.doubleValue)}function Kp(n){return jc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ZT(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Vo&&i instanceof Vo||r instanceof Fo&&i instanceof Fo?Vs(r.elements,i.elements,Ir):r instanceof pu&&i instanceof pu?Ir(r.Pe,i.Pe):r instanceof du&&i instanceof du}(n.transform,e.transform)}class ew{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ka(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class xu{}function Yp(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Xp(n.key,wr.none()):new na(n.key,n.data,wr.none());{const t=n.data,r=Kn.empty();let i=new cn(ln.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);u===null&&s.length>1&&(s=s.popLast(),u=t.field(s)),u===null?r.delete(s):r.set(s,u),i=i.add(s)}return new os(n.key,r,new rr(i.toArray()),wr.none())}}function tw(n,e,t){n instanceof na?function(i,s,u){const h=i.value.clone(),d=kf(i.fieldTransforms,s,u.transformResults);h.setAll(d),s.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof os?function(i,s,u){if(!Ka(i.precondition,s))return void s.convertToUnknownDocument(u.version);const h=kf(i.fieldTransforms,s,u.transformResults),d=s.data;d.setAll(Qp(i)),d.setAll(h),s.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):function(i,s,u){s.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Co(n,e,t,r){return n instanceof na?function(s,u,h,d){if(!Ka(s.precondition,u))return h;const m=s.value.clone(),y=Nf(s.fieldTransforms,d,u);return m.setAll(y),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof os?function(s,u,h,d){if(!Ka(s.precondition,u))return h;const m=Nf(s.fieldTransforms,d,u),y=u.data;return y.setAll(Qp(s)),y.setAll(m),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),h===null?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(R=>R.field))}(n,e,t,r):function(s,u,h){return Ka(s.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function nw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=Wp(r.transform,i||null);s!=null&&(t===null&&(t=Kn.empty()),t.set(r.field,s))}return t||null}function Df(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vs(r,i,(s,u)=>ZT(s,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class na extends xu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class os extends xu{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Qp(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kf(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,h=e.data.field(s.field);r.set(s.field,JT(u,h,t[i]))}return r}function Nf(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,XT(s,u,e))}return r}class Xp extends xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rw extends xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&tw(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Co(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Co(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=qp();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let h=this.applyToLocalView(u,s.mutatedFields);h=t.has(i.key)?null:h;const d=Yp(u,h);d!==null&&r.set(i.key,d),u.isValidDocument()||u.convertToNoDocument(Ke.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ut())}isEqual(e){return this.batchId===e.batchId&&Vs(this.mutations,e.mutations,(t,r)=>Df(t,r))&&Vs(this.baseMutations,e.baseMutations,(t,r)=>Df(t,r))}}class $c{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=function(){return GT}();const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new $c(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,dt;function aw(n){switch(n){default:return qe();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function Jp(n){if(n===void 0)return Yr("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Gt.OK:return ae.OK;case Gt.CANCELLED:return ae.CANCELLED;case Gt.UNKNOWN:return ae.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ae.INTERNAL;case Gt.UNAVAILABLE:return ae.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ae.NOT_FOUND;case Gt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Gt.ABORTED:return ae.ABORTED;case Gt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Gt.DATA_LOSS:return ae.DATA_LOSS;default:return qe()}}(dt=Gt||(Gt={}))[dt.OK=0]="OK",dt[dt.CANCELLED=1]="CANCELLED",dt[dt.UNKNOWN=2]="UNKNOWN",dt[dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dt[dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dt[dt.NOT_FOUND=5]="NOT_FOUND",dt[dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",dt[dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",dt[dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",dt[dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dt[dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dt[dt.ABORTED=10]="ABORTED",dt[dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",dt[dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",dt[dt.INTERNAL=13]="INTERNAL",dt[dt.UNAVAILABLE=14]="UNAVAILABLE",dt[dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new zi([4294967295,4294967295],0);function Of(n){const e=uw().encode(n),t=new Tp;return t.update(e),new Uint8Array(t.digest())}function xf(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zi([t,r],0),new zi([i,s],0)]}class Wc{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new To(`Invalid padding: ${t}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new To(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=zi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(zi.fromNumber(r)));return i.compare(lw)===1&&(i=new zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Of(e),[r,i]=xf(t);for(let s=0;s<this.hashCount;s++){const u=this.Ee(r,i,s);if(!this.de(u))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),u=new Wc(s,i,t);return r.forEach(h=>u.insert(h)),u}insert(e){if(this.Ie===0)return;const t=Of(e),[r,i]=xf(t);for(let s=0;s<this.hashCount;s++){const u=this.Ee(r,i,s);this.Ae(u)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class To extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,ra.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Lu(Ke.min(),i,new Ot(pt),Qr(),ut())}}class ra{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ra(r,t,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class Zp{constructor(e,t){this.targetId=e,this.me=t}}class eg{constructor(e,t,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Lf{constructor(){this.fe=0,this.ge=Vf(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ut(),t=ut(),r=ut();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:qe()}}),new ra(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Vf()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,wt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cw{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qr(),this.qe=Mf(),this.Qe=new Ot(pt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(Zl(s))if(r===0){const u=new Le(s.path);this.Ue(t,u,vn.newNoDocument(u,Ke.min()))}else wt(r===1);else{const u=this.Ye(t);if(u!==r){const h=this.Ze(e),d=h?this.Xe(h,e,u):1;if(d!==0){this.je(t);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let u,h;try{u=es(r).toUint8Array()}catch(d){if(d instanceof Dp)return Ms("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new Wc(u,i,s)}catch(d){return Ms(d instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const u=this.Le.tt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${s.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,u)=>{const h=this.Je(u);if(h){if(s.current&&Zl(h.target)){const d=new Le(h.target.path);this.ke.get(d)!==null||this.it(u,d)||this.Ue(u,d,vn.newNoDocument(d,e))}s.be&&(t.set(u,s.ve()),s.Ce())}});let r=ut();this.qe.forEach((s,u)=>{let h=!0;u.forEachWhile(d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(s))}),this.ke.forEach((s,u)=>u.setReadTime(e));const i=new Lu(e,t,this.Qe,this.ke,r);return this.ke=Qr(),this.qe=Mf(),this.Qe=new Ot(pt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Lf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new cn(pt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Lf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Mf(){return new Ot(Le.comparator)}function Vf(){return new Ot(Le.comparator)}const hw={asc:"ASCENDING",desc:"DESCENDING"},fw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dw={and:"AND",or:"OR"};class pw{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function tc(n,e){return n.useProto3Json||Pu(e)?e:{value:e}}function gu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tg(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gw(n,e){return gu(n,e.toTimestamp())}function br(n){return wt(!!n),Ke.fromTimestamp(function(t){const r=Ti(t);return new Jt(r.seconds,r.nanos)}(n))}function Gc(n,e){return nc(n,e).canonicalString()}function nc(n,e){const t=function(i){return new Nt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function ng(n){const e=Nt.fromString(n);return wt(ag(e)),e}function rc(n,e){return Gc(n.databaseId,e.path)}function bl(n,e){const t=ng(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Le(ig(t))}function rg(n,e){return Gc(n.databaseId,e)}function mw(n){const e=ng(n);return e.length===4?Nt.emptyPath():ig(e)}function ic(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ig(n){return wt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ff(n,e,t){return{name:rc(n,e),fields:t.value.mapValue.fields}}function vw(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:qe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(m,y){return m.useProto3Json?(wt(y===void 0||typeof y=="string"),hn.fromBase64String(y||"")):(wt(y===void 0||y instanceof Buffer||y instanceof Uint8Array),hn.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const y=m.code===void 0?ae.UNKNOWN:Jp(m.code);return new Oe(y,m.message||"")}(u);t=new eg(r,i,s,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=bl(n,r.document.name),s=br(r.document.updateTime),u=r.document.createTime?br(r.document.createTime):Ke.min(),h=new Kn({mapValue:{fields:r.document.fields}}),d=vn.newFoundDocument(i,s,u,h),m=r.targetIds||[],y=r.removedTargetIds||[];t=new Ya(m,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=bl(n,r.document),s=r.readTime?br(r.readTime):Ke.min(),u=vn.newNoDocument(i,s),h=r.removedTargetIds||[];t=new Ya([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=bl(n,r.document),s=r.removedTargetIds||[];t=new Ya([],s,i,null)}else{if(!("filter"in e))return qe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,u=new ow(i,s),h=r.targetId;t=new Zp(h,u)}}return t}function yw(n,e){let t;if(e instanceof na)t={update:Ff(n,e.key,e.value)};else if(e instanceof Xp)t={delete:rc(n,e.key)};else if(e instanceof os)t={update:Ff(n,e.key,e.data),updateMask:Sw(e.fieldMask)};else{if(!(e instanceof rw))return qe();t={verify:rc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const h=u.transform;if(h instanceof du)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Vo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Fo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof pu)return{fieldPath:u.field.canonicalString(),increment:h.Pe};throw qe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:gw(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:qe()}(n,e.precondition)),t}function _w(n,e){return n&&n.length>0?(wt(e!==void 0),n.map(t=>function(i,s){let u=i.updateTime?br(i.updateTime):br(s);return u.isEqual(Ke.min())&&(u=br(s)),new ew(u,i.transformResults||[])}(t,e))):[]}function Ew(n,e){return{documents:[rg(n,e.path)]}}function Tw(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rg(n,i);const s=function(m){if(m.length!==0)return og(Ar.create(m,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(m){if(m.length!==0)return m.map(y=>function(N){return{field:ws(N.field),direction:Iw(N.dir)}}(y))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=tc(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:i}}function ww(n){let e=mw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(r===1);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let s=[];t.where&&(s=function(R){const N=sg(R);return N instanceof Ar&&xp(N)?N.getFilters():[N]}(t.where));let u=[];t.orderBy&&(u=function(R){return R.map(N=>function(L){return new fu(bs(L.field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(N))}(t.orderBy));let h=null;t.limit&&(h=function(R){let N;return N=typeof R=="object"?R.value:R,Pu(N)?null:N}(t.limit));let d=null;t.startAt&&(d=function(R){const N=!!R.before,U=R.values||[];return new hu(U,N)}(t.startAt));let m=null;return t.endAt&&(m=function(R){const N=!R.before,U=R.values||[];return new hu(U,N)}(t.endAt)),jT(e,i,u,s,h,"F",d,m)}function bw(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sg(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=bs(t.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bs(t.unaryFilter.field);return Qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=bs(t.unaryFilter.field);return Qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bs(t.unaryFilter.field);return Qt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return qe()}}(n):n.fieldFilter!==void 0?function(t){return Qt.create(bs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return qe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ar.create(t.compositeFilter.filters.map(r=>sg(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return qe()}}(t.compositeFilter.op))}(n):qe()}function Iw(n){return hw[n]}function Aw(n){return fw[n]}function Cw(n){return dw[n]}function ws(n){return{fieldPath:n.canonicalString()}}function bs(n){return ln.fromServerFormat(n.fieldPath)}function og(n){return n instanceof Qt?function(t){if(t.op==="=="){if(If(t.value))return{unaryFilter:{field:ws(t.field),op:"IS_NAN"}};if(bf(t.value))return{unaryFilter:{field:ws(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(If(t.value))return{unaryFilter:{field:ws(t.field),op:"IS_NOT_NAN"}};if(bf(t.value))return{unaryFilter:{field:ws(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(t.field),op:Aw(t.op),value:t.value}}}(n):n instanceof Ar?function(t){const r=t.getFilters().map(i=>og(i));return r.length===1?r[0]:{compositeFilter:{op:Cw(t.op),filters:r}}}(n):qe()}function Sw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ag(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,r,i,s=Ke.min(),u=Ke.min(),h=hn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.ct=e}}function Pw(n){const e=ww({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ec(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.un=new kw}addToCollectionParentIndex(e,t){return this.un.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Ei.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class kw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new cn(Nt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new js(0)}static kn(){return new js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.changes=new Qs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Co(r.mutation,i,rr.empty(),Jt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ut()){const i=Gi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=Eo();return s.forEach((h,d)=>{u=u.insert(h,d.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Gi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ut()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let s=Qr();const u=Ao(),h=function(){return Ao()}();return t.forEach((d,m)=>{const y=r.get(m.key);i.has(m.key)&&(y===void 0||y.mutation instanceof os)?s=s.insert(m.key,m):y!==void 0?(u.set(m.key,y.mutation.getFieldMask()),Co(y.mutation,m,y.mutation.getFieldMask(),Jt.now())):u.set(m.key,rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(d=>(d.forEach((m,y)=>u.set(m,y)),t.forEach((m,y)=>{var R;return h.set(m,new Ow(y,(R=u.get(m))!==null&&R!==void 0?R:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Ao();let i=new Ot((u,h)=>u-h),s=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(d=>{const m=t.get(d);if(m===null)return;let y=r.get(d)||rr.empty();y=h.applyToLocalView(m,y),r.set(d,y);const R=(i.get(h.batchId)||ut()).add(d);i=i.insert(h.batchId,R)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,y=d.value,R=qp();y.forEach(N=>{if(!s.has(N)){const U=Yp(t.get(N),r.get(N));U!==null&&R.set(N,U),s=s.add(N)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,R))}return oe.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(u){return Le.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):oe.resolve(Gi());let h=-1,d=s;return u.next(m=>oe.forEach(m,(y,R)=>(h<R.largestBatchId&&(h=R.largestBatchId),s.get(y)?oe.resolve():this.remoteDocumentCache.getEntry(e,y).next(N=>{d=d.insert(y,N)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,d,m,ut())).next(y=>({batchId:h,changes:Hp(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Le(t)).next(r=>{let i=Eo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let u=Eo();return this.indexManager.getCollectionParents(e,s).next(h=>oe.forEach(h,d=>{const m=function(R,N){return new Du(N,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(t,d.child(s));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(y=>{y.forEach((R,N)=>{u=u.insert(R,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(u=>{s.forEach((d,m)=>{const y=m.getKey();u.get(y)===null&&(u=u.insert(y,vn.newInvalidDocument(y)))});let h=Eo();return u.forEach((d,m)=>{const y=s.get(d);y!==void 0&&Co(y.mutation,m,rr.empty(),Jt.now()),Nu(t,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return oe.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:br(i.createTime)}}(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Pw(i.bundledQuery),readTime:br(i.readTime)}}(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(){this.overlays=new Ot(Le.comparator),this.Ir=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Gi();return oe.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Gi(),s=t.length+1,u=new Le(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===s&&d.largestBatchId>r&&i.set(d.getKey(),d)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ot((m,y)=>m-y);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let y=s.get(m.largestBatchId);y===null&&(y=Gi(),s=s.insert(m.largestBatchId,y)),y.set(m.getKey(),m)}}const h=Gi(),d=s.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,y)=>h.set(m,y)),!(h.size()>=i)););return oe.resolve(h)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const u=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new sw(t,r));let s=this.Ir.get(t);s===void 0&&(s=ut(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){this.Tr=new cn(nn.Er),this.dr=new cn(nn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new nn(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new nn(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new Le(new Nt([])),r=new nn(t,e),i=new nn(t,e+1),s=[];return this.dr.forEachInRange([r,i],u=>{this.Vr(u),s.push(u.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Le(new Nt([])),r=new nn(t,e),i=new nn(t,e+1);let s=ut();return this.dr.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new nn(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class nn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Le.comparator(e.key,t.key)||pt(e.wr,t.wr)}static Ar(e,t){return pt(e.wr,t.wr)||Le.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new cn(nn.Er)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new iw(s,t,r,i);this.mutationQueue.push(u);for(const h of i)this.br=this.br.add(new nn(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return oe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new nn(t,0),i=new nn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],u=>{const h=this.Dr(u.wr);s.push(h)}),oe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new cn(pt);return t.forEach(i=>{const s=new nn(i,0),u=new nn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,u],h=>{r=r.add(h.wr)})}),oe.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Le.isDocumentKey(s)||(s=s.child(""));const u=new nn(new Le(s),0);let h=new cn(pt);return this.br.forEachWhile(d=>{const m=d.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(d.wr)),!0)},u),oe.resolve(this.Cr(h))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){wt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return oe.forEach(t.mutations,i=>{const s=new nn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new nn(t,0),i=this.br.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(e){this.Mr=e,this.docs=function(){return new Ot(Le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let r=Qr();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vn.newInvalidDocument(i))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Qr();const u=t.path,h=new Le(u.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:y}}=d.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||TT(ET(y),r)<=0||(i.has(y.key)||Nu(t,y))&&(s=s.insert(y.key,y.mutableCopy()))}return oe.resolve(s)}getAllFromCollectionGroup(e,t,r,i){qe()}Or(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new jw(this)}getSize(e){return oe.resolve(this.size)}}class jw extends Nw{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.persistence=e,this.Nr=new Qs(t=>Bc(t),Hc),this.lastRemoteSnapshotVersion=Ke.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zc,this.targetCount=0,this.kr=js.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),oe.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new js(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Kn(t),oe.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((u,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(u),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),oe.waitFor(s).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),oe.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Vc(0),this.Kr=!1,this.Kr=!0,this.$r=new Vw,this.referenceDelegate=e(this),this.Ur=new Bw(this),this.indexManager=new Dw,this.remoteDocumentCache=function(i){return new Uw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Rw(t),this.Gr=new Lw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Mw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Fw(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const i=new qw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return oe.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class qw extends bT{constructor(e){super(),this.currentSequenceNumber=e}}class Kc{constructor(e){this.persistence=e,this.Jr=new zc,this.Yr=null}static Zr(e){return new Kc(e)}get Xr(){if(this.Yr)return this.Yr;throw qe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Xr,r=>{const i=Le.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Ke.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return oe.or([()=>oe.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ut(),i=ut();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Yc(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fv()?8:IT(yn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(u=>{s.result=u}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(u=>{s.result=u})}).next(()=>{if(s.result)return;const u=new $w;return this.Xi(e,t,u).next(h=>{if(s.result=h,this.zi)return this.es(e,t,u,h.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(go()<=ft.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Ts(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),oe.resolve()):(go()<=ft.DEBUG&&Re("QueryEngine","Query:",Ts(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(go()<=ft.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Ts(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tr(t))):oe.resolve())}Yi(e,t){if(Rf(t))return oe.resolve(null);let r=Tr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ec(t,null,"F"),r=Tr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=ut(...s);return this.Ji.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(d=>{const m=this.ts(t,h);return this.ns(t,m,u,d.readTime)?this.Yi(e,ec(t,null,"F")):this.rs(e,m,t,d)}))})))}Zi(e,t,r,i){return Rf(t)||i.isEqual(Ke.min())?oe.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const u=this.ts(t,s);return this.ns(t,u,r,i)?oe.resolve(null):(go()<=ft.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ts(t)),this.rs(e,u,t,_T(i,-1)).next(h=>h))})}ts(e,t){let r=new cn(jp(e));return t.forEach((i,s)=>{Nu(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return go()<=ft.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Ts(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ei.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ot(pt),this._s=new Qs(s=>Bc(s),Hc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function zw(n,e,t,r){return new Gw(n,e,t,r)}async function ug(n,e){const t=Ye(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],h=[];let d=ut();for(const m of i){u.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}for(const m of s){h.push(m.batchId);for(const y of m.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(r,d).next(m=>({hs:m,removedBatchIds:u,addedBatchIds:h}))})})}function Kw(n,e){const t=Ye(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,m,y){const R=m.batch,N=R.keys();let U=oe.resolve();return N.forEach(L=>{U=U.next(()=>y.getEntry(d,L)).next(O=>{const q=m.docVersions.get(L);wt(q!==null),O.version.compareTo(q)<0&&(R.applyToRemoteDocument(O,m),O.isValidDocument()&&(O.setReadTime(m.commitVersion),y.addEntry(O)))})}),U.next(()=>h.mutationQueue.removeMutationBatch(d,R))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let d=ut();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function lg(n){const e=Ye(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Yw(n,e){const t=Ye(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const h=[];e.targetChanges.forEach((y,R)=>{const N=i.get(R);if(!N)return;h.push(t.Ur.removeMatchingKeys(s,y.removedDocuments,R).next(()=>t.Ur.addMatchingKeys(s,y.addedDocuments,R)));let U=N.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(R)!==null?U=U.withResumeToken(hn.EMPTY_BYTE_STRING,Ke.min()).withLastLimboFreeSnapshotVersion(Ke.min()):y.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(y.resumeToken,r)),i=i.insert(R,U),function(O,q,$){return O.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0}(N,U,y)&&h.push(t.Ur.updateTargetData(s,U))});let d=Qr(),m=ut();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(Qw(s,u,e.documentUpdates).next(y=>{d=y.Ps,m=y.Is})),!r.isEqual(Ke.min())){const y=t.Ur.getLastRemoteSnapshotVersion(s).next(R=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(y)}return oe.waitFor(h).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,d,m)).next(()=>d)}).then(s=>(t.os=i,s))}function Qw(n,e,t){let r=ut(),i=ut();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=Qr();return t.forEach((h,d)=>{const m=s.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),d.isNoDocument()&&d.version.isEqual(Ke.min())?(e.removeEntry(h,d.readTime),u=u.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),u=u.insert(h,d)):Re("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ps:u,Is:i}})}function Xw(n,e){const t=Ye(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Jw(n,e){const t=Ye(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,oe.resolve(i)):t.Ur.allocateTargetId(r).next(u=>(i=new di(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function sc(n,e,t){const r=Ye(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i))}catch(u){if(!ta(u))throw u;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Uf(n,e,t){const r=Ye(n);let i=Ke.min(),s=ut();return r.persistence.runTransaction("Execute query","readwrite",u=>function(d,m,y){const R=Ye(d),N=R._s.get(y);return N!==void 0?oe.resolve(R.os.get(N)):R.Ur.getTargetData(m,y)}(r,u,Tr(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(u,h.targetId).next(d=>{s=d})}).next(()=>r.ss.getDocumentsMatchingQuery(u,e,t?i:Ke.min(),t?s:ut())).next(h=>(Zw(r,qT(e),h),{documents:h,Ts:s})))}function Zw(n,e,t){let r=n.us.get(e)||Ke.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}class jf{constructor(){this.activeTargetIds=YT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eb{constructor(){this.so=new jf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new jf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xa=null;function Il(){return xa===null?xa=function(){return 268435456+Math.round(2147483648*Math.random())}():xa++,"0x"+xa.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class ib extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,u){const h=Il(),d=this.xo(t,r.toUriEncodedString());Re("RestConnection",`Sending RPC '${t}' ${h}:`,d,i);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,s,u),this.No(t,d,m,i).then(y=>(Re("RestConnection",`Received RPC '${t}' ${h}: `,y),y),y=>{throw Ms("RestConnection",`RPC '${t}' ${h} failed with error: `,y,"url: ",d,"request:",i),y})}Lo(t,r,i,s,u,h){return this.Mo(t,r,i,s,u)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ks}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,u)=>t[u]=s),i&&i.headers.forEach((s,u)=>t[u]=s)}xo(t,r){const i=nb[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=Il();return new Promise((u,h)=>{const d=new wp;d.setWithCredentials(!0),d.listenOnce(bp.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ga.NO_ERROR:const y=d.getResponseJson();Re(pn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(y)),u(y);break;case Ga.TIMEOUT:Re(pn,`RPC '${e}' ${s} timed out`),h(new Oe(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Ga.HTTP_ERROR:const R=d.getStatus();if(Re(pn,`RPC '${e}' ${s} failed with status:`,R,"response text:",d.getResponseText()),R>0){let N=d.getResponseJson();Array.isArray(N)&&(N=N[0]);const U=N==null?void 0:N.error;if(U&&U.status&&U.message){const L=function(q){const $=q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf($)>=0?$:ae.UNKNOWN}(U.status);h(new Oe(L,U.message))}else h(new Oe(ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new Oe(ae.UNAVAILABLE,"Connection failed."));break;default:qe()}}finally{Re(pn,`RPC '${e}' ${s} completed.`)}});const m=JSON.stringify(i);Re(pn,`RPC '${e}' ${s} sending request:`,i),d.send(t,"POST",m,r,15)})}Bo(e,t,r){const i=Il(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Cp(),h=Ap(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const y=s.join("");Re(pn,`Creating RPC '${e}' stream ${i}: ${y}`,d);const R=u.createWebChannel(y,d);let N=!1,U=!1;const L=new rb({Io:q=>{U?Re(pn,`Not sending because RPC '${e}' stream ${i} is closed:`,q):(N||(Re(pn,`Opening RPC '${e}' stream ${i} transport.`),R.open(),N=!0),Re(pn,`RPC '${e}' stream ${i} sending:`,q),R.send(q))},To:()=>R.close()}),O=(q,$,Q)=>{q.listen($,X=>{try{Q(X)}catch(ee){setTimeout(()=>{throw ee},0)}})};return O(R,_o.EventType.OPEN,()=>{U||(Re(pn,`RPC '${e}' stream ${i} transport opened.`),L.yo())}),O(R,_o.EventType.CLOSE,()=>{U||(U=!0,Re(pn,`RPC '${e}' stream ${i} transport closed`),L.So())}),O(R,_o.EventType.ERROR,q=>{U||(U=!0,Ms(pn,`RPC '${e}' stream ${i} transport errored:`,q),L.So(new Oe(ae.UNAVAILABLE,"The operation could not be completed")))}),O(R,_o.EventType.MESSAGE,q=>{var $;if(!U){const Q=q.data[0];wt(!!Q);const X=Q,ee=X.error||(($=X[0])===null||$===void 0?void 0:$.error);if(ee){Re(pn,`RPC '${e}' stream ${i} received error:`,ee);const ie=ee.status;let re=function(T){const I=Gt[T];if(I!==void 0)return Jp(I)}(ie),c=ee.message;re===void 0&&(re=ae.INTERNAL,c="Unknown error status: "+ie+" with message "+ee.message),U=!0,L.So(new Oe(re,c)),R.close()}else Re(pn,`RPC '${e}' stream ${i} received:`,Q),L.bo(Q)}}),O(h,Ip.STAT_EVENT,q=>{q.stat===Yl.PROXY?Re(pn,`RPC '${e}' stream ${i} detected buffering proxy`):q.stat===Yl.NOPROXY&&Re(pn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}}function Al(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n){return new pw(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e,t,r,i,s,u,h,d){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cg(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Yr(t.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Oe(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sb extends hg{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=vw(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ke.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Ke.min():u.readTime?br(u.readTime):Ke.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=ic(this.serializer),t.addTarget=function(s,u){let h;const d=u.target;if(h=Zl(d)?{documents:Ew(s,d)}:{query:Tw(s,d)._t},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=tg(s,u.resumeToken);const m=tc(s,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ke.min())>0){h.readTime=gu(s,u.snapshotVersion.toTimestamp());const m=tc(s,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const r=bw(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=ic(this.serializer),t.removeTarget=e,this.a_(t)}}class ob extends hg{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return wt(!!e.streamToken),this.lastStreamToken=e.streamToken,wt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=_w(e.writeResults,e.commitTime),r=br(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=ic(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yw(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Oe(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Mo(e,nc(t,r),i,s,u)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Oe(ae.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Lo(e,nc(t,r),i,u,h,s)).catch(u=>{throw u.name==="FirebaseError"?(u.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Oe(ae.UNKNOWN,u.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ub{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Yr(t),this.D_=!1):Re("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(u=>{r.enqueueAndForget(async()=>{as(this)&&(Re("RemoteStore","Restarting streams for network reachability change."),await async function(d){const m=Ye(d);m.L_.add(4),await ia(m),m.q_.set("Unknown"),m.L_.delete(4),await Vu(m)}(this))})}),this.q_=new ub(r,i)}}async function Vu(n){if(as(n))for(const e of n.B_)await e(!0)}async function ia(n){for(const e of n.B_)await e(!1)}function fg(n,e){const t=Ye(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Zc(t)?Jc(t):Xs(t).r_()&&Xc(t,e))}function Qc(n,e){const t=Ye(n),r=Xs(t);t.N_.delete(e),r.r_()&&dg(t,e),t.N_.size===0&&(r.r_()?r.o_():as(t)&&t.q_.set("Unknown"))}function Xc(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ke.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Xs(n).A_(e)}function dg(n,e){n.Q_.xe(e),Xs(n).R_(e)}function Jc(n){n.Q_=new cw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Xs(n).start(),n.q_.v_()}function Zc(n){return as(n)&&!Xs(n).n_()&&n.N_.size>0}function as(n){return Ye(n).L_.size===0}function pg(n){n.Q_=void 0}async function cb(n){n.q_.set("Online")}async function hb(n){n.N_.forEach((e,t)=>{Xc(n,e)})}async function fb(n,e){pg(n),Zc(n)?(n.q_.M_(e),Jc(n)):n.q_.set("Unknown")}async function db(n,e,t){if(n.q_.set("Online"),e instanceof eg&&e.state===2&&e.cause)try{await async function(i,s){const u=s.cause;for(const h of s.targetIds)i.N_.has(h)&&(await i.remoteSyncer.rejectListen(h,u),i.N_.delete(h),i.Q_.removeTarget(h))}(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mu(n,r)}else if(e instanceof Ya?n.Q_.Ke(e):e instanceof Zp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Ke.min()))try{const r=await lg(n.localStore);t.compareTo(r)>=0&&await function(s,u){const h=s.Q_.rt(u);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const y=s.N_.get(m);y&&s.N_.set(m,y.withResumeToken(d.resumeToken,u))}}),h.targetMismatches.forEach((d,m)=>{const y=s.N_.get(d);if(!y)return;s.N_.set(d,y.withResumeToken(hn.EMPTY_BYTE_STRING,y.snapshotVersion)),dg(s,d);const R=new di(y.target,d,m,y.sequenceNumber);Xc(s,R)}),s.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),await mu(n,r)}}async function mu(n,e,t){if(!ta(e))throw e;n.L_.add(1),await ia(n),n.q_.set("Offline"),t||(t=()=>lg(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Re("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Vu(n)})}function gg(n,e){return e().catch(t=>mu(n,t,e))}async function Fu(n){const e=Ye(n),t=wi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;pb(e);)try{const i=await Xw(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,gb(e,i)}catch(i){await mu(e,i)}mg(e)&&vg(e)}function pb(n){return as(n)&&n.O_.length<10}function gb(n,e){n.O_.push(e);const t=wi(n);t.r_()&&t.V_&&t.m_(e.mutations)}function mg(n){return as(n)&&!wi(n).n_()&&n.O_.length>0}function vg(n){wi(n).start()}async function mb(n){wi(n).p_()}async function vb(n){const e=wi(n);for(const t of n.O_)e.m_(t.mutations)}async function yb(n,e,t){const r=n.O_.shift(),i=$c.from(r,e,t);await gg(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Fu(n)}async function _b(n,e){e&&wi(n).V_&&await async function(r,i){if(function(u){return aw(u)&&u!==ae.ABORTED}(i.code)){const s=r.O_.shift();wi(r).s_(),await gg(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Fu(r)}}(n,e),mg(n)&&vg(n)}async function Hf(n,e){const t=Ye(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=as(t);t.L_.add(3),await ia(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Vu(t)}async function Eb(n,e){const t=Ye(n);e?(t.L_.delete(2),await Vu(t)):e||(t.L_.add(2),await ia(t),t.q_.set("Unknown"))}function Xs(n){return n.K_||(n.K_=function(t,r,i){const s=Ye(t);return s.w_(),new sb(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:cb.bind(null,n),Ro:hb.bind(null,n),mo:fb.bind(null,n),d_:db.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),Zc(n)?Jc(n):n.q_.set("Unknown")):(await n.K_.stop(),pg(n))})),n.K_}function wi(n){return n.U_||(n.U_=function(t,r,i){const s=Ye(t);return s.w_(),new ob(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mb.bind(null,n),mo:_b.bind(null,n),f_:vb.bind(null,n),g_:yb.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await Fu(n)):(await n.U_.stop(),n.O_.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,h=new eh(e,t,u,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function th(n,e){if(Yr("AsyncQueue",`${e}: ${n}`),ta(n))return new Oe(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Le.comparator(t.key,r.key):(t,r)=>Le.comparator(t.key,r.key),this.keyedMap=Eo(),this.sortedSet=new Ot(this.comparator)}static emptySet(e){return new Ds(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ds)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ds;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(){this.W_=new Ot(Le.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):qe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Bs{constructor(e,t,r,i,s,u,h,d,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Bs(e,t,Ds.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wb{constructor(){this.queries=$f(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=Ye(t),s=i.queries;i.queries=$f(),s.forEach((u,h)=>{for(const d of h.j_)d.onError(r)})})(this,new Oe(ae.ABORTED,"Firestore shutting down"))}}function $f(){return new Qs(n=>Up(n),ku)}async function bb(n,e){const t=Ye(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Tb,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(u){const h=th(u,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&nh(t)}async function Ib(n,e){const t=Ye(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const u=s.j_.indexOf(e);u>=0&&(s.j_.splice(u,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Ab(n,e){const t=Ye(n);let r=!1;for(const i of e){const s=i.query,u=t.queries.get(s);if(u){for(const h of u.j_)h.X_(i)&&(r=!0);u.z_=i}}r&&nh(t)}function Cb(n,e,t){const r=Ye(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function nh(n){n.Y_.forEach(e=>{e.next()})}var oc,Wf;(Wf=oc||(oc={})).ea="default",Wf.Cache="cache";class Sb{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==oc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(e){this.key=e}}class _g{constructor(e){this.key=e}}class Rb{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ut(),this.mutatedKeys=ut(),this.Aa=jp(e),this.Ra=new Ds(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new qf,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const d=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((y,R)=>{const N=i.get(y),U=Nu(this.query,R)?R:null,L=!!N&&this.mutatedKeys.has(N.key),O=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let q=!1;N&&U?N.data.isEqual(U.data)?L!==O&&(r.track({type:3,doc:U}),q=!0):this.ga(N,U)||(r.track({type:2,doc:U}),q=!0,(d&&this.Aa(U,d)>0||m&&this.Aa(U,m)<0)&&(h=!0)):!N&&U?(r.track({type:0,doc:U}),q=!0):N&&!U&&(r.track({type:1,doc:N}),q=!0,(d||m)&&(h=!0)),q&&(U?(u=u.add(U),s=O?s.add(y):s.delete(y)):(u=u.delete(y),s=s.delete(y)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),s=s.delete(y.key),r.track({type:1,doc:y})}return{Ra:u,fa:r,ns:h,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const u=e.fa.G_();u.sort((y,R)=>function(U,L){const O=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qe()}};return O(U)-O(L)}(y.type,R.type)||this.Aa(y.doc,R.doc)),this.pa(r),i=i!=null&&i;const h=t&&!i?this.ya():[],d=this.da.size===0&&this.current&&!i?1:0,m=d!==this.Ea;return this.Ea=d,u.length!==0||m?{snapshot:new Bs(this.query,e.Ra,s,u,e.mutatedKeys,d===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new qf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ut(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new _g(r))}),this.da.forEach(r=>{e.has(r)||t.push(new yg(r))}),t}ba(e){this.Ta=e.Ts,this.da=ut();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Bs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Pb{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Db{constructor(e){this.key=e,this.va=!1}}class kb{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.Ca={},this.Fa=new Qs(h=>Up(h),ku),this.Ma=new Map,this.xa=new Set,this.Oa=new Ot(Le.comparator),this.Na=new Map,this.La=new zc,this.Ba={},this.ka=new Map,this.qa=js.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Nb(n,e,t=!0){const r=Ag(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Eg(r,e,t,!0),i}async function Ob(n,e){const t=Ag(n);await Eg(t,e,!0,!1)}async function Eg(n,e,t,r){const i=await Jw(n.localStore,Tr(e)),s=i.targetId,u=n.sharedClientState.addLocalQueryTarget(s,t);let h;return r&&(h=await xb(n,e,s,u==="current",i.resumeToken)),n.isPrimaryClient&&t&&fg(n.remoteStore,i),h}async function xb(n,e,t,r,i){n.Ka=(R,N,U)=>async function(O,q,$,Q){let X=q.view.ma($);X.ns&&(X=await Uf(O.localStore,q.query,!1).then(({documents:c})=>q.view.ma(c,X)));const ee=Q&&Q.targetChanges.get(q.targetId),ie=Q&&Q.targetMismatches.get(q.targetId)!=null,re=q.view.applyChanges(X,O.isPrimaryClient,ee,ie);return zf(O,q.targetId,re.wa),re.snapshot}(n,R,N,U);const s=await Uf(n.localStore,e,!0),u=new Rb(e,s.Ts),h=u.ma(s.documents),d=ra.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=u.applyChanges(h,n.isPrimaryClient,d);zf(n,t,m.wa);const y=new Pb(e,t,u);return n.Fa.set(e,y),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot}async function Lb(n,e,t){const r=Ye(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(u=>!ku(u,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await sc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Qc(r.remoteStore,i.targetId),ac(r,i.targetId)}).catch(ea)):(ac(r,i.targetId),await sc(r.localStore,i.targetId,!0))}async function Mb(n,e){const t=Ye(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qc(t.remoteStore,r.targetId))}async function Vb(n,e,t){const r=$b(n);try{const i=await function(u,h){const d=Ye(u),m=Jt.now(),y=h.reduce((U,L)=>U.add(L.key),ut());let R,N;return d.persistence.runTransaction("Locally write mutations","readwrite",U=>{let L=Qr(),O=ut();return d.cs.getEntries(U,y).next(q=>{L=q,L.forEach(($,Q)=>{Q.isValidDocument()||(O=O.add($))})}).next(()=>d.localDocuments.getOverlayedDocuments(U,L)).next(q=>{R=q;const $=[];for(const Q of h){const X=nw(Q,R.get(Q.key).overlayedDocument);X!=null&&$.push(new os(Q.key,X,kp(X.value.mapValue),wr.exists(!0)))}return d.mutationQueue.addMutationBatch(U,m,$,h)}).next(q=>{N=q;const $=q.applyToLocalDocumentSet(R,O);return d.documentOverlayCache.saveOverlays(U,q.batchId,$)})}).then(()=>({batchId:N.batchId,changes:Hp(R)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,h,d){let m=u.Ba[u.currentUser.toKey()];m||(m=new Ot(pt)),m=m.insert(h,d),u.Ba[u.currentUser.toKey()]=m}(r,i.batchId,t),await sa(r,i.changes),await Fu(r.remoteStore)}catch(i){const s=th(i,"Failed to persist write");t.reject(s)}}async function Tg(n,e){const t=Ye(n);try{const r=await Yw(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.Na.get(s);u&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.va=!0:i.modifiedDocuments.size>0?wt(u.va):i.removedDocuments.size>0&&(wt(u.va),u.va=!1))}),await sa(t,r,e)}catch(r){await ea(r)}}function Gf(n,e,t){const r=Ye(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,u)=>{const h=u.view.Z_(e);h.snapshot&&i.push(h.snapshot)}),function(u,h){const d=Ye(u);d.onlineState=h;let m=!1;d.queries.forEach((y,R)=>{for(const N of R.j_)N.Z_(h)&&(m=!0)}),m&&nh(d)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Fb(n,e,t){const r=Ye(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let u=new Ot(Le.comparator);u=u.insert(s,vn.newNoDocument(s,Ke.min()));const h=ut().add(s),d=new Lu(Ke.min(),new Map,new Ot(pt),u,h);await Tg(r,d),r.Oa=r.Oa.remove(s),r.Na.delete(e),rh(r)}else await sc(r.localStore,e,!1).then(()=>ac(r,e,t)).catch(ea)}async function Ub(n,e){const t=Ye(n),r=e.batch.batchId;try{const i=await Kw(t.localStore,e);bg(t,r,null),wg(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await sa(t,i)}catch(i){await ea(i)}}async function jb(n,e,t){const r=Ye(n);try{const i=await function(u,h){const d=Ye(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return d.mutationQueue.lookupMutationBatch(m,h).next(R=>(wt(R!==null),y=R.keys(),d.mutationQueue.removeMutationBatch(m,R))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,y,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>d.localDocuments.getDocuments(m,y))})}(r.localStore,e);bg(r,e,t),wg(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await sa(r,i)}catch(i){await ea(i)}}function wg(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function bg(n,e,t){const r=Ye(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ac(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||Ig(n,r)})}function Ig(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(Qc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),rh(n))}function zf(n,e,t){for(const r of t)r instanceof yg?(n.La.addReference(r.key,e),Bb(n,r)):r instanceof _g?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||Ig(n,r.key)):qe()}function Bb(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.xa.add(r),rh(n))}function rh(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new Le(Nt.fromString(e)),r=n.qa.next();n.Na.set(r,new Db(t)),n.Oa=n.Oa.insert(t,r),fg(n.remoteStore,new di(Tr(Fp(t.path)),r,"TargetPurposeLimboResolution",Vc.oe))}}async function sa(n,e,t){const r=Ye(n),i=[],s=[],u=[];r.Fa.isEmpty()||(r.Fa.forEach((h,d)=>{u.push(r.Ka(d,e,t).then(m=>{var y;if((m||t)&&r.isPrimaryClient){const R=m?!m.fromCache:(y=t==null?void 0:t.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,R?"current":"not-current")}if(m){i.push(m);const R=Yc.Wi(d.targetId,m);s.push(R)}}))}),await Promise.all(u),r.Ca.d_(i),await async function(d,m){const y=Ye(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>oe.forEach(m,N=>oe.forEach(N.$i,U=>y.persistence.referenceDelegate.addReference(R,N.targetId,U)).next(()=>oe.forEach(N.Ui,U=>y.persistence.referenceDelegate.removeReference(R,N.targetId,U)))))}catch(R){if(!ta(R))throw R;Re("LocalStore","Failed to update sequence numbers: "+R)}for(const R of m){const N=R.targetId;if(!R.fromCache){const U=y.os.get(N),L=U.snapshotVersion,O=U.withLastLimboFreeSnapshotVersion(L);y.os=y.os.insert(N,O)}}}(r.localStore,s))}async function Hb(n,e){const t=Ye(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=await ug(t.localStore,e);t.currentUser=e,function(s,u){s.ka.forEach(h=>{h.forEach(d=>{d.reject(new Oe(ae.CANCELLED,u))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sa(t,r.hs)}}function qb(n,e){const t=Ye(n),r=t.Na.get(e);if(r&&r.va)return ut().add(r.key);{let i=ut();const s=t.Ma.get(e);if(!s)return i;for(const u of s){const h=t.Fa.get(u);i=i.unionWith(h.view.Va)}return i}}function Ag(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Tg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fb.bind(null,e),e.Ca.d_=Ab.bind(null,e.eventManager),e.Ca.$a=Cb.bind(null,e.eventManager),e}function $b(n){const e=Ye(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ub.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jb.bind(null,e),e}class vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return zw(this.persistence,new Ww,e.initialUser,this.serializer)}Ga(e){return new Hw(Kc.Zr,this.serializer)}Wa(e){return new eb}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vu.provider={build:()=>new vu};class uc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Gf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hb.bind(null,this.syncEngine),await Eb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wb}()}createDatastore(e){const t=Mu(e.databaseInfo.databaseId),r=function(s){return new ib(s)}(e.databaseInfo);return function(s,u,h,d){return new ab(s,u,h,d)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,u,h){return new lb(r,i,s,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>Gf(this.syncEngine,t,0),function(){return Bf.D()?new Bf:new tb}())}createSyncEngine(e,t){return function(i,s,u,h,d,m,y){const R=new kb(i,s,u,h,d,m);return y&&(R.Qa=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Ye(i);Re("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ia(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}uc.provider={build:()=>new uc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Yr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=gn.UNAUTHENTICATED,this.clientId=Rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async u=>{Re("FirestoreClient","Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(Re("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=th(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Cl(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await ug(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Kf(n,e){n.asyncQueue.verifyOperationInProgress();const t=await zb(n);Re("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Hf(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Hf(e.remoteStore,i)),n._onlineComponents=e}async function zb(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{await Cl(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ms("Error using user provided cache. Falling back to memory cache: "+t),await Cl(n,new vu)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),await Cl(n,new vu);return n._offlineComponents}async function Cg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),await Kf(n,n._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),await Kf(n,new uc))),n._onlineComponents}function Kb(n){return Cg(n).then(e=>e.syncEngine)}async function Yb(n){const e=await Cg(n),t=e.eventManager;return t.onListen=Nb.bind(null,e.syncEngine),t.onUnlisten=Lb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Ob.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Mb.bind(null,e.syncEngine),t}function Qb(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget(async()=>function(s,u,h,d,m){const y=new Wb({next:N=>{y.Za(),u.enqueueAndForget(()=>Ib(s,R)),N.fromCache&&d.source==="server"?m.reject(new Oe(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(N)},error:N=>m.reject(N)}),R=new Sb(h,y,{includeMetadataChanges:!0,_a:!0});return bb(s,R)}(await Yb(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(n,e,t){if(!t)throw new Oe(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Xb(n,e,t,r){if(e===!0&&r===!0)throw new Oe(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Qf(n){if(!Le.isDocumentKey(n))throw new Oe(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Xf(n){if(Le.isDocumentKey(n))throw new Oe(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ih(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":qe()}function Hs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ih(n);throw new Oe(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Oe(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Xb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sg((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Oe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Oe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Oe(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uu{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cT;switch(r.type){case"firstParty":return new pT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Yf.get(t);r&&(Re("ComponentProvider","Removing Datastore"),Yf.delete(t),r.terminate())}(this),Promise.resolve()}}function Jb(n,e,t,r={}){var i;const s=(n=Hs(n,Uu))._getSettings(),u=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==u&&Ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:u,ssl:!1})),r.mockUserToken){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=gn.MOCK_USER;else{h=Ld(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Oe(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new gn(m)}n._authCredentials=new hT(new Sp(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ju(this.firestore,e,this._query)}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class yi extends ju{constructor(e,t,r){super(e,t,Fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new Le(e))}withConverter(e){return new yi(this.firestore,e,this._path)}}function OC(n,e,...t){if(n=Zt(n),Rg("collection","path",e),n instanceof Uu){const r=Nt.fromString(e,...t);return Xf(r),new yi(n,null,r)}{if(!(n instanceof Qn||n instanceof yi))throw new Oe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Nt.fromString(e,...t));return Xf(r),new yi(n.firestore,null,r)}}function Zb(n,e,...t){if(n=Zt(n),arguments.length===1&&(e=Rp.newId()),Rg("doc","path",e),n instanceof Uu){const r=Nt.fromString(e,...t);return Qf(r),new Qn(n,null,new Le(r))}{if(!(n instanceof Qn||n instanceof yi))throw new Oe(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Nt.fromString(e,...t));return Qf(r),new Qn(n.firestore,n instanceof yi?n.converter:null,new Le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cg(this,"async_queue_retry"),this.Vu=()=>{const r=Al();r&&Re("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=Al();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=Al();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new vi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ta(e))throw e;Re("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),h}(r);throw Yr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=eh.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&qe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class Bu extends Uu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Zf,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zf(e),this._firestoreClient=void 0,await e}}}function xC(n,e){const t=typeof n=="object"?n:bc(),r=typeof n=="string"?n:"(default)",i=Au(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Nd("firestore");s&&Jb(i,...s)}return i}function Pg(n){if(n._terminated)throw new Oe(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||eI(n),n._firestoreClient}function eI(n){var e,t,r;const i=n._freezeSettings(),s=function(h,d,m,y){return new ST(h,d,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Sg(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Gb(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new qs(hn.fromBase64String(e))}catch(t){throw new Oe(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new qs(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Oe(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pt(this._lat,e._lat)||pt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=/^__.*__$/;class nI{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,t,this.fieldTransforms):new na(e,this.data,t,this.fieldTransforms)}}function kg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qe()}}class uh{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new uh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return yu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(kg(this.Cu)&&tI.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class rI{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Mu(e)}Qu(e,t,r,i=!1){return new uh({Cu:e,methodName:t,qu:r,path:ln.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ng(n){const e=n._freezeSettings(),t=Mu(n._databaseId);return new rI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Og(n,e,t,r,i,s={}){const u=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Vg("Data must be an object, but it was:",u,r);const h=Lg(r,u);let d,m;if(s.merge)d=new rr(u.fieldMask),m=u.fieldTransforms;else if(s.mergeFields){const y=[];for(const R of s.mergeFields){const N=iI(e,R,t);if(!u.contains(N))throw new Oe(ae.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);oI(y,N)||y.push(N)}d=new rr(y),m=u.fieldTransforms.filter(R=>d.covers(R.field))}else d=null,m=u.fieldTransforms;return new nI(new Kn(h),d,m)}function xg(n,e){if(Mg(n=Zt(n)))return Vg("Unsupported field value:",e,n),Lg(n,e);if(n instanceof Dg)return function(r,i){if(!kg(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let u=0;for(const h of r){let d=xg(h,i.Lu(u));d==null&&(d={nullValue:"NULL_VALUE"}),s.push(d),u++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return QT(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Jt.fromDate(r);return{timestampValue:gu(i.serializer,s)}}if(r instanceof Jt){const s=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gu(i.serializer,s)}}if(r instanceof oh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof qs)return{bytesValue:tg(i.serializer,r._byteString)};if(r instanceof Qn){const s=i.databaseId,u=r.firestore._databaseId;if(!u.isEqual(s))throw i.Bu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gc(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ah)return function(u,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:u.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return qc(h.serializer,d)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ih(r)}`)}(n,e)}function Lg(n,e){const t={};return Pp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ys(n,(r,i)=>{const s=xg(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Mg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Jt||n instanceof oh||n instanceof qs||n instanceof Qn||n instanceof Dg||n instanceof ah)}function Vg(n,e,t){if(!Mg(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=ih(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function iI(n,e,t){if((e=Zt(e))instanceof sh)return e._internalPath;if(typeof e=="string")return Fg(n,e);throw yu("Field path arguments must be of type string or ",n,!1,void 0,t)}const sI=new RegExp("[~\\*/\\[\\]]");function Fg(n,e,t){if(e.search(sI)>=0)throw yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new sh(...e.split("."))._internalPath}catch{throw yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yu(n,e,t,r,i){const s=r&&!r.isEmpty(),u=i!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(s||u)&&(d+=" (found",s&&(d+=` in field ${r}`),u&&(d+=` in document ${i}`),d+=")"),new Oe(ae.INVALID_ARGUMENT,h+n+d)}function oI(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aI extends Ug{data(){return super.data()}}function jg(n,e){return typeof e=="string"?Fg(n,e):e instanceof sh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Oe(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lI{convertValue(e,t="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ys(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(u=>Ht(u.doubleValue));return new ah(s)}convertGeoPoint(e){return new oh(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Uc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xo(e));default:return null}}convertTimestamp(e){const t=Ti(e);return new Jt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Nt.fromString(e);wt(ag(r));const i=new Lo(r.get(1),r.get(3)),s=new Le(r.popFirst(5));return i.isEqual(t)||Yr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cI extends Ug{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(jg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Qa extends cI{data(e={}){return super.data(e)}}class hI{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new La(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qa(this._firestore,this._userDataWriter,r.key,r,new La(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let u=0;return i._snapshot.docChanges.map(h=>{const d=new Qa(i._firestore,i._userDataWriter,h.doc.key,h.doc,new La(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}})}{let u=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>s||h.type!==3).map(h=>{const d=new Qa(i._firestore,i._userDataWriter,h.doc.key,h.doc,new La(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,y=-1;return h.type!==0&&(m=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),h.type!==1&&(u=u.add(h.doc),y=u.indexOf(h.doc.key)),{type:fI(h.type),doc:d,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fI(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qe()}}class dI extends lI{constructor(e){super(),this.firestore=e}convertBytes(e){return new qs(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function LC(n){n=Hs(n,ju);const e=Hs(n.firestore,Bu),t=Pg(e),r=new dI(e);return uI(n._query),Qb(t,n._query).then(i=>new hI(e,r,n,i))}function MC(n,e,t){n=Hs(n,Qn);const r=Hs(n.firestore,Bu),i=Bg(n.converter,e,t);return Hg(r,[Og(Ng(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,wr.none())])}function VC(n,e){const t=Hs(n.firestore,Bu),r=Zb(n),i=Bg(n.converter,e);return Hg(t,[Og(Ng(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}function Hg(n,e){return function(r,i){const s=new vi;return r.asyncQueue.enqueueAndForget(async()=>Vb(await Kb(r),i,s)),s.promise}(Pg(n),e)}(function(e,t=!0){(function(i){Ks=i})(ss),Qi(new _i("firestore",(r,{instanceIdentifier:i,options:s})=>{const u=r.getProvider("app").getImmediate(),h=new Bu(new fT(r.getProvider("auth-internal")),new mT(r.getProvider("app-check-internal")),function(m,y){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Oe(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(m.options.projectId,y)}(u,i),u);return s=Object.assign({useFetchStreams:t},s),h._setSettings(s),h},"PUBLIC").setMultipleInstances(!0)),_r(yf,"4.7.3",e),_r(yf,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="firebasestorage.googleapis.com",$g="storageBucket",pI=2*60*1e3,gI=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt extends Rr{constructor(e,t,r=0){super(Sl(e),`Firebase Storage: ${t} (${Sl(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sl(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ut;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ut||(Ut={}));function Sl(n){return"storage/"+n}function lh(){const n="An unknown error occurred, please check the error payload for server response.";return new jt(Ut.UNKNOWN,n)}function mI(n){return new jt(Ut.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function vI(n){return new jt(Ut.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yI(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new jt(Ut.UNAUTHENTICATED,n)}function _I(){return new jt(Ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function EI(n){return new jt(Ut.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function TI(){return new jt(Ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wI(){return new jt(Ut.CANCELED,"User canceled the upload/download.")}function bI(n){return new jt(Ut.INVALID_URL,"Invalid URL '"+n+"'.")}function II(n){return new jt(Ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function AI(){return new jt(Ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$g+"' property when initializing the app?")}function CI(){return new jt(Ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function SI(){return new jt(Ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function RI(n){return new jt(Ut.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function lc(n){return new jt(Ut.INVALID_ARGUMENT,n)}function Wg(){return new jt(Ut.APP_DELETED,"The Firebase app was deleted.")}function PI(n){return new jt(Ut.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function So(n,e){return new jt(Ut.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function mo(n){throw new jt(Ut.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Fn.makeFromUrl(e,t)}catch{return new Fn(e,"")}if(r.path==="")return r;throw II(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const u="(/(.*))?$",h=new RegExp("^gs://"+i+u,"i"),d={bucket:1,path:3};function m(ee){ee.path_=decodeURIComponent(ee.path)}const y="v[A-Za-z0-9_]+",R=t.replace(/[.]/g,"\\."),N="(/([^?#]*).*)?$",U=new RegExp(`^https?://${R}/${y}/b/${i}/o${N}`,"i"),L={bucket:1,path:3},O=t===qg?"(?:storage.googleapis.com|storage.cloud.google.com)":t,q="([^?#]*)",$=new RegExp(`^https?://${O}/${i}/${q}`,"i"),X=[{regex:h,indices:d,postModify:s},{regex:U,indices:L,postModify:m},{regex:$,indices:{bucket:1,path:2},postModify:m}];for(let ee=0;ee<X.length;ee++){const ie=X[ee],re=ie.regex.exec(e);if(re){const c=re[ie.indices.bucket];let C=re[ie.indices.path];C||(C=""),r=new Fn(c,C),ie.postModify(r);break}}if(r==null)throw bI(e);return r}}class DI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(n,e,t){let r=1,i=null,s=null,u=!1,h=0;function d(){return h===2}let m=!1;function y(...q){m||(m=!0,e.apply(null,q))}function R(q){i=setTimeout(()=>{i=null,n(U,d())},q)}function N(){s&&clearTimeout(s)}function U(q,...$){if(m){N();return}if(q){N(),y.call(null,q,...$);return}if(d()||u){N(),y.call(null,q,...$);return}r<64&&(r*=2);let X;h===1?(h=2,X=0):X=(r+Math.random())*1e3,R(X)}let L=!1;function O(q){L||(L=!0,N(),!m&&(i!==null?(q||(h=2),clearTimeout(i),R(0)):q||(h=1)))}return R(0),s=setTimeout(()=>{u=!0,O(!0)},t),O}function NI(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(n){return n!==void 0}function xI(n){return typeof n=="object"&&!Array.isArray(n)}function ch(n){return typeof n=="string"||n instanceof String}function ed(n){return hh()&&n instanceof Blob}function hh(){return typeof Blob<"u"}function td(n,e,t,r){if(r<e)throw lc(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw lc(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Gg(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Ki;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ki||(Ki={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,t,r,i,s,u,h,d,m,y,R,N=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=d,this.timeout_=m,this.progressCallback_=y,this.connectionFactory_=R,this.retry=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,L)=>{this.resolve_=U,this.reject_=L,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ma(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const u=h=>{const d=h.loaded,m=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,m)};this.progressCallback_!==null&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const h=s.getErrorCode()===Ki.NO_ERROR,d=s.getStatus();if(!h||LI(d,this.additionalRetryCodes_)&&this.retry){const y=s.getErrorCode()===Ki.ABORT;r(!1,new Ma(!1,null,y));return}const m=this.successCodes_.indexOf(d)!==-1;r(!0,new Ma(m,s))})},t=(r,i)=>{const s=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const d=this.callback_(h,h.getResponse());OI(d)?s(d):s()}catch(d){u(d)}else if(h!==null){const d=lh();d.serverResponse=h.getErrorText(),this.errorCallback_?u(this.errorCallback_(h,d)):u(d)}else if(i.canceled){const d=this.appDelete_?Wg():wI();u(d)}else{const d=TI();u(d)}};this.canceled_?t(!1,new Ma(!1,null,!0)):this.backoffId_=kI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&NI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ma{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function VI(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function FI(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function UI(n,e){e&&(n["X-Firebase-GMPID"]=e)}function jI(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function BI(n,e,t,r,i,s,u=!0){const h=Gg(n.urlParams),d=n.url+h,m=Object.assign({},n.headers);return UI(m,e),VI(m,t),FI(m,s),jI(m,r),new MI(d,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qI(...n){const e=HI();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(hh())return new Blob(n);throw new jt(Ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $I(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(n){if(typeof atob>"u")throw RI("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Rl{constructor(e,t){this.data=e,this.contentType=t||null}}function GI(n,e){switch(n){case yr.RAW:return new Rl(zg(e));case yr.BASE64:case yr.BASE64URL:return new Rl(Kg(n,e));case yr.DATA_URL:return new Rl(KI(e),YI(e))}throw lh()}function zg(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,u=n.charCodeAt(++t);r=65536|(s&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function zI(n){let e;try{e=decodeURIComponent(n)}catch{throw So(yr.DATA_URL,"Malformed data URL.")}return zg(e)}function Kg(n,e){switch(n){case yr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw So(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case yr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw So(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=WI(e)}catch(i){throw i.message.includes("polyfill")?i:So(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Yg{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw So(yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=QI(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function KI(n){const e=new Yg(n);return e.base64?Kg(yr.BASE64,e.rest):zI(e.rest)}function YI(n){return new Yg(n).contentType}function QI(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){let r=0,i="";ed(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(ed(this.data_)){const r=this.data_,i=$I(r,e,t);return i===null?null:new fi(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new fi(r,!0)}}static getBlob(...e){if(hh()){const t=e.map(r=>r instanceof fi?r.data_:r);return new fi(qI.apply(null,t))}else{const t=e.map(u=>ch(u)?GI(yr.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[s++]=u[h]}),new fi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(n){let e;try{e=JSON.parse(n)}catch{return null}return xI(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function JI(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Xg(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(n,e){return e}class bn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ZI}}let Va=null;function e0(n){return!ch(n)||n.length<2?n:Xg(n)}function Jg(){if(Va)return Va;const n=[];n.push(new bn("bucket")),n.push(new bn("generation")),n.push(new bn("metageneration")),n.push(new bn("name","fullPath",!0));function e(s,u){return e0(u)}const t=new bn("name");t.xform=e,n.push(t);function r(s,u){return u!==void 0?Number(u):u}const i=new bn("size");return i.xform=r,n.push(i),n.push(new bn("timeCreated")),n.push(new bn("updated")),n.push(new bn("md5Hash",null,!0)),n.push(new bn("cacheControl",null,!0)),n.push(new bn("contentDisposition",null,!0)),n.push(new bn("contentEncoding",null,!0)),n.push(new bn("contentLanguage",null,!0)),n.push(new bn("contentType",null,!0)),n.push(new bn("metadata","customMetadata",!0)),Va=n,Va}function t0(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new Fn(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function n0(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const u=t[s];r[u.local]=u.xform(r,e[u.server])}return t0(r,n),r}function Zg(n,e,t){const r=Qg(e);return r===null?null:n0(n,r,t)}function r0(n,e,t,r){const i=Qg(e);if(i===null||!ch(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const u=encodeURIComponent;return s.split(",").map(m=>{const y=n.bucket,R=n.fullPath,N="/b/"+u(y)+"/o/"+u(R),U=fh(N,t,r),L=Gg({alt:"media",token:m});return U+L})[0]}function i0(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class em{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(n){if(!n)throw lh()}function s0(n,e){function t(r,i){const s=Zg(n,i,e);return tm(s!==null),s}return t}function o0(n,e){function t(r,i){const s=Zg(n,i,e);return tm(s!==null),r0(s,i,n.host,n._protocol)}return t}function nm(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=_I():i=yI():t.getStatus()===402?i=vI(n.bucket):t.getStatus()===403?i=EI(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function a0(n){const e=nm(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=mI(n.path)),s.serverResponse=i.serverResponse,s}return t}function u0(n,e,t){const r=e.fullServerUrl(),i=fh(r,n.host,n._protocol),s="GET",u=n.maxOperationRetryTime,h=new em(i,s,o0(n,t),u);return h.errorHandler=a0(e),h}function l0(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function c0(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=l0(null,e)),r}function h0(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function h(){let X="";for(let ee=0;ee<2;ee++)X=X+Math.random().toString().slice(2);return X}const d=h();u["Content-Type"]="multipart/related; boundary="+d;const m=c0(e,r,i),y=i0(m,t),R="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+d+`\r
Content-Type: `+m.contentType+`\r
\r
`,N=`\r
--`+d+"--",U=fi.getBlob(R,r,N);if(U===null)throw CI();const L={name:m.fullPath},O=fh(s,n.host,n._protocol),q="POST",$=n.maxUploadRetryTime,Q=new em(O,q,s0(n,t),$);return Q.urlParams=L,Q.headers=u,Q.body=U.uploadData(),Q.errorHandler=nm(e),Q}class f0{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ki.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ki.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ki.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw mo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw mo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw mo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw mo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw mo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class d0 extends f0{initXhr(){this.xhr_.responseType="text"}}function rm(){return new d0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t){this._service=e,t instanceof Fn?this._location=t:this._location=Fn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ns(e,t)}get root(){const e=new Fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xg(this._location.path)}get storage(){return this._service}get parent(){const e=XI(this._location.path);if(e===null)return null;const t=new Fn(this._location.bucket,e);return new ns(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw PI(e)}}function p0(n,e,t){n._throwIfRoot("uploadBytes");const r=h0(n.storage,n._location,Jg(),new fi(e,!0),t);return n.storage.makeRequestWithTokens(r,rm).then(i=>({metadata:i,ref:n}))}function g0(n){n._throwIfRoot("getDownloadURL");const e=u0(n.storage,n._location,Jg());return n.storage.makeRequestWithTokens(e,rm).then(t=>{if(t===null)throw SI();return t})}function m0(n,e){const t=JI(n._location.path,e),r=new Fn(n._location.bucket,t);return new ns(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n){return/^[A-Za-z]+:\/\//.test(n)}function y0(n,e){return new ns(n,e)}function im(n,e){if(n instanceof dh){const t=n;if(t._bucket==null)throw AI();const r=new ns(t,t._bucket);return e!=null?im(r,e):r}else return e!==void 0?m0(n,e):n}function _0(n,e){if(e&&v0(e)){if(n instanceof dh)return y0(n,e);throw lc("To use ref(service, url), the first argument must be a Storage instance.")}else return im(n,e)}function nd(n,e){const t=e==null?void 0:e[$g];return t==null?null:Fn.makeFromBucketSpec(t,n)}function E0(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Ld(i,n.app.options.projectId))}class dh{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=qg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=pI,this._maxUploadRetryTime=gI,this._requests=new Set,i!=null?this._bucket=Fn.makeFromBucketSpec(i,this._host):this._bucket=nd(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fn.makeFromBucketSpec(this._url,e):this._bucket=nd(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){td("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){td("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ns(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new DI(Wg());{const u=BI(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const rd="@firebase/storage",id="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="storage";function FC(n,e,t){return n=Zt(n),p0(n,e,t)}function UC(n){return n=Zt(n),g0(n)}function jC(n,e){return n=Zt(n),_0(n,e)}function BC(n=bc(),e){n=Zt(n);const r=Au(n,sm).getImmediate({identifier:e}),i=Nd("storage");return i&&T0(r,...i),r}function T0(n,e,t,r={}){E0(n,e,t,r)}function w0(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new dh(t,r,i,e,ss)}function b0(){Qi(new _i(sm,w0,"PUBLIC").setMultipleInstances(!0)),_r(rd,id,""),_r(rd,id,"esm2017")}b0();function I0(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function A0(n,e,t){return e&&I0(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}/*!
 * Splide.js
 * Version  : 4.1.4
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */var sd="(prefers-reduced-motion: reduce)",Cs=1,C0=2,$s=3,Js=4,oa=5,Xa=6,_u=7,S0={CREATED:Cs,MOUNTED:C0,IDLE:$s,MOVING:Js,SCROLLING:oa,DRAGGING:Xa,DESTROYED:_u};function Xr(n){n.length=0}function Ri(n,e,t){return Array.prototype.slice.call(n,e,t)}function Rt(n){return n.bind.apply(n,[null].concat(Ri(arguments,1)))}var om=setTimeout,cc=function(){};function od(n){return requestAnimationFrame(n)}function Hu(n,e){return typeof e===n}function Uo(n){return!gh(n)&&Hu("object",n)}var ph=Array.isArray,am=Rt(Hu,"function"),bi=Rt(Hu,"string"),aa=Rt(Hu,"undefined");function gh(n){return n===null}function um(n){try{return n instanceof(n.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function ua(n){return ph(n)?n:[n]}function Jn(n,e){ua(n).forEach(e)}function mh(n,e){return n.indexOf(e)>-1}function Ja(n,e){return n.push.apply(n,ua(e)),n}function qr(n,e,t){n&&Jn(e,function(r){r&&n.classList[t?"add":"remove"](r)})}function Cr(n,e){qr(n,bi(e)?e.split(" "):e,!0)}function la(n,e){Jn(e,n.appendChild.bind(n))}function vh(n,e){Jn(n,function(t){var r=(e||t).parentNode;r&&r.insertBefore(t,e)})}function jo(n,e){return um(n)&&(n.msMatchesSelector||n.matches).call(n,e)}function lm(n,e){var t=n?Ri(n.children):[];return e?t.filter(function(r){return jo(r,e)}):t}function ca(n,e){return e?lm(n,e)[0]:n.firstElementChild}var Bo=Object.keys;function Yi(n,e,t){return n&&(t?Bo(n).reverse():Bo(n)).forEach(function(r){r!=="__proto__"&&e(n[r],r)}),n}function Ho(n){return Ri(arguments,1).forEach(function(e){Yi(e,function(t,r){n[r]=e[r]})}),n}function pi(n){return Ri(arguments,1).forEach(function(e){Yi(e,function(t,r){ph(t)?n[r]=t.slice():Uo(t)?n[r]=pi({},Uo(n[r])?n[r]:{},t):n[r]=t})}),n}function ad(n,e){Jn(e||Bo(n),function(t){delete n[t]})}function Sr(n,e){Jn(n,function(t){Jn(e,function(r){t&&t.removeAttribute(r)})})}function et(n,e,t){Uo(e)?Yi(e,function(r,i){et(n,i,r)}):Jn(n,function(r){gh(t)||t===""?Sr(r,e):r.setAttribute(e,String(t))})}function ks(n,e,t){var r=document.createElement(n);return e&&(bi(e)?Cr(r,e):et(r,e)),t&&la(t,r),r}function tr(n,e,t){if(aa(t))return getComputedStyle(n)[e];gh(t)||(n.style[e]=""+t)}function qo(n,e){tr(n,"display",e)}function cm(n){n.setActive&&n.setActive()||n.focus({preventScroll:!0})}function ir(n,e){return n.getAttribute(e)}function ud(n,e){return n&&n.classList.contains(e)}function zn(n){return n.getBoundingClientRect()}function rs(n){Jn(n,function(e){e&&e.parentNode&&e.parentNode.removeChild(e)})}function hm(n){return ca(new DOMParser().parseFromString(n,"text/html").body)}function Ur(n,e){n.preventDefault(),e&&(n.stopPropagation(),n.stopImmediatePropagation())}function fm(n,e){return n&&n.querySelector(e)}function yh(n,e){return e?Ri(n.querySelectorAll(e)):[]}function $r(n,e){qr(n,e,!1)}function hc(n){return n.timeStamp}function Hi(n){return bi(n)?n:n?n+"px":""}var ha="splide",_h="data-"+ha;function Ro(n,e){if(!n)throw new Error("["+ha+"] "+(e||""))}var Ii=Math.min,Eu=Math.max,Tu=Math.floor,$o=Math.ceil,Dn=Math.abs;function dm(n,e,t){return Dn(n-e)<t}function Za(n,e,t,r){var i=Ii(e,t),s=Eu(e,t);return r?i<n&&n<s:i<=n&&n<=s}function Is(n,e,t){var r=Ii(e,t),i=Eu(e,t);return Ii(Eu(r,n),i)}function fc(n){return+(n>0)-+(n<0)}function dc(n,e){return Jn(e,function(t){n=n.replace("%s",""+t)}),n}function Eh(n){return n<10?"0"+n:""+n}var ld={};function R0(n){return""+n+Eh(ld[n]=(ld[n]||0)+1)}function pm(){var n=[];function e(u,h,d,m){i(u,h,function(y,R,N){var U="addEventListener"in y,L=U?y.removeEventListener.bind(y,R,d,m):y.removeListener.bind(y,d);U?y.addEventListener(R,d,m):y.addListener(d),n.push([y,R,N,d,L])})}function t(u,h,d){i(u,h,function(m,y,R){n=n.filter(function(N){return N[0]===m&&N[1]===y&&N[2]===R&&(!d||N[3]===d)?(N[4](),!1):!0})})}function r(u,h,d){var m,y=!0;return typeof CustomEvent=="function"?m=new CustomEvent(h,{bubbles:y,detail:d}):(m=document.createEvent("CustomEvent"),m.initCustomEvent(h,y,!1,d)),u.dispatchEvent(m),m}function i(u,h,d){Jn(u,function(m){m&&Jn(h,function(y){y.split(" ").forEach(function(R){var N=R.split(".");d(m,N[0],N[1])})})})}function s(){n.forEach(function(u){u[4]()}),Xr(n)}return{bind:e,unbind:t,dispatch:r,destroy:s}}var us="mounted",cd="ready",Ai="move",fa="moved",gm="click",P0="active",D0="inactive",k0="visible",N0="hidden",Xt="refresh",kn="updated",Wo="resize",Th="resized",O0="drag",x0="dragging",L0="dragged",wh="scroll",Zs="scrolled",M0="overflow",mm="destroy",V0="arrows:mounted",F0="arrows:updated",U0="pagination:mounted",j0="pagination:updated",vm="navigation:mounted",ym="autoplay:play",B0="autoplay:playing",_m="autoplay:pause",Em="lazyload:loaded",Tm="sk",wm="sh",wu="ei";function xt(n){var e=n?n.event.bus:document.createDocumentFragment(),t=pm();function r(s,u){t.bind(e,ua(s).join(" "),function(h){u.apply(u,ph(h.detail)?h.detail:[])})}function i(s){t.dispatch(e,s,Ri(arguments,1))}return n&&n.event.on(mm,t.destroy),Ho(t,{bus:e,on:r,off:Rt(t.unbind,e),emit:i})}function qu(n,e,t,r){var i=Date.now,s,u=0,h,d=!0,m=0;function y(){if(!d){if(u=n?Ii((i()-s)/n,1):1,t&&t(u),u>=1&&(e(),s=i(),r&&++m>=r))return N();h=od(y)}}function R($){$||L(),s=i()-($?u*n:0),d=!1,h=od(y)}function N(){d=!0}function U(){s=i(),u=0,t&&t(u)}function L(){h&&cancelAnimationFrame(h),u=0,h=0,d=!0}function O($){n=$}function q(){return d}return{start:R,rewind:U,pause:N,cancel:L,set:O,isPaused:q}}function H0(n){var e=n;function t(i){e=i}function r(i){return mh(ua(i),e)}return{set:t,is:r}}function q0(n,e){var t=qu(0,n,null,1);return function(){t.isPaused()&&t.start()}}function $0(n,e,t){var r=n.state,i=t.breakpoints||{},s=t.reducedMotion||{},u=pm(),h=[];function d(){var L=t.mediaQuery==="min";Bo(i).sort(function(O,q){return L?+O-+q:+q-+O}).forEach(function(O){y(i[O],"("+(L?"min":"max")+"-width:"+O+"px)")}),y(s,sd),R()}function m(L){L&&u.destroy()}function y(L,O){var q=matchMedia(O);u.bind(q,"change",R),h.push([L,q])}function R(){var L=r.is(_u),O=t.direction,q=h.reduce(function($,Q){return pi($,Q[1].matches?Q[0]:{})},{});ad(t),U(q),t.destroy?n.destroy(t.destroy==="completely"):L?(m(!0),n.mount()):O!==t.direction&&n.refresh()}function N(L){matchMedia(sd).matches&&(L?pi(t,s):ad(t,Bo(s)))}function U(L,O,q){pi(t,L),O&&pi(Object.getPrototypeOf(t),L),(q||!r.is(Cs))&&n.emit(kn,t)}return{setup:d,destroy:m,reduce:N,set:U}}var $u="Arrow",Wu=$u+"Left",Gu=$u+"Right",bm=$u+"Up",Im=$u+"Down",hd="rtl",zu="ttb",Pl={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[bm,Gu],ArrowRight:[Im,Wu]};function W0(n,e,t){function r(s,u,h){h=h||t.direction;var d=h===hd&&!u?1:h===zu?0:-1;return Pl[s]&&Pl[s][d]||s.replace(/width|left|right/i,function(m,y){var R=Pl[m.toLowerCase()][d]||m;return y>0?R.charAt(0).toUpperCase()+R.slice(1):R})}function i(s){return s*(t.direction===hd?1:-1)}return{resolve:r,orient:i}}var Gr="role",Ns="tabindex",G0="disabled",or="aria-",da=or+"controls",Am=or+"current",fd=or+"selected",Yn=or+"label",bh=or+"labelledby",Cm=or+"hidden",Ih=or+"orientation",Go=or+"roledescription",dd=or+"live",pd=or+"busy",gd=or+"atomic",Ah=[Gr,Ns,G0,da,Am,Yn,bh,Cm,Ih,Go],Pr=ha+"__",Pi="is-",Dl=ha,md=Pr+"track",z0=Pr+"list",Ku=Pr+"slide",Sm=Ku+"--clone",K0=Ku+"__container",Ch=Pr+"arrows",Yu=Pr+"arrow",Rm=Yu+"--prev",Pm=Yu+"--next",Qu=Pr+"pagination",Dm=Qu+"__page",Y0=Pr+"progress",Q0=Y0+"__bar",X0=Pr+"toggle",J0=Pr+"spinner",Z0=Pr+"sr",eA=Pi+"initialized",is=Pi+"active",km=Pi+"prev",Nm=Pi+"next",pc=Pi+"visible",gc=Pi+"loading",Om=Pi+"focus-in",xm=Pi+"overflow",tA=[is,pc,km,Nm,gc,Om,xm],nA={slide:Ku,clone:Sm,arrows:Ch,arrow:Yu,prev:Rm,next:Pm,pagination:Qu,page:Dm,spinner:J0};function rA(n,e){if(am(n.closest))return n.closest(e);for(var t=n;t&&t.nodeType===1&&!jo(t,e);)t=t.parentElement;return t}var iA=5,vd=200,Lm="touchstart mousedown",kl="touchmove mousemove",Nl="touchend touchcancel mouseup click";function sA(n,e,t){var r=xt(n),i=r.on,s=r.bind,u=n.root,h=t.i18n,d={},m=[],y=[],R=[],N,U,L;function O(){X(),ee(),Q()}function q(){i(Xt,$),i(Xt,O),i(kn,Q),s(document,Lm+" keydown",function(c){L=c.type==="keydown"},{capture:!0}),s(u,"focusin",function(){qr(u,Om,!!L)})}function $(c){var C=Ah.concat("style");Xr(m),$r(u,y),$r(N,R),Sr([N,U],C),Sr(u,c?C:["style",Go])}function Q(){$r(u,y),$r(N,R),y=re(Dl),R=re(md),Cr(u,y),Cr(N,R),et(u,Yn,t.label),et(u,bh,t.labelledby)}function X(){N=ie("."+md),U=ca(N,"."+z0),Ro(N&&U,"A track/list element is missing."),Ja(m,lm(U,"."+Ku+":not(."+Sm+")")),Yi({arrows:Ch,pagination:Qu,prev:Rm,next:Pm,bar:Q0,toggle:X0},function(c,C){d[C]=ie("."+c)}),Ho(d,{root:u,track:N,list:U,slides:m})}function ee(){var c=u.id||R0(ha),C=t.role;u.id=c,N.id=N.id||c+"-track",U.id=U.id||c+"-list",!ir(u,Gr)&&u.tagName!=="SECTION"&&C&&et(u,Gr,C),et(u,Go,h.carousel),et(U,Gr,"presentation")}function ie(c){var C=fm(u,c);return C&&rA(C,"."+Dl)===u?C:void 0}function re(c){return[c+"--"+t.type,c+"--"+t.direction,t.drag&&c+"--draggable",t.isNavigation&&c+"--nav",c===Dl&&is]}return Ho(d,{setup:O,mount:q,destroy:$})}var Ws="slide",eo="loop",pa="fade";function oA(n,e,t,r){var i=xt(n),s=i.on,u=i.emit,h=i.bind,d=n.Components,m=n.root,y=n.options,R=y.isNavigation,N=y.updateOnMove,U=y.i18n,L=y.pagination,O=y.slideFocus,q=d.Direction.resolve,$=ir(r,"style"),Q=ir(r,Yn),X=t>-1,ee=ca(r,"."+K0),ie;function re(){X||(r.id=m.id+"-slide"+Eh(e+1),et(r,Gr,L?"tabpanel":"group"),et(r,Go,U.slide),et(r,Yn,Q||dc(U.slideLabel,[e+1,n.length]))),c()}function c(){h(r,"click",Rt(u,gm,_e)),h(r,"keydown",Rt(u,Tm,_e)),s([fa,wm,Zs],D),s(vm,T),N&&s(Ai,I)}function C(){ie=!0,i.destroy(),$r(r,tA),Sr(r,Ah),et(r,"style",$),et(r,Yn,Q||"")}function T(){var ve=n.splides.map(function(he){var Se=he.splide.Components.Slides.getAt(e);return Se?Se.slide.id:""}).join(" ");et(r,Yn,dc(U.slideX,(X?t:e)+1)),et(r,da,ve),et(r,Gr,O?"button":""),O&&Sr(r,Go)}function I(){ie||D()}function D(){if(!ie){var ve=n.index;M(),b(),qr(r,km,e===ve-1),qr(r,Nm,e===ve+1)}}function M(){var ve=ke();ve!==ud(r,is)&&(qr(r,is,ve),et(r,Am,R&&ve||""),u(ve?P0:D0,_e))}function b(){var ve=lt(),he=!ve&&(!ke()||X);if(n.state.is([Js,oa])||et(r,Cm,he||""),et(yh(r,y.focusableNodes||""),Ns,he?-1:""),O&&et(r,Ns,he?-1:0),ve!==ud(r,pc)&&(qr(r,pc,ve),u(ve?k0:N0,_e)),!ve&&document.activeElement===r){var Se=d.Slides.getAt(n.index);Se&&cm(Se.slide)}}function Ie(ve,he,Se){tr(Se&&ee||r,ve,he)}function ke(){var ve=n.index;return ve===e||y.cloneStatus&&ve===t}function lt(){if(n.is(pa))return ke();var ve=zn(d.Elements.track),he=zn(r),Se=q("left",!0),Fe=q("right",!0);return Tu(ve[Se])<=$o(he[Se])&&Tu(he[Fe])<=$o(ve[Fe])}function Ve(ve,he){var Se=Dn(ve-e);return!X&&(y.rewind||n.is(eo))&&(Se=Ii(Se,n.length-Se)),Se<=he}var _e={index:e,slideIndex:t,slide:r,container:ee,isClone:X,mount:re,destroy:C,update:D,style:Ie,isWithin:Ve};return _e}function aA(n,e,t){var r=xt(n),i=r.on,s=r.emit,u=r.bind,h=e.Elements,d=h.slides,m=h.list,y=[];function R(){N(),i(Xt,U),i(Xt,N)}function N(){d.forEach(function(D,M){O(D,M,-1)})}function U(){ie(function(D){D.destroy()}),Xr(y)}function L(){ie(function(D){D.update()})}function O(D,M,b){var Ie=oA(n,M,b,D);Ie.mount(),y.push(Ie),y.sort(function(ke,lt){return ke.index-lt.index})}function q(D){return D?re(function(M){return!M.isClone}):y}function $(D){var M=e.Controller,b=M.toIndex(D),Ie=M.hasFocus()?1:t.perPage;return re(function(ke){return Za(ke.index,b,b+Ie-1)})}function Q(D){return re(D)[0]}function X(D,M){Jn(D,function(b){if(bi(b)&&(b=hm(b)),um(b)){var Ie=d[M];Ie?vh(b,Ie):la(m,b),Cr(b,t.classes.slide),C(b,Rt(s,Wo))}}),s(Xt)}function ee(D){rs(re(D).map(function(M){return M.slide})),s(Xt)}function ie(D,M){q(M).forEach(D)}function re(D){return y.filter(am(D)?D:function(M){return bi(D)?jo(M.slide,D):mh(ua(D),M.index)})}function c(D,M,b){ie(function(Ie){Ie.style(D,M,b)})}function C(D,M){var b=yh(D,"img"),Ie=b.length;Ie?b.forEach(function(ke){u(ke,"load error",function(){--Ie||M()})}):M()}function T(D){return D?d.length:y.length}function I(){return y.length>t.perPage}return{mount:R,destroy:U,update:L,register:O,get:q,getIn:$,getAt:Q,add:X,remove:ee,forEach:ie,filter:re,style:c,getLength:T,isEnough:I}}function uA(n,e,t){var r=xt(n),i=r.on,s=r.bind,u=r.emit,h=e.Slides,d=e.Direction.resolve,m=e.Elements,y=m.root,R=m.track,N=m.list,U=h.getAt,L=h.style,O,q,$;function Q(){X(),s(window,"resize load",q0(Rt(u,Wo))),i([kn,Xt],X),i(Wo,ee)}function X(){O=t.direction===zu,tr(y,"maxWidth",Hi(t.width)),tr(R,d("paddingLeft"),ie(!1)),tr(R,d("paddingRight"),ie(!0)),ee(!0)}function ee(_e){var ve=zn(y);(_e||q.width!==ve.width||q.height!==ve.height)&&(tr(R,"height",re()),L(d("marginRight"),Hi(t.gap)),L("width",C()),L("height",T(),!0),q=ve,u(Th),$!==($=Ve())&&(qr(y,xm,$),u(M0,$)))}function ie(_e){var ve=t.padding,he=d(_e?"right":"left");return ve&&Hi(ve[he]||(Uo(ve)?0:ve))||"0px"}function re(){var _e="";return O&&(_e=c(),Ro(_e,"height or heightRatio is missing."),_e="calc("+_e+" - "+ie(!1)+" - "+ie(!0)+")"),_e}function c(){return Hi(t.height||zn(N).width*t.heightRatio)}function C(){return t.autoWidth?null:Hi(t.fixedWidth)||(O?"":I())}function T(){return Hi(t.fixedHeight)||(O?t.autoHeight?null:I():c())}function I(){var _e=Hi(t.gap);return"calc((100%"+(_e&&" + "+_e)+")/"+(t.perPage||1)+(_e&&" - "+_e)+")"}function D(){return zn(N)[d("width")]}function M(_e,ve){var he=U(_e||0);return he?zn(he.slide)[d("width")]+(ve?0:ke()):0}function b(_e,ve){var he=U(_e);if(he){var Se=zn(he.slide)[d("right")],Fe=zn(N)[d("left")];return Dn(Se-Fe)+(ve?0:ke())}return 0}function Ie(_e){return b(n.length-1)-b(0)+M(0,_e)}function ke(){var _e=U(0);return _e&&parseFloat(tr(_e.slide,d("marginRight")))||0}function lt(_e){return parseFloat(tr(R,d("padding"+(_e?"Right":"Left"))))||0}function Ve(){return n.is(pa)||Ie(!0)>D()}return{mount:Q,resize:ee,listSize:D,slideSize:M,sliderSize:Ie,totalSize:b,getPadding:lt,isOverflow:Ve}}var lA=2;function cA(n,e,t){var r=xt(n),i=r.on,s=e.Elements,u=e.Slides,h=e.Direction.resolve,d=[],m;function y(){i(Xt,R),i([kn,Wo],U),(m=q())&&(L(m),e.Layout.resize(!0))}function R(){N(),y()}function N(){rs(d),Xr(d),r.destroy()}function U(){var $=q();m!==$&&(m<$||!$)&&r.emit(Xt)}function L($){var Q=u.get().slice(),X=Q.length;if(X){for(;Q.length<$;)Ja(Q,Q);Ja(Q.slice(-$),Q.slice(0,$)).forEach(function(ee,ie){var re=ie<$,c=O(ee.slide,ie);re?vh(c,Q[0].slide):la(s.list,c),Ja(d,c),u.register(c,ie-$+(re?0:X),ee.index)})}}function O($,Q){var X=$.cloneNode(!0);return Cr(X,t.classes.clone),X.id=n.root.id+"-clone"+Eh(Q+1),X}function q(){var $=t.clones;if(!n.is(eo))$=0;else if(aa($)){var Q=t[h("fixedWidth")]&&e.Layout.slideSize(0),X=Q&&$o(zn(s.track)[h("width")]/Q);$=X||t[h("autoWidth")]&&n.length||t.perPage*lA}return $}return{mount:y,destroy:N}}function hA(n,e,t){var r=xt(n),i=r.on,s=r.emit,u=n.state.set,h=e.Layout,d=h.slideSize,m=h.getPadding,y=h.totalSize,R=h.listSize,N=h.sliderSize,U=e.Direction,L=U.resolve,O=U.orient,q=e.Elements,$=q.list,Q=q.track,X;function ee(){X=e.Transition,i([us,Th,kn,Xt],ie)}function ie(){e.Controller.isBusy()||(e.Scroll.cancel(),c(n.index),e.Slides.update())}function re(he,Se,Fe,ze){he!==Se&&_e(he>Fe)&&(D(),C(I(Ie(),he>Fe),!0)),u(Js),s(Ai,Se,Fe,he),X.start(Se,function(){u($s),s(fa,Se,Fe,he),ze&&ze()})}function c(he){C(b(he,!0))}function C(he,Se){if(!n.is(pa)){var Fe=Se?he:T(he);tr($,"transform","translate"+L("X")+"("+Fe+"px)"),he!==Fe&&s(wm)}}function T(he){if(n.is(eo)){var Se=M(he),Fe=Se>e.Controller.getEnd(),ze=Se<0;(ze||Fe)&&(he=I(he,Fe))}return he}function I(he,Se){var Fe=he-Ve(Se),ze=N();return he-=O(ze*($o(Dn(Fe)/ze)||1))*(Se?1:-1),he}function D(){C(Ie(),!0),X.cancel()}function M(he){for(var Se=e.Slides.get(),Fe=0,ze=1/0,Et=0;Et<Se.length;Et++){var bt=Se[Et].index,fe=Dn(b(bt,!0)-he);if(fe<=ze)ze=fe,Fe=bt;else break}return Fe}function b(he,Se){var Fe=O(y(he-1)-lt(he));return Se?ke(Fe):Fe}function Ie(){var he=L("left");return zn($)[he]-zn(Q)[he]+O(m(!1))}function ke(he){return t.trimSpace&&n.is(Ws)&&(he=Is(he,0,O(N(!0)-R()))),he}function lt(he){var Se=t.focus;return Se==="center"?(R()-d(he,!0))/2:+Se*d(he)||0}function Ve(he){return b(he?e.Controller.getEnd():0,!!t.trimSpace)}function _e(he){var Se=O(I(Ie(),he));return he?Se>=0:Se<=$[L("scrollWidth")]-zn(Q)[L("width")]}function ve(he,Se){Se=aa(Se)?Ie():Se;var Fe=he!==!0&&O(Se)<O(Ve(!1)),ze=he!==!1&&O(Se)>O(Ve(!0));return Fe||ze}return{mount:ee,move:re,jump:c,translate:C,shift:I,cancel:D,toIndex:M,toPosition:b,getPosition:Ie,getLimit:Ve,exceededLimit:ve,reposition:ie}}function fA(n,e,t){var r=xt(n),i=r.on,s=r.emit,u=e.Move,h=u.getPosition,d=u.getLimit,m=u.toPosition,y=e.Slides,R=y.isEnough,N=y.getLength,U=t.omitEnd,L=n.is(eo),O=n.is(Ws),q=Rt(Ie,!1),$=Rt(Ie,!0),Q=t.start||0,X,ee=Q,ie,re,c;function C(){T(),i([kn,Xt,wu],T),i(Th,I)}function T(){ie=N(!0),re=t.perMove,c=t.perPage,X=_e();var fe=Is(Q,0,U?X:ie-1);fe!==Q&&(Q=fe,u.reposition())}function I(){X!==_e()&&s(wu)}function D(fe,$e,gt){if(!bt()){var nt=b(fe),tt=Ve(nt);tt>-1&&($e||tt!==Q)&&(Fe(tt),u.move(nt,tt,ee,gt))}}function M(fe,$e,gt,nt){e.Scroll.scroll(fe,$e,gt,function(){var tt=Ve(u.toIndex(h()));Fe(U?Ii(tt,X):tt),nt&&nt()})}function b(fe){var $e=Q;if(bi(fe)){var gt=fe.match(/([+\-<>])(\d+)?/)||[],nt=gt[1],tt=gt[2];nt==="+"||nt==="-"?$e=ke(Q+ +(""+nt+(+tt||1)),Q):nt===">"?$e=tt?ve(+tt):q(!0):nt==="<"&&($e=$(!0))}else $e=L?fe:Is(fe,0,X);return $e}function Ie(fe,$e){var gt=re||(Et()?1:c),nt=ke(Q+gt*(fe?-1:1),Q,!(re||Et()));return nt===-1&&O&&!dm(h(),d(!fe),1)?fe?0:X:$e?nt:Ve(nt)}function ke(fe,$e,gt){if(R()||Et()){var nt=lt(fe);nt!==fe&&($e=fe,fe=nt,gt=!1),fe<0||fe>X?!re&&(Za(0,fe,$e,!0)||Za(X,$e,fe,!0))?fe=ve(he(fe)):L?fe=gt?fe<0?-(ie%c||c):ie:fe:t.rewind?fe=fe<0?X:0:fe=-1:gt&&fe!==$e&&(fe=ve(he($e)+(fe<$e?-1:1)))}else fe=-1;return fe}function lt(fe){if(O&&t.trimSpace==="move"&&fe!==Q)for(var $e=h();$e===m(fe,!0)&&Za(fe,0,n.length-1,!t.rewind);)fe<Q?--fe:++fe;return fe}function Ve(fe){return L?(fe+ie)%ie||0:fe}function _e(){for(var fe=ie-(Et()||L&&re?1:c);U&&fe-- >0;)if(m(ie-1,!0)!==m(fe,!0)){fe++;break}return Is(fe,0,ie-1)}function ve(fe){return Is(Et()?fe:c*fe,0,X)}function he(fe){return Et()?Ii(fe,X):Tu((fe>=X?ie-1:fe)/c)}function Se(fe){var $e=u.toIndex(fe);return O?Is($e,0,X):$e}function Fe(fe){fe!==Q&&(ee=Q,Q=fe)}function ze(fe){return fe?ee:Q}function Et(){return!aa(t.focus)||t.isNavigation}function bt(){return n.state.is([Js,oa])&&!!t.waitForTransition}return{mount:C,go:D,scroll:M,getNext:q,getPrev:$,getAdjacent:Ie,getEnd:_e,setIndex:Fe,getIndex:ze,toIndex:ve,toPage:he,toDest:Se,hasFocus:Et,isBusy:bt}}var dA="http://www.w3.org/2000/svg",pA="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",Fa=40;function gA(n,e,t){var r=xt(n),i=r.on,s=r.bind,u=r.emit,h=t.classes,d=t.i18n,m=e.Elements,y=e.Controller,R=m.arrows,N=m.track,U=R,L=m.prev,O=m.next,q,$,Q={};function X(){ie(),i(kn,ee)}function ee(){re(),X()}function ie(){var M=t.arrows;M&&!(L&&O)&&T(),L&&O&&(Ho(Q,{prev:L,next:O}),qo(U,M?"":"none"),Cr(U,$=Ch+"--"+t.direction),M&&(c(),D(),et([L,O],da,N.id),u(V0,L,O)))}function re(){r.destroy(),$r(U,$),q?(rs(R?[L,O]:U),L=O=null):Sr([L,O],Ah)}function c(){i([us,fa,Xt,Zs,wu],D),s(O,"click",Rt(C,">")),s(L,"click",Rt(C,"<"))}function C(M){y.go(M,!0)}function T(){U=R||ks("div",h.arrows),L=I(!0),O=I(!1),q=!0,la(U,[L,O]),!R&&vh(U,N)}function I(M){var b='<button class="'+h.arrow+" "+(M?h.prev:h.next)+'" type="button"><svg xmlns="'+dA+'" viewBox="0 0 '+Fa+" "+Fa+'" width="'+Fa+'" height="'+Fa+'" focusable="false"><path d="'+(t.arrowPath||pA)+'" />';return hm(b)}function D(){if(L&&O){var M=n.index,b=y.getPrev(),Ie=y.getNext(),ke=b>-1&&M<b?d.last:d.prev,lt=Ie>-1&&M>Ie?d.first:d.next;L.disabled=b<0,O.disabled=Ie<0,et(L,Yn,ke),et(O,Yn,lt),u(F0,L,O,b,Ie)}}return{arrows:Q,mount:X,destroy:re,update:D}}var mA=_h+"-interval";function vA(n,e,t){var r=xt(n),i=r.on,s=r.bind,u=r.emit,h=qu(t.interval,n.go.bind(n,">"),c),d=h.isPaused,m=e.Elements,y=e.Elements,R=y.root,N=y.toggle,U=t.autoplay,L,O,q=U==="pause";function $(){U&&(Q(),N&&et(N,da,m.track.id),q||X(),re())}function Q(){t.pauseOnHover&&s(R,"mouseenter mouseleave",function(T){L=T.type==="mouseenter",ie()}),t.pauseOnFocus&&s(R,"focusin focusout",function(T){O=T.type==="focusin",ie()}),N&&s(N,"click",function(){q?X():ee(!0)}),i([Ai,wh,Xt],h.rewind),i(Ai,C)}function X(){d()&&e.Slides.isEnough()&&(h.start(!t.resetProgress),O=L=q=!1,re(),u(ym))}function ee(T){T===void 0&&(T=!0),q=!!T,re(),d()||(h.pause(),u(_m))}function ie(){q||(L||O?ee(!1):X())}function re(){N&&(qr(N,is,!q),et(N,Yn,t.i18n[q?"play":"pause"]))}function c(T){var I=m.bar;I&&tr(I,"width",T*100+"%"),u(B0,T)}function C(T){var I=e.Slides.getAt(T);h.set(I&&+ir(I.slide,mA)||t.interval)}return{mount:$,destroy:h.cancel,play:X,pause:ee,isPaused:d}}function yA(n,e,t){var r=xt(n),i=r.on;function s(){t.cover&&(i(Em,Rt(h,!0)),i([us,kn,Xt],Rt(u,!0)))}function u(d){e.Slides.forEach(function(m){var y=ca(m.container||m.slide,"img");y&&y.src&&h(d,y,m)})}function h(d,m,y){y.style("background",d?'center/cover no-repeat url("'+m.src+'")':"",!0),qo(m,d?"none":"")}return{mount:s,destroy:Rt(u,!1)}}var _A=10,EA=600,TA=.6,wA=1.5,bA=800;function IA(n,e,t){var r=xt(n),i=r.on,s=r.emit,u=n.state.set,h=e.Move,d=h.getPosition,m=h.getLimit,y=h.exceededLimit,R=h.translate,N=n.is(Ws),U,L,O=1;function q(){i(Ai,ee),i([kn,Xt],ie)}function $(c,C,T,I,D){var M=d();if(ee(),T&&(!N||!y())){var b=e.Layout.sliderSize(),Ie=fc(c)*b*Tu(Dn(c)/b)||0;c=h.toPosition(e.Controller.toDest(c%b))+Ie}var ke=dm(M,c,1);O=1,C=ke?0:C||Eu(Dn(c-M)/wA,bA),L=I,U=qu(C,Q,Rt(X,M,c,D),1),u(oa),s(wh),U.start()}function Q(){u($s),L&&L(),s(Zs)}function X(c,C,T,I){var D=d(),M=c+(C-c)*re(I),b=(M-D)*O;R(D+b),N&&!T&&y()&&(O*=TA,Dn(b)<_A&&$(m(y(!0)),EA,!1,L,!0))}function ee(){U&&U.cancel()}function ie(){U&&!U.isPaused()&&(ee(),Q())}function re(c){var C=t.easingFunc;return C?C(c):1-Math.pow(1-c,4)}return{mount:q,destroy:ee,scroll:$,cancel:ie}}var As={passive:!1,capture:!0};function AA(n,e,t){var r=xt(n),i=r.on,s=r.emit,u=r.bind,h=r.unbind,d=n.state,m=e.Move,y=e.Scroll,R=e.Controller,N=e.Elements.track,U=e.Media.reduce,L=e.Direction,O=L.resolve,q=L.orient,$=m.getPosition,Q=m.exceededLimit,X,ee,ie,re,c,C=!1,T,I,D;function M(){u(N,kl,cc,As),u(N,Nl,cc,As),u(N,Lm,Ie,As),u(N,"click",Ve,{capture:!0}),u(N,"dragstart",Ur),i([us,kn],b)}function b(){var pe=t.drag;Lt(!pe),re=pe==="free"}function Ie(pe){if(T=!1,!I){var rt=tt(pe);nt(pe.target)&&(rt||!pe.button)&&(R.isBusy()?Ur(pe,!0):(D=rt?N:window,c=d.is([Js,oa]),ie=null,u(D,kl,ke,As),u(D,Nl,lt,As),m.cancel(),y.cancel(),_e(pe)))}}function ke(pe){if(d.is(Xa)||(d.set(Xa),s(O0)),pe.cancelable)if(c){m.translate(X+gt(Et(pe)));var rt=bt(pe)>vd,qt=C!==(C=Q());(rt||qt)&&_e(pe),T=!0,s(x0),Ur(pe)}else Se(pe)&&(c=he(pe),Ur(pe))}function lt(pe){d.is(Xa)&&(d.set($s),s(L0)),c&&(ve(pe),Ur(pe)),h(D,kl,ke),h(D,Nl,lt),c=!1}function Ve(pe){!I&&T&&Ur(pe,!0)}function _e(pe){ie=ee,ee=pe,X=$()}function ve(pe){var rt=Fe(pe),qt=ze(rt),zt=t.rewind&&t.rewindByDrag;U(!1),re?R.scroll(qt,0,t.snap):n.is(pa)?R.go(q(fc(rt))<0?zt?"<":"-":zt?">":"+"):n.is(Ws)&&C&&zt?R.go(Q(!0)?">":"<"):R.go(R.toDest(qt),!0),U(!0)}function he(pe){var rt=t.dragMinThreshold,qt=Uo(rt),zt=qt&&rt.mouse||0,We=(qt?rt.touch:+rt)||10;return Dn(Et(pe))>(tt(pe)?We:zt)}function Se(pe){return Dn(Et(pe))>Dn(Et(pe,!0))}function Fe(pe){if(n.is(eo)||!C){var rt=bt(pe);if(rt&&rt<vd)return Et(pe)/rt}return 0}function ze(pe){return $()+fc(pe)*Ii(Dn(pe)*(t.flickPower||600),re?1/0:e.Layout.listSize()*(t.flickMaxPages||1))}function Et(pe,rt){return $e(pe,rt)-$e(fe(pe),rt)}function bt(pe){return hc(pe)-hc(fe(pe))}function fe(pe){return ee===pe&&ie||ee}function $e(pe,rt){return(tt(pe)?pe.changedTouches[0]:pe)["page"+O(rt?"Y":"X")]}function gt(pe){return pe/(C&&n.is(Ws)?iA:1)}function nt(pe){var rt=t.noDrag;return!jo(pe,"."+Dm+", ."+Yu)&&(!rt||!jo(pe,rt))}function tt(pe){return typeof TouchEvent<"u"&&pe instanceof TouchEvent}function _n(){return c}function Lt(pe){I=pe}return{mount:M,disable:Lt,isDragging:_n}}var CA={Spacebar:" ",Right:Gu,Left:Wu,Up:bm,Down:Im};function Sh(n){return n=bi(n)?n:n.key,CA[n]||n}var yd="keydown";function SA(n,e,t){var r=xt(n),i=r.on,s=r.bind,u=r.unbind,h=n.root,d=e.Direction.resolve,m,y;function R(){N(),i(kn,U),i(kn,N),i(Ai,O)}function N(){var $=t.keyboard;$&&(m=$==="global"?window:h,s(m,yd,q))}function U(){u(m,yd)}function L($){y=$}function O(){var $=y;y=!0,om(function(){y=$})}function q($){if(!y){var Q=Sh($);Q===d(Wu)?n.go("<"):Q===d(Gu)&&n.go(">")}}return{mount:R,destroy:U,disable:L}}var Po=_h+"-lazy",eu=Po+"-srcset",RA="["+Po+"], ["+eu+"]";function PA(n,e,t){var r=xt(n),i=r.on,s=r.off,u=r.bind,h=r.emit,d=t.lazyLoad==="sequential",m=[fa,Zs],y=[];function R(){t.lazyLoad&&(N(),i(Xt,N))}function N(){Xr(y),U(),d?$():(s(m),i(m,L),L())}function U(){e.Slides.forEach(function(Q){yh(Q.slide,RA).forEach(function(X){var ee=ir(X,Po),ie=ir(X,eu);if(ee!==X.src||ie!==X.srcset){var re=t.classes.spinner,c=X.parentElement,C=ca(c,"."+re)||ks("span",re,c);y.push([X,Q,C]),X.src||qo(X,"none")}})})}function L(){y=y.filter(function(Q){var X=t.perPage*((t.preloadPages||1)+1)-1;return Q[1].isWithin(n.index,X)?O(Q):!0}),y.length||s(m)}function O(Q){var X=Q[0];Cr(Q[1].slide,gc),u(X,"load error",Rt(q,Q)),et(X,"src",ir(X,Po)),et(X,"srcset",ir(X,eu)),Sr(X,Po),Sr(X,eu)}function q(Q,X){var ee=Q[0],ie=Q[1];$r(ie.slide,gc),X.type!=="error"&&(rs(Q[2]),qo(ee,""),h(Em,ee,ie),h(Wo)),d&&$()}function $(){y.length&&O(y.shift())}return{mount:R,destroy:Rt(Xr,y),check:L}}function DA(n,e,t){var r=xt(n),i=r.on,s=r.emit,u=r.bind,h=e.Slides,d=e.Elements,m=e.Controller,y=m.hasFocus,R=m.getIndex,N=m.go,U=e.Direction.resolve,L=d.pagination,O=[],q,$;function Q(){X(),i([kn,Xt,wu],Q);var I=t.pagination;L&&qo(L,I?"":"none"),I&&(i([Ai,wh,Zs],T),ee(),T(),s(U0,{list:q,items:O},C(n.index)))}function X(){q&&(rs(L?Ri(q.children):q),$r(q,$),Xr(O),q=null),r.destroy()}function ee(){var I=n.length,D=t.classes,M=t.i18n,b=t.perPage,Ie=y()?m.getEnd()+1:$o(I/b);q=L||ks("ul",D.pagination,d.track.parentElement),Cr(q,$=Qu+"--"+c()),et(q,Gr,"tablist"),et(q,Yn,M.select),et(q,Ih,c()===zu?"vertical":"");for(var ke=0;ke<Ie;ke++){var lt=ks("li",null,q),Ve=ks("button",{class:D.page,type:"button"},lt),_e=h.getIn(ke).map(function(he){return he.slide.id}),ve=!y()&&b>1?M.pageX:M.slideX;u(Ve,"click",Rt(ie,ke)),t.paginationKeyboard&&u(Ve,"keydown",Rt(re,ke)),et(lt,Gr,"presentation"),et(Ve,Gr,"tab"),et(Ve,da,_e.join(" ")),et(Ve,Yn,dc(ve,ke+1)),et(Ve,Ns,-1),O.push({li:lt,button:Ve,page:ke})}}function ie(I){N(">"+I,!0)}function re(I,D){var M=O.length,b=Sh(D),Ie=c(),ke=-1;b===U(Gu,!1,Ie)?ke=++I%M:b===U(Wu,!1,Ie)?ke=(--I+M)%M:b==="Home"?ke=0:b==="End"&&(ke=M-1);var lt=O[ke];lt&&(cm(lt.button),N(">"+ke),Ur(D,!0))}function c(){return t.paginationDirection||t.direction}function C(I){return O[m.toPage(I)]}function T(){var I=C(R(!0)),D=C(R());if(I){var M=I.button;$r(M,is),Sr(M,fd),et(M,Ns,-1)}if(D){var b=D.button;Cr(b,is),et(b,fd,!0),et(b,Ns,"")}s(j0,{list:q,items:O},I,D)}return{items:O,mount:Q,destroy:X,getAt:C,update:T}}var kA=[" ","Enter"];function NA(n,e,t){var r=t.isNavigation,i=t.slideFocus,s=[];function u(){n.splides.forEach(function(L){L.isParent||(m(n,L.splide),m(L.splide,n))}),r&&y()}function h(){s.forEach(function(L){L.destroy()}),Xr(s)}function d(){h(),u()}function m(L,O){var q=xt(L);q.on(Ai,function($,Q,X){O.go(O.is(eo)?X:$)}),s.push(q)}function y(){var L=xt(n),O=L.on;O(gm,N),O(Tm,U),O([us,kn],R),s.push(L),L.emit(vm,n.splides)}function R(){et(e.Elements.list,Ih,t.direction===zu?"vertical":"")}function N(L){n.go(L.index)}function U(L,O){mh(kA,Sh(O))&&(N(L),Ur(O))}return{setup:Rt(e.Media.set,{slideFocus:aa(i)?r:i},!0),mount:u,destroy:h,remount:d}}function OA(n,e,t){var r=xt(n),i=r.bind,s=0;function u(){t.wheel&&i(e.Elements.track,"wheel",h,As)}function h(m){if(m.cancelable){var y=m.deltaY,R=y<0,N=hc(m),U=t.wheelMinThreshold||0,L=t.wheelSleep||0;Dn(y)>U&&N-s>L&&(n.go(R?"<":">"),s=N),d(R)&&Ur(m)}}function d(m){return!t.releaseWheel||n.state.is(Js)||e.Controller.getAdjacent(m)!==-1}return{mount:u}}var xA=90;function LA(n,e,t){var r=xt(n),i=r.on,s=e.Elements.track,u=t.live&&!t.isNavigation,h=ks("span",Z0),d=qu(xA,Rt(y,!1));function m(){u&&(N(!e.Autoplay.isPaused()),et(s,gd,!0),h.textContent="",i(ym,Rt(N,!0)),i(_m,Rt(N,!1)),i([fa,Zs],Rt(y,!0)))}function y(U){et(s,pd,U),U?(la(s,h),d.start()):(rs(h),d.cancel())}function R(){Sr(s,[dd,gd,pd]),rs(h)}function N(U){u&&et(s,dd,U?"off":"polite")}return{mount:m,disable:N,destroy:R}}var MA=Object.freeze({__proto__:null,Media:$0,Direction:W0,Elements:sA,Slides:aA,Layout:uA,Clones:cA,Move:hA,Controller:fA,Arrows:gA,Autoplay:vA,Cover:yA,Scroll:IA,Drag:AA,Keyboard:SA,LazyLoad:PA,Pagination:DA,Sync:NA,Wheel:OA,Live:LA}),VA={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},FA={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:nA,i18n:VA,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function UA(n,e,t){var r=e.Slides;function i(){xt(n).on([us,Xt],s)}function s(){r.forEach(function(h){h.style("transform","translateX(-"+100*h.index+"%)")})}function u(h,d){r.style("transition","opacity "+t.speed+"ms "+t.easing),om(d)}return{mount:i,start:u,cancel:cc}}function jA(n,e,t){var r=e.Move,i=e.Controller,s=e.Scroll,u=e.Elements.list,h=Rt(tr,u,"transition"),d;function m(){xt(n).bind(u,"transitionend",function(U){U.target===u&&d&&(R(),d())})}function y(U,L){var O=r.toPosition(U,!0),q=r.getPosition(),$=N(U);Dn(O-q)>=1&&$>=1?t.useScroll?s.scroll(O,$,!1,L):(h("transform "+$+"ms "+t.easing),r.translate(O,!0),d=L):(r.jump(U),L())}function R(){h(""),s.cancel()}function N(U){var L=t.rewindSpeed;if(n.is(Ws)&&L){var O=i.getIndex(!0),q=i.getEnd();if(O===0&&U>=q||O>=q&&U===0)return L}return t.speed}return{mount:m,start:y,cancel:R}}var BA=function(){function n(t,r){this.event=xt(),this.Components={},this.state=H0(Cs),this.splides=[],this._o={},this._E={};var i=bi(t)?fm(document,t):t;Ro(i,i+" is invalid."),this.root=i,r=pi({label:ir(i,Yn)||"",labelledby:ir(i,bh)||""},FA,n.defaults,r||{});try{pi(r,JSON.parse(ir(i,_h)))}catch{Ro(!1,"Invalid JSON")}this._o=Object.create(pi({},r))}var e=n.prototype;return e.mount=function(r,i){var s=this,u=this.state,h=this.Components;Ro(u.is([Cs,_u]),"Already mounted!"),u.set(Cs),this._C=h,this._T=i||this._T||(this.is(pa)?UA:jA),this._E=r||this._E;var d=Ho({},MA,this._E,{Transition:this._T});return Yi(d,function(m,y){var R=m(s,h,s._o);h[y]=R,R.setup&&R.setup()}),Yi(h,function(m){m.mount&&m.mount()}),this.emit(us),Cr(this.root,eA),u.set($s),this.emit(cd),this},e.sync=function(r){return this.splides.push({splide:r}),r.splides.push({splide:this,isParent:!0}),this.state.is($s)&&(this._C.Sync.remount(),r.Components.Sync.remount()),this},e.go=function(r){return this._C.Controller.go(r),this},e.on=function(r,i){return this.event.on(r,i),this},e.off=function(r){return this.event.off(r),this},e.emit=function(r){var i;return(i=this.event).emit.apply(i,[r].concat(Ri(arguments,1))),this},e.add=function(r,i){return this._C.Slides.add(r,i),this},e.remove=function(r){return this._C.Slides.remove(r),this},e.is=function(r){return this._o.type===r},e.refresh=function(){return this.emit(Xt),this},e.destroy=function(r){r===void 0&&(r=!0);var i=this.event,s=this.state;return s.is(Cs)?xt(this).on(cd,this.destroy.bind(this,r)):(Yi(this._C,function(u){u.destroy&&u.destroy(r)},!0),i.emit(mm),i.destroy(),r&&Xr(this.splides),s.set(_u)),this},A0(n,[{key:"options",get:function(){return this._o},set:function(r){this._C.Media.set(r,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),n}(),Mm=BA;Mm.defaults={};Mm.STATES=S0;/*!
 * @splidejs/splide-extension-grid
 * Version  : 0.4.1
 * License  : MIT
 * Copyright: 2022 Naotoshi Fujita
 */function HA(n){n.length=0}function Rh(n,e,t){return Array.prototype.slice.call(n,e,t)}function Xu(n){return n.bind.apply(n,[null].concat(Rh(arguments,1)))}function Ph(n,e){return typeof e===n}var Vm=Array.isArray;Xu(Ph,"function");Xu(Ph,"string");Xu(Ph,"undefined");function Fm(n){return Vm(n)?n:[n]}function _d(n,e){Fm(n).forEach(e)}var qA=Object.keys;function $A(n,e,t){if(n){var r=qA(n);r=r;for(var i=0;i<r.length;i++){var s=r[i];if(s!=="__proto__"&&e(n[s],s)===!1)break}}return n}function WA(n){return Rh(arguments,1).forEach(function(e){$A(e,function(t,r){n[r]=e[r]})}),n}var Um="splide";function GA(){var n=[];function e(u,h,d,m){i(u,h,function(y,R,N){var U="addEventListener"in y,L=U?y.removeEventListener.bind(y,R,d,m):y.removeListener.bind(y,d);U?y.addEventListener(R,d,m):y.addListener(d),n.push([y,R,N,d,L])})}function t(u,h,d){i(u,h,function(m,y,R){n=n.filter(function(N){return N[0]===m&&N[1]===y&&N[2]===R&&(!d||N[3]===d)?(N[4](),!1):!0})})}function r(u,h,d){var m,y=!0;return typeof CustomEvent=="function"?m=new CustomEvent(h,{bubbles:y,detail:d}):(m=document.createEvent("CustomEvent"),m.initCustomEvent(h,y,!1,d)),u.dispatchEvent(m),m}function i(u,h,d){_d(u,function(m){m&&_d(h,function(y){y.split(" ").forEach(function(R){var N=R.split(".");d(m,N[0],N[1])})})})}function s(){n.forEach(function(u){u[4]()}),HA(n)}return{bind:e,unbind:t,dispatch:r,destroy:s}}var zA="visible",KA="hidden",Ol="refresh",YA="updated",QA="destroy";function jm(n){var e=n?n.event.bus:document.createDocumentFragment(),t=GA();function r(s,u){t.bind(e,Fm(s).join(" "),function(h){u.apply(u,Vm(h.detail)?h.detail:[])})}function i(s){t.dispatch(e,s,Rh(arguments,1))}return n&&n.event.on(QA,t.destroy),WA(t,{bus:e,on:r,off:Xu(t.unbind,e),emit:i})}var XA=Um,Ju=Um+"__slide",JA=Ju+"__container";function Ed(n){n.length=0}function Zu(n,e,t){return Array.prototype.slice.call(n,e,t)}function Dh(n){return n.bind(null,...Zu(arguments,1))}function el(n,e){return typeof e===n}function ZA(n){return!Oh(n)&&el("object",n)}const kh=Array.isArray;Dh(el,"function");const Nh=Dh(el,"string"),eC=Dh(el,"undefined");function Oh(n){return n===null}function tC(n){return n instanceof HTMLElement}function xh(n){return kh(n)?n:[n]}function Gs(n,e){xh(n).forEach(e)}function Td(n,e){return n.push(...xh(e)),n}function Bm(n,e,t){n&&Gs(e,r=>{r&&n.classList[t?"add":"remove"](r)})}function mc(n,e){Bm(n,Nh(e)?e.split(" "):e,!0)}function tu(n,e){Gs(e,n.appendChild.bind(n))}function nC(n,e){return tC(n)&&(n.msMatchesSelector||n.matches).call(n,e)}function rC(n,e){const t=n?Zu(n.children):[];return e?t.filter(r=>nC(r,e)):t}function wd(n,e){return e?rC(n,e)[0]:n.firstElementChild}const Hm=Object.keys;function qm(n,e,t){if(n){let r=Hm(n);r=r;for(let i=0;i<r.length;i++){const s=r[i];if(s!=="__proto__"&&e(n[s],s)===!1)break}}return n}function iC(n){return Zu(arguments,1).forEach(e=>{qm(e,(t,r)=>{n[r]=e[r]})}),n}function sC(n,e){xh(Hm(n)).forEach(t=>{delete n[t]})}function vc(n,e){Gs(n,t=>{Gs(e,r=>{t&&t.removeAttribute(r)})})}function Lh(n,e,t){ZA(e)?qm(e,(r,i)=>{Lh(n,i,r)}):Gs(n,r=>{Oh(t)||t===""?vc(r,e):r.setAttribute(e,String(t))})}function bd(n,e,t){const r=document.createElement(n);return e&&(Nh(e)?mc(r,e):Lh(r,e)),t&&tu(t,r),r}function Fr(n,e,t){if(eC(t))return getComputedStyle(n)[e];Oh(t)||(n.style[e]=`${t}`)}function oC(n,e){return n&&n.classList.contains(e)}function aC(n){Gs(n,e=>{e&&e.parentNode&&e.parentNode.removeChild(e)})}function Id(n,e){return e?Zu(n.querySelectorAll(e)):[]}function Ad(n,e){Bm(n,e,!1)}function Ua(n){return Nh(n)?n:n?`${n}px`:""}const uC="splide";function lC(n,e){if(!n)throw new Error(`[${uC}] ${e}`)}const{min:cC,max:HC,floor:qC,ceil:$C,abs:WC}=Math;function hC(n){return n<10?`0${n}`:`${n}`}const $m=`${Ju}__row`,yc=`${Ju}--col`,fC={rows:1,cols:1,dimensions:[],gap:{}};function dC(n){function e(){const{rows:i,cols:s,dimensions:u}=n;return kh(u)&&u.length?u:[[i,s]]}function t(i){const s=e();return s[cC(i,s.length-1)]}function r(i){const s=e();let u,h,d=0;for(let m=0;m<s.length;m++){const y=s[m];if(u=y[0]||1,h=y[1]||1,d+=u*h,i<d)break}return lC(u&&h,"Invalid dimension"),[u,h]}return{get:t,getAt:r}}function pC(n,e,t){const{on:r,destroy:i}=jm(n),{Components:s,options:u}=n,{resolve:h}=s.Direction,{forEach:d}=s.Slides;function m(){R(),u.slideFocus&&(r(zA,Q),r(KA,X))}function y(){d(ee=>{const{slide:ie}=ee;$(ie,!1),O(ie).forEach(re=>{vc(re,"style")}),q(ie).forEach(re=>{L(re,!0),vc(re,"style")})}),i()}function R(){d(ee=>{const{slide:ie}=ee,[re,c]=t.get(ee.isClone?ee.slideIndex:ee.index);N(re,ie),U(c,ie),q(ee.slide).forEach((C,T)=>{C.id=`${ee.slide.id}-col${hC(T+1)}`,n.options.cover&&L(C)})})}function N(ee,ie){const{row:re}=e.gap,c=`calc(${100/ee}%${re?` - ${Ua(re)} * ${(ee-1)/ee}`:""})`;O(ie).forEach((C,T,I)=>{Fr(C,"height",c),Fr(C,"display","flex"),Fr(C,"margin",`0 0 ${Ua(re)} 0`),Fr(C,"padding",0),T===I.length-1&&Fr(C,"marginBottom",0)})}function U(ee,ie){const{col:re}=e.gap,c=`calc(${100/ee}%${re?` - ${Ua(re)} * ${(ee-1)/ee}`:""})`;q(ie).forEach((C,T,I)=>{Fr(C,"width",c),T!==I.length-1&&Fr(C,h("marginRight"),Ua(re))})}function L(ee,ie){const re=wd(ee,`.${JA}`),c=wd(re||ee,"img");c&&c.src&&(Fr(re||ee,"background",ie?"":`center/cover no-repeat url("${c.src}")`),Fr(c,"display",ie?"":"none"))}function O(ee){return Id(ee,`.${$m}`)}function q(ee){return Id(ee,`.${yc}`)}function $(ee,ie){q(ee).forEach(re=>{Lh(re,"tabindex",ie?0:null)})}function Q(ee){$(ee.slide,!0)}function X(ee){$(ee.slide,!1)}return{mount:m,destroy:y}}function GC(n,e,t){const{on:r,off:i}=jm(n),{Elements:s}=e,u={},h=dC(u),d=pC(n,u,h),m=`${XA}--grid`,y=[];function R(){N(),r(YA,N)}function N(){sC(u),iC(u,fC,t.grid||{}),X()?(U(),Td(y,s.slides),mc(n.root,m),tu(s.list,q()),i(Ol),r(Ol,O),L()):ee()&&(U(),L())}function U(){if(ee()){const{slides:ie}=s;d.destroy(),y.forEach(re=>{Ad(re,yc),tu(s.list,re)}),aC(ie),Ad(n.root,m),Ed(ie),Td(ie,y),Ed(y),i(Ol)}}function L(){n.refresh()}function O(){ee()&&d.mount()}function q(){const ie=[];let re=0,c=0,C,T;return y.forEach((I,D)=>{const[M,b]=h.getAt(D);c||(re||(C=bd(I.tagName,Ju),ie.push(C)),T=$(M,I,C)),Q(b,I,T),++c>=b&&(c=0,re=++re>=M?0:re)}),ie}function $(ie,re,c){const C=re.tagName.toLowerCase()==="li"?"ul":"div";return bd(C,$m,c)}function Q(ie,re,c){return mc(re,yc),tu(c,re),re}function X(){if(t.grid){const{rows:ie,cols:re,dimensions:c}=u;return ie>1||re>1||kh(c)&&c.length>0}return!1}function ee(){return oC(n.root,m)}return{mount:R,destroy:U}}var xl=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Os={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},zo={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Pn=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},Gn=function(n){return n===!0?1:0};function Cd(n,e){var t;return function(){var r=this,i=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,i)},e)}}var Ll=function(n){return n instanceof Array?n:[n]};function In(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function yt(n,e,t){var r=window.document.createElement(n);return e=e||"",t=t||"",r.className=e,t!==void 0&&(r.textContent=t),r}function ja(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Wm(n,e){if(e(n))return n;if(n.parentNode)return Wm(n.parentNode,e)}function Ba(n,e){var t=yt("div","numInputWrapper"),r=yt("input","numInput "+n),i=yt("span","arrowUp"),s=yt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var u in e)r.setAttribute(u,e[u]);return t.appendChild(r),t.appendChild(i),t.appendChild(s),t}function Mn(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var Ml=function(){},bu=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},gC={D:Ml,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*Gn(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var r=parseInt(e),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:Ml,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:Ml,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},$i={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Do={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[Do.w(n,e,t)]},F:function(n,e,t){return bu(Do.n(n,e,t)-1,!1,e)},G:function(n,e,t){return Pn(Do.h(n,e,t))},H:function(n){return Pn(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[Gn(n.getHours()>11)]},M:function(n,e){return bu(n.getMonth(),!0,e)},S:function(n){return Pn(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return Pn(n.getFullYear(),4)},d:function(n){return Pn(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return Pn(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return Pn(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}},Gm=function(n){var e=n.config,t=e===void 0?Os:e,r=n.l10n,i=r===void 0?zo:r,s=n.isMobile,u=s===void 0?!1:s;return function(h,d,m){var y=m||i;return t.formatDate!==void 0&&!u?t.formatDate(h,d,y):d.split("").map(function(R,N,U){return Do[R]&&U[N-1]!=="\\"?Do[R](h,y,t):R!=="\\"?R:""}).join("")}},_c=function(n){var e=n.config,t=e===void 0?Os:e,r=n.l10n,i=r===void 0?zo:r;return function(s,u,h,d){if(!(s!==0&&!s)){var m=d||i,y,R=s;if(s instanceof Date)y=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)y=new Date(s);else if(typeof s=="string"){var N=u||(t||Os).dateFormat,U=String(s).trim();if(U==="today")y=new Date,h=!0;else if(t&&t.parseDate)y=t.parseDate(s,N);else if(/Z$/.test(U)||/GMT$/.test(U))y=new Date(s);else{for(var L=void 0,O=[],q=0,$=0,Q="";q<N.length;q++){var X=N[q],ee=X==="\\",ie=N[q-1]==="\\"||ee;if($i[X]&&!ie){Q+=$i[X];var re=new RegExp(Q).exec(s);re&&(L=!0)&&O[X!=="Y"?"push":"unshift"]({fn:gC[X],val:re[++$]})}else ee||(Q+=".")}y=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),O.forEach(function(c){var C=c.fn,T=c.val;return y=C(y,T,m)||y}),y=L?y:void 0}}if(!(y instanceof Date&&!isNaN(y.getTime()))){t.errorHandler(new Error("Invalid date provided: "+R));return}return h===!0&&y.setHours(0,0,0,0),y}}};function Vn(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var mC=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},Vl=function(n,e,t){return n*3600+e*60+t},vC=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},yC={DAY:864e5};function Fl(n){var e=n.defaultHour,t=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),s=n.minDate.getMinutes(),u=n.minDate.getSeconds();e<i&&(e=i),e===i&&t<s&&(t=s),e===i&&t===s&&r<u&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var h=n.maxDate.getHours(),d=n.maxDate.getMinutes();e=Math.min(e,h),e===h&&(t=Math.min(d,t)),e===h&&t===d&&(r=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=function(h){h&&Object.keys(h).forEach(function(d){return n[d]=h[d]})},i=0,s=e;i<s.length;i++){var u=s[i];r(u)}return n});var mn=function(){return mn=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},mn.apply(this,arguments)},Sd=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],u=0,h=s.length;u<h;u++,i++)r[i]=s[u];return r},_C=300;function EC(n,e){var t={config:mn(mn({},Os),Yt.defaultConfig),l10n:zo};t.parseDate=_c({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=O,t._setHoursFromDate=N,t._positionCalendar=An,t.changeMonth=Se,t.changeYear=$e,t.clear=Fe,t.close=ze,t.onMouseOver=Lt,t._createElement=yt,t.createDay=re,t.destroy=Et,t.isEnabled=gt,t.jumpToDate=Q,t.updateValue=Ct,t.open=rt,t.redraw=rn,t.set=ct,t.setDate=ge,t.toggle=$t;function r(){t.utils={getDaysInMonth:function(S,P){return S===void 0&&(S=t.currentMonth),P===void 0&&(P=t.currentYear),S===1&&(P%4===0&&P%100!==0||P%400===0)?29:t.l10n.daysInMonth[S]}}}function i(){t.element=t.input=n,t.isOpen=!1,zt(),Mt(),ye(),ce(),r(),t.isMobile||ie(),$(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&N(t.config.noCalendar?t.latestSelectedDateObj:void 0),Ct(!1)),h();var S=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&S&&An(),Qe("onReady")}function s(){var S;return((S=t.calendarContainer)===null||S===void 0?void 0:S.getRootNode()).activeElement||document.activeElement}function u(S){return S.bind(t)}function h(){var S=t.config;S.weekNumbers===!1&&S.showMonths===1||S.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var P=(t.days.offsetWidth+1)*S.showMonths;t.daysContainer.style.width=P+"px",t.calendarContainer.style.width=P+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function d(S){if(t.selectedDates.length===0){var P=t.config.minDate===void 0||Vn(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),B=Fl(t.config);P.setHours(B.hours,B.minutes,B.seconds,P.getMilliseconds()),t.selectedDates=[P],t.latestSelectedDateObj=P}S!==void 0&&S.type!=="blur"&&Zr(S);var Z=t._input.value;R(),Ct(),t._input.value!==Z&&t._debouncedChange()}function m(S,P){return S%12+12*Gn(P===t.l10n.amPM[1])}function y(S){switch(S%24){case 0:case 12:return 12;default:return S%12}}function R(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var S=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,P=(parseInt(t.minuteElement.value,10)||0)%60,B=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(S=m(S,t.amPM.textContent));var Z=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&Vn(t.latestSelectedDateObj,t.config.minDate,!0)===0,le=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&Vn(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var me=Vl(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Pe=Vl(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),be=Vl(S,P,B);if(be>Pe&&be<me){var Me=vC(me);S=Me[0],P=Me[1],B=Me[2]}}else{if(le){var Ee=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;S=Math.min(S,Ee.getHours()),S===Ee.getHours()&&(P=Math.min(P,Ee.getMinutes())),P===Ee.getMinutes()&&(B=Math.min(B,Ee.getSeconds()))}if(Z){var Ne=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;S=Math.max(S,Ne.getHours()),S===Ne.getHours()&&P<Ne.getMinutes()&&(P=Ne.getMinutes()),P===Ne.getMinutes()&&(B=Math.max(B,Ne.getSeconds()))}}U(S,P,B)}}function N(S){var P=S||t.latestSelectedDateObj;P&&P instanceof Date&&U(P.getHours(),P.getMinutes(),P.getSeconds())}function U(S,P,B){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(S%24,P,B||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=Pn(t.config.time_24hr?S:(12+S)%12+12*Gn(S%12===0)),t.minuteElement.value=Pn(P),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[Gn(S>=12)]),t.secondElement!==void 0&&(t.secondElement.value=Pn(B)))}function L(S){var P=Mn(S),B=parseInt(P.value)+(S.delta||0);(B/1e3>1||S.key==="Enter"&&!/[^\d]/.test(B.toString()))&&$e(B)}function O(S,P,B,Z){if(P instanceof Array)return P.forEach(function(le){return O(S,le,B,Z)});if(S instanceof Array)return S.forEach(function(le){return O(le,P,B,Z)});S.addEventListener(P,B,Z),t._handlers.push({remove:function(){return S.removeEventListener(P,B,Z)}})}function q(){Qe("onChange")}function $(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(B){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+B+"]"),function(Z){return O(Z,"click",t[B])})}),t.isMobile){kt();return}var S=Cd(pe,50);if(t._debouncedChange=Cd(q,_C),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&O(t.daysContainer,"mouseover",function(B){t.config.mode==="range"&&Lt(Mn(B))}),O(t._input,"keydown",_n),t.calendarContainer!==void 0&&O(t.calendarContainer,"keydown",_n),!t.config.inline&&!t.config.static&&O(window,"resize",S),window.ontouchstart!==void 0?O(window.document,"touchstart",fe):O(window.document,"mousedown",fe),O(window.document,"focus",fe,{capture:!0}),t.config.clickOpens===!0&&(O(t._input,"focus",t.open),O(t._input,"click",t.open)),t.daysContainer!==void 0&&(O(t.monthNav,"click",fn),O(t.monthNav,["keyup","increment"],L),O(t.daysContainer,"click",Cn)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var P=function(B){return Mn(B).select()};O(t.timeContainer,["increment"],d),O(t.timeContainer,"blur",d,{capture:!0}),O(t.timeContainer,"click",X),O([t.hourElement,t.minuteElement],["focus","click"],P),t.secondElement!==void 0&&O(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&O(t.amPM,"click",function(B){d(B)})}t.config.allowInput&&O(t._input,"blur",tt)}function Q(S,P){var B=S!==void 0?t.parseDate(S):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),Z=t.currentYear,le=t.currentMonth;try{B!==void 0&&(t.currentYear=B.getFullYear(),t.currentMonth=B.getMonth())}catch(me){me.message="Invalid date supplied: "+B,t.config.errorHandler(me)}P&&t.currentYear!==Z&&(Qe("onYearChange"),b()),P&&(t.currentYear!==Z||t.currentMonth!==le)&&Qe("onMonthChange"),t.redraw()}function X(S){var P=Mn(S);~P.className.indexOf("arrow")&&ee(S,P.classList.contains("arrowUp")?1:-1)}function ee(S,P,B){var Z=S&&Mn(S),le=B||Z&&Z.parentNode&&Z.parentNode.firstChild,me=jn("increment");me.delta=P,le&&le.dispatchEvent(me)}function ie(){var S=window.document.createDocumentFragment();if(t.calendarContainer=yt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(S.appendChild(lt()),t.innerContainer=yt("div","flatpickr-innerContainer"),t.config.weekNumbers){var P=he(),B=P.weekWrapper,Z=P.weekNumbers;t.innerContainer.appendChild(B),t.weekNumbers=Z,t.weekWrapper=B}t.rContainer=yt("div","flatpickr-rContainer"),t.rContainer.appendChild(_e()),t.daysContainer||(t.daysContainer=yt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),M(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),S.appendChild(t.innerContainer)}t.config.enableTime&&S.appendChild(Ve()),In(t.calendarContainer,"rangeMode",t.config.mode==="range"),In(t.calendarContainer,"animate",t.config.animate===!0),In(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(S);var le=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!le&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var me=yt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(me,t.element),me.appendChild(t.element),t.altInput&&me.appendChild(t.altInput),me.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function re(S,P,B,Z){var le=gt(P,!0),me=yt("span",S,P.getDate().toString());return me.dateObj=P,me.$i=Z,me.setAttribute("aria-label",t.formatDate(P,t.config.ariaDateFormat)),S.indexOf("hidden")===-1&&Vn(P,t.now)===0&&(t.todayDateElem=me,me.classList.add("today"),me.setAttribute("aria-current","date")),le?(me.tabIndex=-1,Bn(P)&&(me.classList.add("selected"),t.selectedDateElem=me,t.config.mode==="range"&&(In(me,"startRange",t.selectedDates[0]&&Vn(P,t.selectedDates[0],!0)===0),In(me,"endRange",t.selectedDates[1]&&Vn(P,t.selectedDates[1],!0)===0),S==="nextMonthDay"&&me.classList.add("inRange")))):me.classList.add("flatpickr-disabled"),t.config.mode==="range"&&Zn(P)&&!Bn(P)&&me.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&S!=="prevMonthDay"&&Z%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(P)+"</span>"),Qe("onDayCreate",me),me}function c(S){S.focus(),t.config.mode==="range"&&Lt(S)}function C(S){for(var P=S>0?0:t.config.showMonths-1,B=S>0?t.config.showMonths:-1,Z=P;Z!=B;Z+=S)for(var le=t.daysContainer.children[Z],me=S>0?0:le.children.length-1,Pe=S>0?le.children.length:-1,be=me;be!=Pe;be+=S){var Me=le.children[be];if(Me.className.indexOf("hidden")===-1&&gt(Me.dateObj))return Me}}function T(S,P){for(var B=S.className.indexOf("Month")===-1?S.dateObj.getMonth():t.currentMonth,Z=P>0?t.config.showMonths:-1,le=P>0?1:-1,me=B-t.currentMonth;me!=Z;me+=le)for(var Pe=t.daysContainer.children[me],be=B-t.currentMonth===me?S.$i+P:P<0?Pe.children.length-1:0,Me=Pe.children.length,Ee=be;Ee>=0&&Ee<Me&&Ee!=(P>0?Me:-1);Ee+=le){var Ne=Pe.children[Ee];if(Ne.className.indexOf("hidden")===-1&&gt(Ne.dateObj)&&Math.abs(S.$i-Ee)>=Math.abs(P))return c(Ne)}t.changeMonth(le),I(C(le),0)}function I(S,P){var B=s(),Z=nt(B||document.body),le=S!==void 0?S:Z?B:t.selectedDateElem!==void 0&&nt(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&nt(t.todayDateElem)?t.todayDateElem:C(P>0?1:-1);le===void 0?t._input.focus():Z?T(le,P):c(le)}function D(S,P){for(var B=(new Date(S,P,1).getDay()-t.l10n.firstDayOfWeek+7)%7,Z=t.utils.getDaysInMonth((P-1+12)%12,S),le=t.utils.getDaysInMonth(P,S),me=window.document.createDocumentFragment(),Pe=t.config.showMonths>1,be=Pe?"prevMonthDay hidden":"prevMonthDay",Me=Pe?"nextMonthDay hidden":"nextMonthDay",Ee=Z+1-B,Ne=0;Ee<=Z;Ee++,Ne++)me.appendChild(re("flatpickr-day "+be,new Date(S,P-1,Ee),Ee,Ne));for(Ee=1;Ee<=le;Ee++,Ne++)me.appendChild(re("flatpickr-day",new Date(S,P,Ee),Ee,Ne));for(var mt=le+1;mt<=42-B&&(t.config.showMonths===1||Ne%7!==0);mt++,Ne++)me.appendChild(re("flatpickr-day "+Me,new Date(S,P+1,mt%le),mt,Ne));var Kt=yt("div","dayContainer");return Kt.appendChild(me),Kt}function M(){if(t.daysContainer!==void 0){ja(t.daysContainer),t.weekNumbers&&ja(t.weekNumbers);for(var S=document.createDocumentFragment(),P=0;P<t.config.showMonths;P++){var B=new Date(t.currentYear,t.currentMonth,1);B.setMonth(t.currentMonth+P),S.appendChild(D(B.getFullYear(),B.getMonth()))}t.daysContainer.appendChild(S),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Lt()}}function b(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var S=function(Z){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&Z<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&Z>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var P=0;P<12;P++)if(S(P)){var B=yt("option","flatpickr-monthDropdown-month");B.value=new Date(t.currentYear,P).getMonth().toString(),B.textContent=bu(P,t.config.shorthandCurrentMonth,t.l10n),B.tabIndex=-1,t.currentMonth===P&&(B.selected=!0),t.monthsDropdownContainer.appendChild(B)}}}function Ie(){var S=yt("div","flatpickr-month"),P=window.document.createDocumentFragment(),B;t.config.showMonths>1||t.config.monthSelectorType==="static"?B=yt("span","cur-month"):(t.monthsDropdownContainer=yt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),O(t.monthsDropdownContainer,"change",function(Pe){var be=Mn(Pe),Me=parseInt(be.value,10);t.changeMonth(Me-t.currentMonth),Qe("onMonthChange")}),b(),B=t.monthsDropdownContainer);var Z=Ba("cur-year",{tabindex:"-1"}),le=Z.getElementsByTagName("input")[0];le.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&le.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(le.setAttribute("max",t.config.maxDate.getFullYear().toString()),le.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var me=yt("div","flatpickr-current-month");return me.appendChild(B),me.appendChild(Z),P.appendChild(me),S.appendChild(P),{container:S,yearElement:le,monthElement:B}}function ke(){ja(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var S=t.config.showMonths;S--;){var P=Ie();t.yearElements.push(P.yearElement),t.monthElements.push(P.monthElement),t.monthNav.appendChild(P.container)}t.monthNav.appendChild(t.nextMonthNav)}function lt(){return t.monthNav=yt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=yt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=yt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,ke(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(S){t.__hidePrevMonthArrow!==S&&(In(t.prevMonthNav,"flatpickr-disabled",S),t.__hidePrevMonthArrow=S)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(S){t.__hideNextMonthArrow!==S&&(In(t.nextMonthNav,"flatpickr-disabled",S),t.__hideNextMonthArrow=S)}}),t.currentYearElement=t.yearElements[0],Tt(),t.monthNav}function Ve(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var S=Fl(t.config);t.timeContainer=yt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var P=yt("span","flatpickr-time-separator",":"),B=Ba("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=B.getElementsByTagName("input")[0];var Z=Ba("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=Z.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=Pn(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?S.hours:y(S.hours)),t.minuteElement.value=Pn(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():S.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(B),t.timeContainer.appendChild(P),t.timeContainer.appendChild(Z),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var le=Ba("flatpickr-second");t.secondElement=le.getElementsByTagName("input")[0],t.secondElement.value=Pn(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():S.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(yt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(le)}return t.config.time_24hr||(t.amPM=yt("span","flatpickr-am-pm",t.l10n.amPM[Gn((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function _e(){t.weekdayContainer?ja(t.weekdayContainer):t.weekdayContainer=yt("div","flatpickr-weekdays");for(var S=t.config.showMonths;S--;){var P=yt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(P)}return ve(),t.weekdayContainer}function ve(){if(t.weekdayContainer){var S=t.l10n.firstDayOfWeek,P=Sd(t.l10n.weekdays.shorthand);S>0&&S<P.length&&(P=Sd(P.splice(S,P.length),P.splice(0,S)));for(var B=t.config.showMonths;B--;)t.weekdayContainer.children[B].innerHTML=`
      <span class='flatpickr-weekday'>
        `+P.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function he(){t.calendarContainer.classList.add("hasWeeks");var S=yt("div","flatpickr-weekwrapper");S.appendChild(yt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var P=yt("div","flatpickr-weeks");return S.appendChild(P),{weekWrapper:S,weekNumbers:P}}function Se(S,P){P===void 0&&(P=!0);var B=P?S:S-t.currentMonth;B<0&&t._hidePrevMonthArrow===!0||B>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=B,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,Qe("onYearChange"),b()),M(),Qe("onMonthChange"),Tt())}function Fe(S,P){if(S===void 0&&(S=!0),P===void 0&&(P=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,P===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var B=Fl(t.config),Z=B.hours,le=B.minutes,me=B.seconds;U(Z,le,me)}t.redraw(),S&&Qe("onChange")}function ze(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),Qe("onClose")}function Et(){t.config!==void 0&&Qe("onDestroy");for(var S=t._handlers.length;S--;)t._handlers[S].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var P=t.calendarContainer.parentNode;if(P.lastChild&&P.removeChild(P.lastChild),P.parentNode){for(;P.firstChild;)P.parentNode.insertBefore(P.firstChild,P);P.parentNode.removeChild(P)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(B){try{delete t[B]}catch{}})}function bt(S){return t.calendarContainer.contains(S)}function fe(S){if(t.isOpen&&!t.config.inline){var P=Mn(S),B=bt(P),Z=P===t.input||P===t.altInput||t.element.contains(P)||S.path&&S.path.indexOf&&(~S.path.indexOf(t.input)||~S.path.indexOf(t.altInput)),le=!Z&&!B&&!bt(S.relatedTarget),me=!t.config.ignoredFocusElements.some(function(Pe){return Pe.contains(P)});le&&me&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&d(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function $e(S){if(!(!S||t.config.minDate&&S<t.config.minDate.getFullYear()||t.config.maxDate&&S>t.config.maxDate.getFullYear())){var P=S,B=t.currentYear!==P;t.currentYear=P||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),B&&(t.redraw(),Qe("onYearChange"),b())}}function gt(S,P){var B;P===void 0&&(P=!0);var Z=t.parseDate(S,void 0,P);if(t.config.minDate&&Z&&Vn(Z,t.config.minDate,P!==void 0?P:!t.minDateHasTime)<0||t.config.maxDate&&Z&&Vn(Z,t.config.maxDate,P!==void 0?P:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(Z===void 0)return!1;for(var le=!!t.config.enable,me=(B=t.config.enable)!==null&&B!==void 0?B:t.config.disable,Pe=0,be=void 0;Pe<me.length;Pe++){if(be=me[Pe],typeof be=="function"&&be(Z))return le;if(be instanceof Date&&Z!==void 0&&be.getTime()===Z.getTime())return le;if(typeof be=="string"){var Me=t.parseDate(be,void 0,!0);return Me&&Me.getTime()===Z.getTime()?le:!le}else if(typeof be=="object"&&Z!==void 0&&be.from&&be.to&&Z.getTime()>=be.from.getTime()&&Z.getTime()<=be.to.getTime())return le}return!le}function nt(S){return t.daysContainer!==void 0?S.className.indexOf("hidden")===-1&&S.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(S):!1}function tt(S){var P=S.target===t._input,B=t._input.value.trimEnd()!==ur();P&&B&&!(S.relatedTarget&&bt(S.relatedTarget))&&t.setDate(t._input.value,!0,S.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function _n(S){var P=Mn(S),B=t.config.wrap?n.contains(P):P===t._input,Z=t.config.allowInput,le=t.isOpen&&(!Z||!B),me=t.config.inline&&B&&!Z;if(S.keyCode===13&&B){if(Z)return t.setDate(t._input.value,!0,P===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),P.blur();t.open()}else if(bt(P)||le||me){var Pe=!!t.timeContainer&&t.timeContainer.contains(P);switch(S.keyCode){case 13:Pe?(S.preventDefault(),d(),En()):Cn(S);break;case 27:S.preventDefault(),En();break;case 8:case 46:B&&!t.config.allowInput&&(S.preventDefault(),t.clear());break;case 37:case 39:if(!Pe&&!B){S.preventDefault();var be=s();if(t.daysContainer!==void 0&&(Z===!1||be&&nt(be))){var Me=S.keyCode===39?1:-1;S.ctrlKey?(S.stopPropagation(),Se(Me),I(C(1),0)):I(void 0,Me)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:S.preventDefault();var Ee=S.keyCode===40?1:-1;t.daysContainer&&P.$i!==void 0||P===t.input||P===t.altInput?S.ctrlKey?(S.stopPropagation(),$e(t.currentYear-Ee),I(C(1),0)):Pe||I(void 0,Ee*7):P===t.currentYearElement?$e(t.currentYear-Ee):t.config.enableTime&&(!Pe&&t.hourElement&&t.hourElement.focus(),d(S),t._debouncedChange());break;case 9:if(Pe){var Ne=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(sn){return sn}),mt=Ne.indexOf(P);if(mt!==-1){var Kt=Ne[mt+(S.shiftKey?-1:1)];S.preventDefault(),(Kt||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(P)&&S.shiftKey&&(S.preventDefault(),t._input.focus());break}}if(t.amPM!==void 0&&P===t.amPM)switch(S.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],R(),Ct();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],R(),Ct();break}(B||bt(P))&&Qe("onKeyDown",S)}function Lt(S,P){if(P===void 0&&(P="flatpickr-day"),!(t.selectedDates.length!==1||S&&(!S.classList.contains(P)||S.classList.contains("flatpickr-disabled")))){for(var B=S?S.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),Z=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),le=Math.min(B,t.selectedDates[0].getTime()),me=Math.max(B,t.selectedDates[0].getTime()),Pe=!1,be=0,Me=0,Ee=le;Ee<me;Ee+=yC.DAY)gt(new Date(Ee),!0)||(Pe=Pe||Ee>le&&Ee<me,Ee<Z&&(!be||Ee>be)?be=Ee:Ee>Z&&(!Me||Ee<Me)&&(Me=Ee));var Ne=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+P));Ne.forEach(function(mt){var Kt=mt.dateObj,sn=Kt.getTime(),lr=be>0&&sn<be||Me>0&&sn>Me;if(lr){mt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Nn){mt.classList.remove(Nn)});return}else if(Pe&&!lr)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Nn){mt.classList.remove(Nn)}),S!==void 0&&(S.classList.add(B<=t.selectedDates[0].getTime()?"startRange":"endRange"),Z<B&&sn===Z?mt.classList.add("startRange"):Z>B&&sn===Z&&mt.classList.add("endRange"),sn>=be&&(Me===0||sn<=Me)&&mC(sn,Z,B)&&mt.classList.add("inRange"))})}}function pe(){t.isOpen&&!t.config.static&&!t.config.inline&&An()}function rt(S,P){if(P===void 0&&(P=t._positionElement),t.isMobile===!0){if(S){S.preventDefault();var B=Mn(S);B&&B.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),Qe("onOpen");return}else if(t._input.disabled||t.config.inline)return;var Z=t.isOpen;t.isOpen=!0,Z||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),Qe("onOpen"),An(P)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(S===void 0||!t.timeContainer.contains(S.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function qt(S){return function(P){var B=t.config["_"+S+"Date"]=t.parseDate(P,t.config.dateFormat),Z=t.config["_"+(S==="min"?"max":"min")+"Date"];B!==void 0&&(t[S==="min"?"minDateHasTime":"maxDateHasTime"]=B.getHours()>0||B.getMinutes()>0||B.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(le){return gt(le)}),!t.selectedDates.length&&S==="min"&&N(B),Ct()),t.daysContainer&&(rn(),B!==void 0?t.currentYearElement[S]=B.getFullYear().toString():t.currentYearElement.removeAttribute(S),t.currentYearElement.disabled=!!Z&&B!==void 0&&Z.getFullYear()===B.getFullYear())}}function zt(){var S=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],P=mn(mn({},JSON.parse(JSON.stringify(n.dataset||{}))),e),B={};t.config.parseDate=P.parseDate,t.config.formatDate=P.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Ne){t.config._enable=F(Ne)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Ne){t.config._disable=F(Ne)}});var Z=P.mode==="time";if(!P.dateFormat&&(P.enableTime||Z)){var le=Yt.defaultConfig.dateFormat||Os.dateFormat;B.dateFormat=P.noCalendar||Z?"H:i"+(P.enableSeconds?":S":""):le+" H:i"+(P.enableSeconds?":S":"")}if(P.altInput&&(P.enableTime||Z)&&!P.altFormat){var me=Yt.defaultConfig.altFormat||Os.altFormat;B.altFormat=P.noCalendar||Z?"h:i"+(P.enableSeconds?":S K":" K"):me+(" h:i"+(P.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:qt("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:qt("max")});var Pe=function(Ne){return function(mt){t.config[Ne==="min"?"_minTime":"_maxTime"]=t.parseDate(mt,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Pe("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Pe("max")}),P.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,B,P);for(var be=0;be<S.length;be++)t.config[S[be]]=t.config[S[be]]===!0||t.config[S[be]]==="true";xl.filter(function(Ne){return t.config[Ne]!==void 0}).forEach(function(Ne){t.config[Ne]=Ll(t.config[Ne]||[]).map(u)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var be=0;be<t.config.plugins.length;be++){var Me=t.config.plugins[be](t)||{};for(var Ee in Me)xl.indexOf(Ee)>-1?t.config[Ee]=Ll(Me[Ee]).map(u).concat(t.config[Ee]):typeof P[Ee]>"u"&&(t.config[Ee]=Me[Ee])}P.altInputClass||(t.config.altInputClass=We().className+" "+t.config.altInputClass),Qe("onParseConfig")}function We(){return t.config.wrap?n.querySelector("[data-input]"):n}function Mt(){typeof t.config.locale!="object"&&typeof Yt.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=mn(mn({},Yt.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Yt.l10ns[t.config.locale]:void 0),$i.D="("+t.l10n.weekdays.shorthand.join("|")+")",$i.l="("+t.l10n.weekdays.longhand.join("|")+")",$i.M="("+t.l10n.months.shorthand.join("|")+")",$i.F="("+t.l10n.months.longhand.join("|")+")",$i.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var S=mn(mn({},e),JSON.parse(JSON.stringify(n.dataset||{})));S.time_24hr===void 0&&Yt.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=Gm(t),t.parseDate=_c({config:t.config,l10n:t.l10n})}function An(S){if(typeof t.config.position=="function")return void t.config.position(t,S);if(t.calendarContainer!==void 0){Qe("onPreCalendarPosition");var P=S||t._positionElement,B=Array.prototype.reduce.call(t.calendarContainer.children,function(ki,cs){return ki+cs.offsetHeight},0),Z=t.calendarContainer.offsetWidth,le=t.config.position.split(" "),me=le[0],Pe=le.length>1?le[1]:null,be=P.getBoundingClientRect(),Me=window.innerHeight-be.bottom,Ee=me==="above"||me!=="below"&&Me<B&&be.top>B,Ne=window.pageYOffset+be.top+(Ee?-B-2:P.offsetHeight+2);if(In(t.calendarContainer,"arrowTop",!Ee),In(t.calendarContainer,"arrowBottom",Ee),!t.config.inline){var mt=window.pageXOffset+be.left,Kt=!1,sn=!1;Pe==="center"?(mt-=(Z-be.width)/2,Kt=!0):Pe==="right"&&(mt-=Z-be.width,sn=!0),In(t.calendarContainer,"arrowLeft",!Kt&&!sn),In(t.calendarContainer,"arrowCenter",Kt),In(t.calendarContainer,"arrowRight",sn);var lr=window.document.body.offsetWidth-(window.pageXOffset+be.right),Nn=mt+Z>window.document.body.offsetWidth,ls=lr+Z>window.document.body.offsetWidth;if(In(t.calendarContainer,"rightMost",Nn),!t.config.static)if(t.calendarContainer.style.top=Ne+"px",!Nn)t.calendarContainer.style.left=mt+"px",t.calendarContainer.style.right="auto";else if(!ls)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=lr+"px";else{var cr=Un();if(cr===void 0)return;var ei=window.document.body.offsetWidth,on=Math.max(0,ei/2-Z/2),Di=".flatpickr-calendar.centerMost:before",ti=".flatpickr-calendar.centerMost:after",Dr=cr.cssRules.length,hr="{left:"+be.left+"px;right:auto;}";In(t.calendarContainer,"rightMost",!1),In(t.calendarContainer,"centerMost",!0),cr.insertRule(Di+","+ti+hr,Dr),t.calendarContainer.style.left=on+"px",t.calendarContainer.style.right="auto"}}}}function Un(){for(var S=null,P=0;P<document.styleSheets.length;P++){var B=document.styleSheets[P];if(B.cssRules){try{B.cssRules}catch{continue}S=B;break}}return S??ar()}function ar(){var S=document.createElement("style");return document.head.appendChild(S),S.sheet}function rn(){t.config.noCalendar||t.isMobile||(b(),Tt(),M())}function En(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function Cn(S){S.preventDefault(),S.stopPropagation();var P=function(Ne){return Ne.classList&&Ne.classList.contains("flatpickr-day")&&!Ne.classList.contains("flatpickr-disabled")&&!Ne.classList.contains("notAllowed")},B=Wm(Mn(S),P);if(B!==void 0){var Z=B,le=t.latestSelectedDateObj=new Date(Z.dateObj.getTime()),me=(le.getMonth()<t.currentMonth||le.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=Z,t.config.mode==="single")t.selectedDates=[le];else if(t.config.mode==="multiple"){var Pe=Bn(le);Pe?t.selectedDates.splice(parseInt(Pe),1):t.selectedDates.push(le)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=le,t.selectedDates.push(le),Vn(le,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Ne,mt){return Ne.getTime()-mt.getTime()}));if(R(),me){var be=t.currentYear!==le.getFullYear();t.currentYear=le.getFullYear(),t.currentMonth=le.getMonth(),be&&(Qe("onYearChange"),b()),Qe("onMonthChange")}if(Tt(),M(),Ct(),!me&&t.config.mode!=="range"&&t.config.showMonths===1?c(Z):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Me=t.config.mode==="single"&&!t.config.enableTime,Ee=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Me||Ee)&&En()}q()}}var Ae={locale:[Mt,ve],showMonths:[ke,h,_e],minDate:[Q],maxDate:[Q],positionElement:[Ce],clickOpens:[function(){t.config.clickOpens===!0?(O(t._input,"focus",t.open),O(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function ct(S,P){if(S!==null&&typeof S=="object"){Object.assign(t.config,S);for(var B in S)Ae[B]!==void 0&&Ae[B].forEach(function(Z){return Z()})}else t.config[S]=P,Ae[S]!==void 0?Ae[S].forEach(function(Z){return Z()}):xl.indexOf(S)>-1&&(t.config[S]=Ll(P));t.redraw(),Ct(!0)}function Vt(S,P){var B=[];if(S instanceof Array)B=S.map(function(Z){return t.parseDate(Z,P)});else if(S instanceof Date||typeof S=="number")B=[t.parseDate(S,P)];else if(typeof S=="string")switch(t.config.mode){case"single":case"time":B=[t.parseDate(S,P)];break;case"multiple":B=S.split(t.config.conjunction).map(function(Z){return t.parseDate(Z,P)});break;case"range":B=S.split(t.l10n.rangeSeparator).map(function(Z){return t.parseDate(Z,P)});break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(S)));t.selectedDates=t.config.allowInvalidPreload?B:B.filter(function(Z){return Z instanceof Date&&gt(Z,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(Z,le){return Z.getTime()-le.getTime()})}function ge(S,P,B){if(P===void 0&&(P=!1),B===void 0&&(B=t.config.dateFormat),S!==0&&!S||S instanceof Array&&S.length===0)return t.clear(P);Vt(S,B),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),Q(void 0,P),N(),t.selectedDates.length===0&&t.clear(!1),Ct(P),P&&Qe("onChange")}function F(S){return S.slice().map(function(P){return typeof P=="string"||typeof P=="number"||P instanceof Date?t.parseDate(P,void 0,!0):P&&typeof P=="object"&&P.from&&P.to?{from:t.parseDate(P.from,void 0),to:t.parseDate(P.to,void 0)}:P}).filter(function(P){return P})}function ce(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var S=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);S&&Vt(S,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function ye(){if(t.input=We(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=yt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Ce()}function Ce(){t._positionElement=t.config.positionElement||t._input}function kt(){var S=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=yt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=S,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=S==="datetime-local"?"Y-m-d\\TH:i:S":S==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}O(t.mobileInput,"change",function(P){t.setDate(Mn(P).value,!1,t.mobileFormatStr),Qe("onChange"),Qe("onClose")})}function $t(S){if(t.isOpen===!0)return t.close();t.open(S)}function Qe(S,P){if(t.config!==void 0){var B=t.config[S];if(B!==void 0&&B.length>0)for(var Z=0;B[Z]&&Z<B.length;Z++)B[Z](t.selectedDates,t.input.value,t,P);S==="onChange"&&(t.input.dispatchEvent(jn("change")),t.input.dispatchEvent(jn("input")))}}function jn(S){var P=document.createEvent("Event");return P.initEvent(S,!0,!0),P}function Bn(S){for(var P=0;P<t.selectedDates.length;P++){var B=t.selectedDates[P];if(B instanceof Date&&Vn(B,S)===0)return""+P}return!1}function Zn(S){return t.config.mode!=="range"||t.selectedDates.length<2?!1:Vn(S,t.selectedDates[0])>=0&&Vn(S,t.selectedDates[1])<=0}function Tt(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(S,P){var B=new Date(t.currentYear,t.currentMonth,1);B.setMonth(t.currentMonth+P),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[P].textContent=bu(B.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=B.getMonth().toString(),S.value=B.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function ur(S){var P=S||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(B){return t.formatDate(B,P)}).filter(function(B,Z,le){return t.config.mode!=="range"||t.config.enableTime||le.indexOf(B)===Z}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function Ct(S){S===void 0&&(S=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=ur(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=ur(t.config.altFormat)),S!==!1&&Qe("onValueUpdate")}function fn(S){var P=Mn(S),B=t.prevMonthNav.contains(P),Z=t.nextMonthNav.contains(P);B||Z?Se(B?-1:1):t.yearElements.indexOf(P)>=0?P.select():P.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):P.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function Zr(S){S.preventDefault();var P=S.type==="keydown",B=Mn(S),Z=B;t.amPM!==void 0&&B===t.amPM&&(t.amPM.textContent=t.l10n.amPM[Gn(t.amPM.textContent===t.l10n.amPM[0])]);var le=parseFloat(Z.getAttribute("min")),me=parseFloat(Z.getAttribute("max")),Pe=parseFloat(Z.getAttribute("step")),be=parseInt(Z.value,10),Me=S.delta||(P?S.which===38?1:-1:0),Ee=be+Pe*Me;if(typeof Z.value<"u"&&Z.value.length===2){var Ne=Z===t.hourElement,mt=Z===t.minuteElement;Ee<le?(Ee=me+Ee+Gn(!Ne)+(Gn(Ne)&&Gn(!t.amPM)),mt&&ee(void 0,-1,t.hourElement)):Ee>me&&(Ee=Z===t.hourElement?Ee-me-Gn(!t.amPM):le,mt&&ee(void 0,1,t.hourElement)),t.amPM&&Ne&&(Pe===1?Ee+be===23:Math.abs(Ee-be)>Pe)&&(t.amPM.textContent=t.l10n.amPM[Gn(t.amPM.textContent===t.l10n.amPM[0])]),Z.value=Pn(Ee)}}return i(),t}function xs(n,e){for(var t=Array.prototype.slice.call(n).filter(function(u){return u instanceof HTMLElement}),r=[],i=0;i<t.length;i++){var s=t[i];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=EC(s,e||{}),r.push(s._flatpickr)}catch(u){console.error(u)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return xs(this,n)},HTMLElement.prototype.flatpickr=function(n){return xs([this],n)});var Yt=function(n,e){return typeof n=="string"?xs(window.document.querySelectorAll(n),e):n instanceof Node?xs([n],e):xs(n,e)};Yt.defaultConfig={};Yt.l10ns={en:mn({},zo),default:mn({},zo)};Yt.localize=function(n){Yt.l10ns.default=mn(mn({},Yt.l10ns.default),n)};Yt.setDefaults=function(n){Yt.defaultConfig=mn(mn({},Yt.defaultConfig),n)};Yt.parseDate=_c({});Yt.formatDate=Gm({});Yt.compareDates=Vn;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return xs(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=Yt);var Ec={exports:{}};(function(n,e){(function(t,r){r(e)})(Lc,function(t){var r=typeof window<"u"&&window.flatpickr!==void 0?window.flatpickr:{l10ns:{}},i={firstDayOfWeek:1,weekdays:{shorthand:["","","","","","",""],longhand:["","","","","","'",""]},months:{shorthand:["","","","","","","","","","","",""],longhand:["","","","","","","","","","","",""]},time_24hr:!0};r.l10ns.uk=i;var s=r.l10ns;t.Ukrainian=i,t.default=s,Object.defineProperty(t,"__esModule",{value:!0})})})(Ec,Ec.exports);var zC=Ec.exports,zm={exports:{}};(function(n,e){(function(r,i){n.exports=i()})(Lc,function(){return function(t){var r={};function i(s){if(r[s])return r[s].exports;var u=r[s]={i:s,l:!1,exports:{}};return t[s].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=t,i.c=r,i.d=function(s,u,h){i.o(s,u)||Object.defineProperty(s,u,{enumerable:!0,get:h})},i.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},i.t=function(s,u){if(u&1&&(s=i(s)),u&8||u&4&&typeof s=="object"&&s&&s.__esModule)return s;var h=Object.create(null);if(i.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:s}),u&2&&typeof s!="string")for(var d in s)i.d(h,d,(function(m){return s[m]}).bind(null,d));return h},i.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(u,"a",u),u},i.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},i.p="",i(i.s=0)}([function(t,r,i){i.r(r);var s=function(F){return Array.isArray(F)?F:[F]},u=function(F){return F instanceof Node},h=function(F){return F instanceof NodeList},d=function(F,ce){if(F&&ce){F=h(F)?F:[F];for(var ye=0;ye<F.length&&ce(F[ye],ye,F.length)!==!0;ye++);}},m=function(F){return console.error("[scroll-lock] ".concat(F))},y=function(F){if(Array.isArray(F)){var ce=F.join(", ");return ce}},R=function(F){var ce=[];return d(F,function(ye){return ce.push(ye)}),ce},N=function(F,ce){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,Ce=arguments.length>3&&arguments[3]!==void 0?arguments[3]:document;if(ye&&R(Ce.querySelectorAll(ce)).indexOf(F)!==-1)return F;for(;(F=F.parentElement)&&R(Ce.querySelectorAll(ce)).indexOf(F)===-1;);return F},U=function(F,ce){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,Ce=R(ye.querySelectorAll(ce)).indexOf(F)!==-1;return Ce},L=function(F){if(F){var ce=getComputedStyle(F),ye=ce.overflow==="hidden";return ye}},O=function(F){if(F){if(L(F))return!0;var ce=F.scrollTop;return ce<=0}},q=function(F){if(F){if(L(F))return!0;var ce=F.scrollTop,ye=F.scrollHeight,Ce=ce+F.offsetHeight;return Ce>=ye}},$=function(F){if(F){if(L(F))return!0;var ce=F.scrollLeft;return ce<=0}},Q=function(F){if(F){if(L(F))return!0;var ce=F.scrollLeft,ye=F.scrollWidth,Ce=ce+F.offsetWidth;return Ce>=ye}},X=function(F){var ce='textarea, [contenteditable="true"]';return U(F,ce)},ee=function(F){var ce='input[type="range"]';return U(F,ce)};i.d(r,"disablePageScroll",function(){return I}),i.d(r,"enablePageScroll",function(){return D}),i.d(r,"getScrollState",function(){return M}),i.d(r,"clearQueueScrollLocks",function(){return b}),i.d(r,"getTargetScrollBarWidth",function(){return Ie}),i.d(r,"getCurrentTargetScrollBarWidth",function(){return ke}),i.d(r,"getPageScrollBarWidth",function(){return lt}),i.d(r,"getCurrentPageScrollBarWidth",function(){return Ve}),i.d(r,"addScrollableTarget",function(){return _e}),i.d(r,"removeScrollableTarget",function(){return ve}),i.d(r,"addScrollableSelector",function(){return he}),i.d(r,"removeScrollableSelector",function(){return Se}),i.d(r,"addLockableTarget",function(){return Fe}),i.d(r,"addLockableSelector",function(){return ze}),i.d(r,"setFillGapMethod",function(){return Et}),i.d(r,"addFillGapTarget",function(){return bt}),i.d(r,"removeFillGapTarget",function(){return fe}),i.d(r,"addFillGapSelector",function(){return $e}),i.d(r,"removeFillGapSelector",function(){return gt}),i.d(r,"refillGaps",function(){return nt});function ie(ge){for(var F=1;F<arguments.length;F++){var ce=arguments[F]!=null?arguments[F]:{},ye=Object.keys(ce);typeof Object.getOwnPropertySymbols=="function"&&(ye=ye.concat(Object.getOwnPropertySymbols(ce).filter(function(Ce){return Object.getOwnPropertyDescriptor(ce,Ce).enumerable}))),ye.forEach(function(Ce){re(ge,Ce,ce[Ce])})}return ge}function re(ge,F,ce){return F in ge?Object.defineProperty(ge,F,{value:ce,enumerable:!0,configurable:!0,writable:!0}):ge[F]=ce,ge}var c=["padding","margin","width","max-width","none"],C=3,T={scroll:!0,queue:0,scrollableSelectors:["[data-scroll-lock-scrollable]"],lockableSelectors:["body","[data-scroll-lock-lockable]"],fillGapSelectors:["body","[data-scroll-lock-fill-gap]","[data-scroll-lock-lockable]"],fillGapMethod:c[0],startTouchY:0,startTouchX:0},I=function(F){T.queue<=0&&(T.scroll=!1,tt(),zt()),_e(F),T.queue++},D=function(F){T.queue>0&&T.queue--,T.queue<=0&&(T.scroll=!0,_n(),We()),ve(F)},M=function(){return T.scroll},b=function(){T.queue=0},Ie=function(F){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(u(F)){var ye=F.style.overflowY;ce?M()||(F.style.overflowY=F.getAttribute("data-scroll-lock-saved-overflow-y-property")):F.style.overflowY="scroll";var Ce=ke(F);return F.style.overflowY=ye,Ce}else return 0},ke=function(F){if(u(F))if(F===document.body){var ce=document.documentElement.clientWidth,ye=window.innerWidth,Ce=ye-ce;return Ce}else{var kt=F.style.borderLeftWidth,$t=F.style.borderRightWidth;F.style.borderLeftWidth="0px",F.style.borderRightWidth="0px";var Qe=F.offsetWidth-F.clientWidth;return F.style.borderLeftWidth=kt,F.style.borderRightWidth=$t,Qe}else return 0},lt=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return Ie(document.body,F)},Ve=function(){return ke(document.body)},_e=function(F){if(F){var ce=s(F);ce.map(function(ye){d(ye,function(Ce){u(Ce)?Ce.setAttribute("data-scroll-lock-scrollable",""):m('"'.concat(Ce,'" is not a Element.'))})})}},ve=function(F){if(F){var ce=s(F);ce.map(function(ye){d(ye,function(Ce){u(Ce)?Ce.removeAttribute("data-scroll-lock-scrollable"):m('"'.concat(Ce,'" is not a Element.'))})})}},he=function(F){if(F){var ce=s(F);ce.map(function(ye){T.scrollableSelectors.push(ye)})}},Se=function(F){if(F){var ce=s(F);ce.map(function(ye){T.scrollableSelectors=T.scrollableSelectors.filter(function(Ce){return Ce!==ye})})}},Fe=function(F){if(F){var ce=s(F);ce.map(function(ye){d(ye,function(Ce){u(Ce)?Ce.setAttribute("data-scroll-lock-lockable",""):m('"'.concat(Ce,'" is not a Element.'))})}),M()||tt()}},ze=function(F){if(F){var ce=s(F);ce.map(function(ye){T.lockableSelectors.push(ye)}),M()||tt(),$e(F)}},Et=function(F){if(F)if(c.indexOf(F)!==-1)T.fillGapMethod=F,nt();else{var ce=c.join(", ");m('"'.concat(F,`" method is not available!
Available fill gap methods: `).concat(ce,"."))}},bt=function(F){if(F){var ce=s(F);ce.map(function(ye){d(ye,function(Ce){u(Ce)?(Ce.setAttribute("data-scroll-lock-fill-gap",""),T.scroll||An(Ce)):m('"'.concat(Ce,'" is not a Element.'))})})}},fe=function(F){if(F){var ce=s(F);ce.map(function(ye){d(ye,function(Ce){u(Ce)?(Ce.removeAttribute("data-scroll-lock-fill-gap"),T.scroll||ar(Ce)):m('"'.concat(Ce,'" is not a Element.'))})})}},$e=function(F){if(F){var ce=s(F);ce.map(function(ye){T.fillGapSelectors.indexOf(ye)===-1&&(T.fillGapSelectors.push(ye),T.scroll||Mt(ye))})}},gt=function(F){if(F){var ce=s(F);ce.map(function(ye){T.fillGapSelectors=T.fillGapSelectors.filter(function(Ce){return Ce!==ye}),T.scroll||Un(ye)})}},nt=function(){T.scroll||zt()},tt=function(){var F=y(T.lockableSelectors);Lt(F)},_n=function(){var F=y(T.lockableSelectors);pe(F)},Lt=function(F){var ce=document.querySelectorAll(F);d(ce,function(ye){rt(ye)})},pe=function(F){var ce=document.querySelectorAll(F);d(ce,function(ye){qt(ye)})},rt=function(F){if(u(F)&&F.getAttribute("data-scroll-lock-locked")!=="true"){var ce=window.getComputedStyle(F);F.setAttribute("data-scroll-lock-saved-overflow-y-property",ce.overflowY),F.setAttribute("data-scroll-lock-saved-inline-overflow-property",F.style.overflow),F.setAttribute("data-scroll-lock-saved-inline-overflow-y-property",F.style.overflowY),F.style.overflow="hidden",F.setAttribute("data-scroll-lock-locked","true")}},qt=function(F){u(F)&&F.getAttribute("data-scroll-lock-locked")==="true"&&(F.style.overflow=F.getAttribute("data-scroll-lock-saved-inline-overflow-property"),F.style.overflowY=F.getAttribute("data-scroll-lock-saved-inline-overflow-y-property"),F.removeAttribute("data-scroll-lock-saved-overflow-property"),F.removeAttribute("data-scroll-lock-saved-inline-overflow-property"),F.removeAttribute("data-scroll-lock-saved-inline-overflow-y-property"),F.removeAttribute("data-scroll-lock-locked"))},zt=function(){T.fillGapSelectors.map(function(F){Mt(F)})},We=function(){T.fillGapSelectors.map(function(F){Un(F)})},Mt=function(F){var ce=document.querySelectorAll(F),ye=T.lockableSelectors.indexOf(F)!==-1;d(ce,function(Ce){An(Ce,ye)})},An=function(F){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(u(F)){var ye;if(F.getAttribute("data-scroll-lock-lockable")===""||ce)ye=Ie(F,!0);else{var Ce=N(F,y(T.lockableSelectors));ye=Ie(Ce,!0)}F.getAttribute("data-scroll-lock-filled-gap")==="true"&&ar(F);var kt=window.getComputedStyle(F);if(F.setAttribute("data-scroll-lock-filled-gap","true"),F.setAttribute("data-scroll-lock-current-fill-gap-method",T.fillGapMethod),T.fillGapMethod==="margin"){var $t=parseFloat(kt.marginRight);F.style.marginRight="".concat($t+ye,"px")}else if(T.fillGapMethod==="width")F.style.width="calc(100% - ".concat(ye,"px)");else if(T.fillGapMethod==="max-width")F.style.maxWidth="calc(100% - ".concat(ye,"px)");else if(T.fillGapMethod==="padding"){var Qe=parseFloat(kt.paddingRight);F.style.paddingRight="".concat(Qe+ye,"px")}}},Un=function(F){var ce=document.querySelectorAll(F);d(ce,function(ye){ar(ye)})},ar=function(F){if(u(F)&&F.getAttribute("data-scroll-lock-filled-gap")==="true"){var ce=F.getAttribute("data-scroll-lock-current-fill-gap-method");F.removeAttribute("data-scroll-lock-filled-gap"),F.removeAttribute("data-scroll-lock-current-fill-gap-method"),ce==="margin"?F.style.marginRight="":ce==="width"?F.style.width="":ce==="max-width"?F.style.maxWidth="":ce==="padding"&&(F.style.paddingRight="")}},rn=function(F){nt()},En=function(F){T.scroll||(T.startTouchY=F.touches[0].clientY,T.startTouchX=F.touches[0].clientX)},Cn=function(F){if(!T.scroll){var ce=T.startTouchY,ye=T.startTouchX,Ce=F.touches[0].clientY,kt=F.touches[0].clientX;if(F.touches.length<2){var $t=y(T.scrollableSelectors),Qe={up:ce<Ce,down:ce>Ce,left:ye<kt,right:ye>kt},jn={up:ce+C<Ce,down:ce-C>Ce,left:ye+C<kt,right:ye-C>kt},Bn=function Zn(Tt){var ur=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Tt){var Ct=N(Tt,$t,!1);if(ee(Tt))return!1;if(ur||X(Tt)&&N(Tt,$t)||U(Tt,$t)){var fn=!1;$(Tt)&&Q(Tt)?(Qe.up&&O(Tt)||Qe.down&&q(Tt))&&(fn=!0):O(Tt)&&q(Tt)?(Qe.left&&$(Tt)||Qe.right&&Q(Tt))&&(fn=!0):(jn.up&&O(Tt)||jn.down&&q(Tt)||jn.left&&$(Tt)||jn.right&&Q(Tt))&&(fn=!0),fn&&(Ct?Zn(Ct,!0):F.cancelable&&F.preventDefault())}else Zn(Ct)}else F.cancelable&&F.preventDefault()};Bn(F.target)}}},Ae=function(F){T.scroll||(T.startTouchY=0,T.startTouchX=0)};typeof window<"u"&&window.addEventListener("resize",rn),typeof document<"u"&&(document.addEventListener("touchstart",En),document.addEventListener("touchmove",Cn,{passive:!1}),document.addEventListener("touchend",Ae));var ct={hide:function(F){m(`"hide" is deprecated! Use "disablePageScroll" instead. 
 https://github.com/FL3NKEY/scroll-lock#disablepagescrollscrollabletarget`),I(F)},show:function(F){m(`"show" is deprecated! Use "enablePageScroll" instead. 
 https://github.com/FL3NKEY/scroll-lock#enablepagescrollscrollabletarget`),D(F)},toggle:function(F){m('"toggle" is deprecated! Do not use it.'),M()?I():D(F)},getState:function(){return m(`"getState" is deprecated! Use "getScrollState" instead. 
 https://github.com/FL3NKEY/scroll-lock#getscrollstate`),M()},getWidth:function(){return m(`"getWidth" is deprecated! Use "getPageScrollBarWidth" instead. 
 https://github.com/FL3NKEY/scroll-lock#getpagescrollbarwidth`),lt()},getCurrentWidth:function(){return m(`"getCurrentWidth" is deprecated! Use "getCurrentPageScrollBarWidth" instead. 
 https://github.com/FL3NKEY/scroll-lock#getcurrentpagescrollbarwidth`),Ve()},setScrollableTargets:function(F){m(`"setScrollableTargets" is deprecated! Use "addScrollableTarget" instead. 
 https://github.com/FL3NKEY/scroll-lock#addscrollabletargetscrollabletarget`),_e(F)},setFillGapSelectors:function(F){m(`"setFillGapSelectors" is deprecated! Use "addFillGapSelector" instead. 
 https://github.com/FL3NKEY/scroll-lock#addfillgapselectorfillgapselector`),$e(F)},setFillGapTargets:function(F){m(`"setFillGapTargets" is deprecated! Use "addFillGapTarget" instead. 
 https://github.com/FL3NKEY/scroll-lock#addfillgaptargetfillgaptarget`),bt(F)},clearQueue:function(){m(`"clearQueue" is deprecated! Use "clearQueueScrollLocks" instead. 
 https://github.com/FL3NKEY/scroll-lock#clearqueuescrolllocks`),b()}},Vt=ie({disablePageScroll:I,enablePageScroll:D,getScrollState:M,clearQueueScrollLocks:b,getTargetScrollBarWidth:Ie,getCurrentTargetScrollBarWidth:ke,getPageScrollBarWidth:lt,getCurrentPageScrollBarWidth:Ve,addScrollableSelector:he,removeScrollableSelector:Se,addScrollableTarget:_e,removeScrollableTarget:ve,addLockableSelector:ze,addLockableTarget:Fe,addFillGapSelector:$e,removeFillGapSelector:gt,addFillGapTarget:bt,removeFillGapTarget:fe,setFillGapMethod:Et,refillGaps:nt,_state:T},ct);r.default=Vt}]).default})})(zm);var KC=zm.exports;export{GC as G,PC as J,Mm as S,xC as a,UC as b,LC as c,Zb as d,OC as e,li as f,BC as g,CC as h,wC as i,TC as j,bC as k,Yt as l,zC as m,VC as n,KC as o,AC as p,Ey as q,jC as r,MC as s,SC as t,FC as u,RC as v,IC as w};
//# sourceMappingURL=vendor-OwqoIaUp.js.map
