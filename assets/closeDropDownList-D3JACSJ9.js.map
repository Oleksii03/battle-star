{"version":3,"file":"closeDropDownList-D3JACSJ9.js","sources":["../../src/ts/utils/constants.ts","../../src/ts/components/header.ts","../../src/ts/utils/returnToThePage.ts","../../src/ts/pages/sign-in/cabinet/signOut.ts","../../src/ts/utils/getDataFromFirestore.ts","../../src/ts/components/closeDropDownList.ts"],"sourcesContent":["// ===PAGES ===\nconst PAGE_MAIN = 'index';\nconst PAGE_CABINET = 'cabinet';\n\n// ===PAGE MAIN==============\n// ---leaderboard---\nconst TOP_LIST_CSGO: string = 'mainPageListTop';\nconst TOP_LIST_DOTA: string = 'mainPageListTopDota';\nconst LEADERBOARD_CARDS: string = 'mainPageLeaderboardCards';\n// PopularMatches\nconst MATCHES_CARDS_LIST: string = 'mainPagePopularMatchesCardsList';\nconst POPULAR_MATCHES: string = 'mainPagePopularMatches';\n\n// ===PAGE CABINET==============\nconst HISTORY_MATCHES_LIST: string = 'cabinetHistoryMatches';\n\nexport {\n  PAGE_MAIN,\n  PAGE_CABINET,\n  TOP_LIST_CSGO,\n  TOP_LIST_DOTA,\n  LEADERBOARD_CARDS,\n  MATCHES_CARDS_LIST,\n  POPULAR_MATCHES,\n  HISTORY_MATCHES_LIST,\n};\n","export const userInnerList = document.querySelector('.js-user-inner-list');\nexport const gameInnerList = document.querySelector('.js-game-dropdown-item-inner-list');\nexport const iconArrowDown = document.querySelector('.js-icon-arrow-down');\n// ---reusable-refs------------\nexport function header() {\n  const sergioBox = document.querySelector('.js-user-item-box');\n  const gameDropdownBox = document.querySelector('.js-game-dropdown-box');\n  const gameDropdownActiveTitle = document.querySelector('.js-game-dropdown-active-title');\n\n  // ----local-refs------------------\n\n  // ===handlerSergioList======\n  sergioBox?.addEventListener('click', toggleUserList);\n\n  function toggleUserList() {\n    userInnerList?.classList.toggle('header__user-inner-list_open');\n    iconArrowDown?.classList.toggle('header__user-item-icon_rotate');\n  }\n\n  // ===handlerGameList======\n  gameDropdownBox?.addEventListener('click', toggleGameList);\n\n  function toggleGameList(): void {\n    gameInnerList?.classList.toggle('game-dropdown-item__inner-list_open');\n  }\n\n  // gameInnerList\n  gameInnerList?.addEventListener('click', getTextContentFromGameList);\n\n  function getTextContentFromGameList(e: Event): void {\n    const targetEL = e.target as HTMLElement;\n    if (gameDropdownActiveTitle) {\n      gameDropdownActiveTitle.textContent = targetEL.textContent;\n    }\n    toggleGameList();\n  }\n}\n","import { PAGE_MAIN, PAGE_CABINET } from './constants';\n\nexport function returnToThePage(currentPage: string): string | undefined {\n  if (currentPage.includes(PAGE_MAIN)) {\n    console.log('index');\n    return './';\n  }\n\n  if (currentPage.includes(PAGE_CABINET)) {\n    console.log('cabinet');\n    return './';\n  }\n}\n","import { signOut } from 'firebase/auth';\nimport { auth } from '@/ts/utils/firebaseConfig';\nimport { returnToThePage } from '@/ts/utils/returnToThePage';\nimport { handleError } from '@/ts/utils/handleError';\n\nexport function logout() {\n  const logoutBtn = document.querySelector('.js-sidebar-btn-exit');\n\n  if (logoutBtn) {\n    logoutBtn.addEventListener('click', () => {\n      const currentPage = window.location.pathname;\n\n      signOut(auth)\n        .then(() => {\n          const page = returnToThePage(currentPage);\n          if (typeof page === 'string') {\n            window.location.href = page;\n            localStorage.setItem('logged', 'false');\n          }\n        })\n        .catch(handleError);\n    });\n  }\n}\n","import { getFirestore, collection, getDocs, Firestore } from 'firebase/firestore';\nimport { app } from './firebaseConfig';\n\nexport async function getDataFromFirestore(collectionName: string): Promise<any[]> {\n  const db: Firestore = getFirestore(app);\n\n  try {\n    const querySnapshot = await getDocs(collection(db, collectionName));\n    const collectionsArr: any[] = [];\n\n    querySnapshot.forEach(doc => {\n      collectionsArr.push({ id: doc.id, ...doc.data() });\n    });\n\n    return collectionsArr;\n  } catch (error) {\n    console.error('Error getting documents:', error);\n    return [];\n  }\n}\n","import { userInnerList, gameInnerList, iconArrowDown } from './header';\n// import { gameInnerList } from './header';\n\nexport function closeDropDownList(): void {\n  document.addEventListener('click', (e: Event) => {\n    // userList\n    handlerUserList(e);\n    // gameList\n    handlerGameDropdownList(e);\n    // cabinetHistoryDropdownList\n    cabinetHistoryDropdownList(e);\n  });\n\n  // ===function-handlers====\n  function handlerUserList(e: Event): void {\n    const targetEl = (e.target as HTMLElement).closest('.header__user-inner-item');\n    const parentTargetEl = (e.target as HTMLElement).closest('.header__user-item-box');\n    // --refs----\n\n    // handlers\n    const isuserListOpen =\n      !targetEl?.classList.contains('header__user-inner-item') &&\n      !parentTargetEl?.classList.contains('header__user-item-box');\n\n    if (isuserListOpen) {\n      userInnerList?.classList.remove('header__user-inner-list_open');\n      iconArrowDown?.classList.remove('header__user-item-icon_rotate');\n    }\n  }\n\n  // gameDropdownList\n  function handlerGameDropdownList(e: Event): void {\n    const targetEl = (e.target as HTMLElement).closest('.game-dropdown-item__inner-item');\n    const parentTargetEl = (e.target as HTMLElement).closest('.js-game-dropdown-box');\n    // --refs----\n\n    const isGameDropdownListOpen =\n      !targetEl?.classList.contains('game-dropdown-item__inner-item') &&\n      !parentTargetEl?.classList.contains('js-game-dropdown-box');\n\n    if (isGameDropdownListOpen) {\n      gameInnerList?.classList.remove('game-dropdown-item__inner-list_open');\n    }\n  }\n\n  // cabinetHistoryDropdownList\n  function cabinetHistoryDropdownList(e: Event) {\n    const targetEl = e.target as HTMLElement;\n    const parentTargetEl = (e.target as HTMLElement).closest('.js-drop-down-item-title-box');\n\n    const isCabinetHistoryDropdownListOpen =\n      !targetEl?.classList.contains('cabinet-history__drop-down-inner-item-text') &&\n      !parentTargetEl?.classList.contains('js-drop-down-item-title-box');\n\n    if (isCabinetHistoryDropdownListOpen) {\n      document\n        .querySelector('.js-drop-down-inner-list')\n        ?.classList.remove('cabinet-history__drop-down-inner-list_active');\n      document\n        .querySelector('.js-drop-down-icon')\n        ?.classList.remove('cabinet-history__drop-down-item-icon_active');\n    }\n  }\n}\n"],"names":["PAGE_MAIN","PAGE_CABINET","TOP_LIST_CSGO","TOP_LIST_DOTA","LEADERBOARD_CARDS","MATCHES_CARDS_LIST","POPULAR_MATCHES","HISTORY_MATCHES_LIST","userInnerList","gameInnerList","iconArrowDown","header","sergioBox","gameDropdownBox","gameDropdownActiveTitle","toggleUserList","toggleGameList","getTextContentFromGameList","e","targetEL","returnToThePage","currentPage","logout","logoutBtn","signOut","auth","page","handleError","getDataFromFirestore","collectionName","db","getFirestore","app","querySnapshot","getDocs","collection","collectionsArr","doc","error","closeDropDownList","handlerUserList","handlerGameDropdownList","cabinetHistoryDropdownList","targetEl","parentTargetEl","_a","_b"],"mappings":"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"}