{"version":3,"file":"loginOrRegistrationHandler-peDuBdh2.js","sources":["../../src/ts/pages/sign-in/login/createMarkup.ts","../../src/ts/utils/toggleVisiblePassword.ts","../../src/ts/pages/sign-in/login/loginThroughGoogle.ts","../../src/ts/pages/sign-in/login/loginThroughProvider.ts","../../src/ts/types/base/lib/lib.ts","../../src/ts/pages/sign-in/login/handlerLogin.ts","../../src/ts/pages/sign-in/registration/createMarkup.ts","../../src/ts/pages/sign-in/registration/passwordCriteria.ts","../../src/ts/pages/sign-in/registration/registerUser.ts","../../src/ts/pages/sign-in/registration/handlerRegistration.ts","../../src/ts/pages/sign-in/loginOrRegistrationHandler.ts"],"sourcesContent":["export function markup(): string {\n  return `\n        <div class=\"sign-in__form-input__wrapper\">\n          <div class=\"sign-in__form-input-box\">\n            <input\n              type=\"email\"\n              class=\"sign-in__form-input js-login-email\"\n              placeholder=\"Електронна пошта\"\n              required />\n          </div>\n\n          <div class=\"sign-in__form-input-box\">\n            <input\n              type=\"password\"\n              class=\"sign-in__form-input js-form-input-password js-login-password\"\n              placeholder=\"Пароль\"\n              required />\n\n            <div class=\"sign-in__form-input-icon-box\">\n              <svg\n                width=\"24\"\n                height=\"24\"\n                class=\"sign-in__form-input-icon js-form-input-icon-view\">\n                <use xlink:href=\"#icon-eye-views\"></use>\n              </svg>\n              <span class=\"sign-in__form-input-icon-line js-icon-line-cross-out\"></span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"sign-in__form-restore\">\n          <a\n            href=\"#\"\n            class=\"sign-in__form-forgot-password-link\">\n            Забули пароль?\n          </a>\n          <a\n            href=\"#\"\n            class=\"sign-in__form-restore-link\">\n            Відновити\n          </a>\n        </div>\n\n        <button\n          class=\"sign-in__form-btn-submit\"\n          type=\"submit\">\n          Увійти\n        </button>\n\n        <div class=\"sign-in__log-in-via-title-box\">\n          <p class=\"sign-in__log-in-via-title\">Або увійдіть через</p>\n        </div>\n\n        <ul class=\"sign-in__log-in-via-list js-login-provider-list\">\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form_steam\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form-apple\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item js-form-item-google\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form_google\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item js-form-item-facebook\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form-facebook\"></use>\n            </svg>\n          </li>\n        </ul>`;\n}\n","export function toggleVisiblePassword(form: HTMLFormElement): void {\n  const btnReview = form.querySelector('.js-form-input-icon-view');\n\n  btnReview?.addEventListener('click', () => {\n    const passwordInput = form.querySelector('.js-form-input-password') as HTMLInputElement;\n    const lineCrossOut = form.querySelector('.js-icon-line-cross-out') as HTMLElement;\n\n    if (passwordInput.type === 'password') {\n      passwordInput.type = 'text';\n      lineCrossOut.style.display = 'none';\n      return;\n    }\n\n    passwordInput.type = 'password';\n    lineCrossOut.style.display = 'inline-block';\n  });\n}\n","import { signInWithPopup, GoogleAuthProvider } from 'firebase/auth';\nimport { auth } from '@/ts/utils/firebaseConfig';\nimport { baseUrl } from '@/ts/index';\n// import { cabinetUrl } from '@/ts/cabinet';\n// import { cabinetUrl } from '@/ts/utils/router';\n\nexport function loginThroughGoogle() {\n  const provider = new GoogleAuthProvider();\n\n  signInWithPopup(auth, provider)\n    .then(result => {\n      const user = result.user;\n\n      console.log('User signed in with Google:', user);\n\n      // window.location.href = cabinetUrl;\n    })\n    .catch(error => {\n      console.error('Error signing in with Google:', error);\n    });\n}\n","import { loginThroughGoogle } from './loginThroughGoogle';\n\nexport function loginThroughProvider(form: HTMLFormElement) {\n  const providerList = form.querySelector('.js-login-provider-list');\n\n  providerList?.addEventListener('click', (e: Event) => {\n    const targetEl = (e.target as HTMLElement).closest('li');\n\n    if (targetEl?.classList.contains('js-form-item-google')) {\n      loginThroughGoogle();\n      return;\n    }\n  });\n}\n","interface ToastrOptions {\n  positionClass: string;\n  closeButton: boolean;\n  progressBar: boolean;\n  timeOut: number;\n  extendedTimeOut: number;\n}\n\nexport const toastrOptions: ToastrOptions = {\n  positionClass: 'toast-top-right',\n  closeButton: true,\n  progressBar: true,\n  timeOut: 5000,\n  extendedTimeOut: 1000,\n};\n","import { signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '@/ts/utils/firebaseConfig';\nimport { markup } from './createMarkup';\nimport { toggleVisiblePassword } from '@/ts/utils/toggleVisiblePassword';\nimport { loginThroughProvider } from './loginThroughProvider';\nimport 'toastr/build/toastr.min.css';\nimport toastr from 'toastr';\nimport { toastrOptions } from '@/ts/types/base/lib/lib';\n// import { cabinetUrl } from '@/ts/cabinet';\n\ntoastr.options = toastrOptions;\n\nexport function handlerLogin(form: HTMLFormElement) {\n  form.innerHTML = markup();\n\n  form.addEventListener('submit', (e: Event) => {\n    e.preventDefault();\n    let emailEl = document.querySelector('.js-login-email') as HTMLInputElement;\n    if (!emailEl) return;\n    const email = emailEl.value;\n    const password = (document.querySelector('.js-login-password') as HTMLInputElement).value;\n\n    console.log(email);\n\n    signInWithEmailAndPassword(auth, email, password)\n      .then(userCredential => {\n        // const user = userCredential.user;\n        window.location.href = '/cabinet';\n        form.reset();\n      })\n      .catch(error => {\n        console.error('Error signing in:', error);\n        toastr.error('Не вдалося увійти. Перевірте свій email або пароль і спробуйте ще раз.');\n      });\n  });\n\n  // loginThroughProvider\n  loginThroughProvider(form);\n  // toggleVisiblePassword\n  toggleVisiblePassword(form);\n}\n","export function markup(): string {\n  return `\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"text\"\n            class=\"sign-in__form-input js-input-nickname\"\n            placeholder=\"Введіть нікнейм\"\n            pattern=\"^[a-zA-Zа-яА-ЯїЇєЄіІ]{2,15}$\"\n            required />\n        </div>\n\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"email\"\n            class=\"sign-in__form-input js-form-input-email\"\n            placeholder=\"Електронна пошта\"\n            required />\n        </div>\n\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"password\"\n            class=\"sign-in__form-input js-form-input-password\"\n            placeholder=\"Придумайте пароль\"\n            required />\n\n          <div class=\"sign-in__form-input-icon-box\">\n            <svg\n              width=\"24\"\n              height=\"24\"\n              class=\"sign-in__form-input-icon js-form-input-icon-view\">\n              <use xlink:href=\"#icon-eye-views\"></use>\n            </svg>\n            <span class=\"sign-in__form-input-icon-line js-icon-line-cross-out\"></span>\n          </div>\n        </div>\n\n        <button\n          class=\"sign-in__form-btn-submit sign-in__form-btn-submit_create\"\n          type=\"submit\">\n          Створити\n        </button>`;\n}\n","interface PasswordCriteria {\n  minLength: number;\n  minLowercase: number;\n  minUppercase: number;\n  minNumbers: number;\n  minSymbols: number;\n}\nexport const passwordCriteria: PasswordCriteria = {\n  minLength: 8,\n  minLowercase: 1,\n  minUppercase: 1,\n  minNumbers: 1,\n  minSymbols: 0,\n};\n","import { createUserWithEmailAndPassword, updateProfile, User } from 'firebase/auth';\nimport { auth } from '@/ts/utils/firebaseConfig';\n// import { cabinetUrl } from '@/ts/cabinet';\nimport { passwordCriteria } from './passwordCriteria';\nimport { isEmail, isStrongPassword } from 'validator';\n\nexport async function registerUser(\n  email: string,\n  password: string,\n  nickname: string\n): Promise<User | void> {\n  // Валідація email та пароля\n  if (!isEmail(email)) {\n    console.log('Invalid email address');\n    return;\n  }\n  if (!isStrongPassword(password, passwordCriteria)) {\n    console.log('Password is not strong enough');\n    return;\n  }\n\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    await updateProfile(user, { displayName: nickname });\n\n    window.location.href = '/cabinet';\n    return user;\n  } catch (error: any) {\n    console.error('Error creating user:', error.code, error.message);\n    throw error;\n  }\n}\n","import { markup } from './createMarkup';\nimport { toggleVisiblePassword } from '@/ts/utils/toggleVisiblePassword';\nimport { registerUser } from './registerUser';\n\nimport 'toastr/build/toastr.min.css';\n\nimport toastr from 'toastr';\n\nimport 'toastr/build/toastr.min.css';\n\nexport function handlerRegistration(form: HTMLFormElement): void {\n  // markup\n  form.innerHTML = markup();\n\n  // handlerForm\n  form.addEventListener('submit', (e: Event) => {\n    e.preventDefault();\n\n    let emailEl = document.querySelector('.js-form-input-email') as HTMLInputElement;\n    if (!emailEl) return;\n    const email = emailEl.value.trim();\n    const password = (document.querySelector('.js-form-input-password') as HTMLInputElement).value;\n    const nickname = (\n      document.querySelector('.js-input-nickname') as HTMLInputElement\n    ).value.trim();\n\n    registerUser(email, password, nickname)\n      .then(user => {\n        form.reset();\n      })\n      .catch(error => {\n        // console.error('Registration failed:', error.message);\n        toastr.error('Користувч з таким email вже зареєстрований');\n      });\n  });\n\n  // toggleVisiblePassword\n  toggleVisiblePassword(form);\n}\n","import { handlerLogin } from './login/handlerLogin';\nimport { handlerRegistration } from './registration/handlerRegistration';\n\nexport function signInOrSignUpHandler(): void {\n  const signIn = document.querySelector('.js-form-btn-enter');\n  const signUp = document.querySelector('.js-form-btn-create');\n  const tumbBtns = document.querySelector('.js-form-btns-tumb');\n  const form = document.querySelector('.js-sign-in-form');\n  // --local-refs---\n\n  // signIn\n  signIn?.addEventListener('click', handlerSignIn);\n\n  function handlerSignIn(): void {\n    signIn?.classList.add('active-btn');\n    signUp?.classList.remove('active-btn');\n    tumbBtns?.classList.remove('sign-in__form-btns-tumb_active');\n\n    // handlerLogin\n    if (form instanceof HTMLFormElement) {\n      handlerLogin(form);\n    }\n  }\n  handlerSignIn();\n\n  // signUp\n  signUp?.addEventListener('click', handlersignUp);\n\n  function handlersignUp(): void {\n    signUp?.classList.add('active-btn');\n    signIn?.classList.remove('active-btn');\n    tumbBtns?.classList.add('sign-in__form-btns-tumb_active');\n\n    // handlerRegistration\n    if (form instanceof HTMLFormElement) {\n      handlerRegistration(form);\n    }\n  }\n}\n"],"names":["markup","toggleVisiblePassword","form","btnReview","passwordInput","lineCrossOut","loginThroughGoogle","provider","GoogleAuthProvider","signInWithPopup","auth","result","user","error","loginThroughProvider","providerList","e","targetEl","toastrOptions","toastr","handlerLogin","emailEl","email","password","signInWithEmailAndPassword","userCredential","passwordCriteria","registerUser","nickname","isEmail","isStrongPassword","createUserWithEmailAndPassword","updateProfile","handlerRegistration","signInOrSignUpHandler","signIn","signUp","tumbBtns","handlerSignIn","handlersignUp"],"mappings":"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"}