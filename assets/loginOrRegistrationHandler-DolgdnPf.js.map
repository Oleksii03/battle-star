{"version":3,"file":"loginOrRegistrationHandler-DolgdnPf.js","sources":["../../src/ts/pages/sign-in/login/createMarkup.ts","../../src/ts/utils/toggleVisiblePassword.ts","../../src/ts/pages/sign-in/login/handlerLogin.ts","../../src/ts/pages/sign-in/registration/createMarkup.ts","../../src/ts/pages/sign-in/registration/passwordCriteria.ts","../../src/ts/pages/sign-in/registration/registerUser.ts","../../src/ts/pages/sign-in/registration/handlerRegistration.ts","../../src/ts/pages/sign-in/loginOrRegistrationHandler.ts"],"sourcesContent":["export function markup(): string {\n  return `\n        <div class=\"sign-in__form-input__wrapper\">\n          <div class=\"sign-in__form-input-box\">\n            <input\n              type=\"email\"\n              class=\"sign-in__form-input js-login-email\"\n              placeholder=\"Електронна пошта\"\n              required />\n          </div>\n\n          <div class=\"sign-in__form-input-box\">\n            <input\n              type=\"password\"\n              class=\"sign-in__form-input js-form-input-password js-login-password\"\n              placeholder=\"Пароль\"\n              required />\n\n            <div class=\"sign-in__form-input-icon-box\">\n              <svg\n                width=\"24\"\n                height=\"24\"\n                class=\"sign-in__form-input-icon js-form-input-icon-view\">\n                <use xlink:href=\"#icon-eye-views\"></use>\n              </svg>\n              <span class=\"sign-in__form-input-icon-line js-icon-line-cross-out\"></span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"sign-in__form-restore\">\n          <a\n            href=\"#\"\n            class=\"sign-in__form-forgot-password-link\">\n            Забули пароль?\n          </a>\n          <a\n            href=\"#\"\n            class=\"sign-in__form-restore-link\">\n            Відновити\n          </a>\n        </div>\n\n        <button\n          class=\"sign-in__form-btn-submit\"\n          type=\"submit\">\n          Увійти\n        </button>\n\n        <div class=\"sign-in__log-in-via-title-box\">\n          <p class=\"sign-in__log-in-via-title\">Або увійдіть через</p>\n        </div>\n\n        <ul class=\"sign-in__log-in-via-list\">\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form_steam\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form-apple\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form_google\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form-facebook\"></use>\n            </svg>\n          </li>\n        </ul>`;\n}\n","export function toggleVisiblePassword(form: HTMLFormElement): void {\n  const btnReview = form.querySelector('.js-form-input-icon-view');\n\n  btnReview?.addEventListener('click', () => {\n    const passwordInput = form.querySelector('.js-form-input-password') as HTMLInputElement;\n    const lineCrossOut = form.querySelector('.js-icon-line-cross-out') as HTMLElement;\n\n    if (passwordInput.type === 'password') {\n      passwordInput.type = 'text';\n      lineCrossOut.style.display = 'none';\n      return;\n    }\n\n    passwordInput.type = 'password';\n    lineCrossOut.style.display = 'inline-block';\n  });\n}\n","import { signInWithEmailAndPassword } from 'firebase/auth';\nimport { auth } from '@/ts/utils/firebaseConfig';\nimport { markup } from './createMarkup';\nimport { toggleVisiblePassword } from '@/ts/utils/toggleVisiblePassword';\n\nexport function handlerLogin(form: HTMLFormElement) {\n  form.innerHTML = markup();\n\n  form.addEventListener('submit', (e: Event) => {\n    e.preventDefault();\n    const email = (document.querySelector('.js-login-email') as HTMLInputElement).value;\n    const password = (document.querySelector('.js-login-password') as HTMLInputElement).value;\n\n    signInWithEmailAndPassword(auth, email, password)\n      .then(userCredential => {\n        const user = userCredential.user;\n\n        console.log('User signed in:', user);\n\n        window.location.href = '/cabinet';\n      })\n      .catch(error => {\n        console.error('Error signing in:', error);\n        alert('Не вдалося увійти. Перевірте свій email або пароль і спробуйте ще раз.');\n      });\n  });\n\n  toggleVisiblePassword(form);\n}\n","export function markup(): string {\n  return `\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"text\"\n            class=\"sign-in__form-input js-input-nickname\"\n            placeholder=\"Введіть нікнейм\"\n            pattern=\"^[a-zA-Zа-яА-ЯїЇєЄіІ]{2,15}$\"\n            required />\n        </div>\n\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"email\"\n            class=\"sign-in__form-input js-form-input-email\"\n            placeholder=\"Електронна пошта\"\n            required />\n        </div>\n\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"password\"\n            class=\"sign-in__form-input js-form-input-password\"\n            placeholder=\"Придумайте пароль\"\n            required />\n\n          <div class=\"sign-in__form-input-icon-box\">\n            <svg\n              width=\"24\"\n              height=\"24\"\n              class=\"sign-in__form-input-icon js-form-input-icon-view\">\n              <use xlink:href=\"#icon-eye-views\"></use>\n            </svg>\n            <span class=\"sign-in__form-input-icon-line js-icon-line-cross-out\"></span>\n          </div>\n        </div>\n\n        <button\n          class=\"sign-in__form-btn-submit sign-in__form-btn-submit_create\"\n          type=\"submit\">\n          Створити\n        </button>`;\n}\n","interface PasswordCriteria {\n  minLength: number;\n  minLowercase: number;\n  minUppercase: number;\n  minNumbers: number;\n  minSymbols: number;\n}\nexport const passwordCriteria: PasswordCriteria = {\n  minLength: 8,\n  minLowercase: 1,\n  minUppercase: 1,\n  minNumbers: 1,\n  minSymbols: 0,\n};\n","import { createUserWithEmailAndPassword, updateProfile, User } from 'firebase/auth';\nimport { auth } from '../../../utils/firebaseConfig';\n\nimport { passwordCriteria } from './passwordCriteria';\nimport { isEmail, isStrongPassword } from 'validator';\n\nexport async function registerUser(\n  email: string,\n  password: string,\n  nickname: string\n): Promise<User | void> {\n  // Валідація email та пароля\n  if (!isEmail(email)) {\n    console.log('Invalid email address');\n    return;\n  }\n  if (!isStrongPassword(password, passwordCriteria)) {\n    console.log('Password is not strong enough');\n    return;\n  }\n\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    await updateProfile(user, { displayName: nickname });\n\n    window.location.href = 'cabinet.html';\n    return user;\n  } catch (error: any) {\n    console.error('Error creating user:', error.code, error.message);\n    throw error;\n  }\n}\n","import { markup } from './createMarkup';\nimport { toggleVisiblePassword } from '@/ts/utils/toggleVisiblePassword';\nimport { registerUser } from './registerUser';\n\nexport function handlerRegistration(form: HTMLFormElement): void {\n  // markup\n  form.innerHTML = markup();\n\n  // handlerForm\n  form.addEventListener('submit', (e: Event) => {\n    e.preventDefault();\n    const email = (document.querySelector('.js-form-input-email') as HTMLInputElement).value;\n    const password = (document.querySelector('.js-form-input-password') as HTMLInputElement).value;\n    const nickname = (document.querySelector('.js-input-nickname') as HTMLInputElement).value;\n\n    registerUser(email, password, nickname)\n      .then(user => {\n        form.reset();\n      })\n      .catch(error => {\n        console.error('Registration failed:', error.message);\n      });\n  });\n\n  // toggleVisiblePassword\n  toggleVisiblePassword(form);\n}\n","import { handlerLogin } from './login/handlerLogin';\nimport { handlerRegistration } from './registration/handlerRegistration';\n\nexport function signInOrSignUpHandler(): void {\n  const signIn = document.querySelector('.js-form-btn-enter');\n  const signUp = document.querySelector('.js-form-btn-create');\n  const tumbBtns = document.querySelector('.js-form-btns-tumb');\n  const form = document.querySelector('.js-sign-in-form');\n  // --local-refs---\n\n  // signIn\n  signIn?.addEventListener('click', handlerSignIn);\n\n  function handlerSignIn(): void {\n    signIn?.classList.add('active-btn');\n    signUp?.classList.remove('active-btn');\n    tumbBtns?.classList.remove('sign-in__form-btns-tumb_active');\n\n    // handlerLogin\n    if (form instanceof HTMLFormElement) {\n      handlerLogin(form);\n    }\n  }\n  handlerSignIn();\n\n  // signUp\n  signUp?.addEventListener('click', handlersignUp);\n\n  function handlersignUp(): void {\n    signUp?.classList.add('active-btn');\n    signIn?.classList.remove('active-btn');\n    tumbBtns?.classList.add('sign-in__form-btns-tumb_active');\n\n    // handlerRegistration\n    if (form instanceof HTMLFormElement) {\n      handlerRegistration(form);\n    }\n  }\n}\n"],"names":["markup","toggleVisiblePassword","form","btnReview","passwordInput","lineCrossOut","handlerLogin","e","email","password","signInWithEmailAndPassword","auth","userCredential","user","error","passwordCriteria","registerUser","nickname","isEmail","isStrongPassword","createUserWithEmailAndPassword","updateProfile","handlerRegistration","signInOrSignUpHandler","signIn","signUp","tumbBtns","handlerSignIn","handlersignUp"],"mappings":"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"}