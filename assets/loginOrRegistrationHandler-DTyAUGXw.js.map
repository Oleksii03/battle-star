{"version":3,"file":"loginOrRegistrationHandler-DTyAUGXw.js","sources":["../../src/ts/pages/sign-in/login/createMarkup.ts","../../src/ts/pages/sign-in/login/handlerLogin.ts","../../src/ts/pages/sign-in/registration/createMarkup.ts","../../src/ts/pages/sign-in/registration/toggleVisiblePassword.ts","../../src/ts/pages/sign-in/registration/passwordCriteria.ts","../../src/ts/pages/sign-in/registration/registerUser.ts","../../src/ts/pages/sign-in/registration/handlerRegistration.ts","../../src/ts/pages/sign-in/loginOrRegistrationHandler.ts"],"sourcesContent":["export function markup(): string {\n  return `\n        <div class=\"sign-in__form-input__wrapper\">\n          <div class=\"sign-in__form-input-box\">\n            <input\n              type=\"email\"\n              class=\"sign-in__form-input\"\n              placeholder=\"Електронна пошта\"\n              required />\n          </div>\n\n          <div class=\"sign-in__form-input-box\">\n            <input\n              type=\"password\"\n              class=\"sign-in__form-input\"\n              placeholder=\"Пароль\"\n              required />\n\n            <div class=\"sign-in__form-input-icon-box\">\n              <svg\n                width=\"24\"\n                height=\"24\"\n                class=\"sign-in__form-input-icon\">\n                <use xlink:href=\"#icon-eye-views\"></use>\n              </svg>\n              <span class=\"sign-in__form-input-icon-line\"></span>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"sign-in__form-restore\">\n          <a\n            href=\"#\"\n            class=\"sign-in__form-forgot-password-link\">\n            Забули пароль?\n          </a>\n          <a\n            href=\"#\"\n            class=\"sign-in__form-restore-link\">\n            Відновити\n          </a>\n        </div>\n\n        <button\n          class=\"sign-in__form-btn-submit\"\n          type=\"submit\">\n          Увійти\n        </button>\n\n        <div class=\"sign-in__log-in-via-title-box\">\n          <p class=\"sign-in__log-in-via-title\">Або увійдіть через</p>\n        </div>\n\n        <ul class=\"sign-in__log-in-via-list\">\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form_steam\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form-apple\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form_google\"></use>\n            </svg>\n          </li>\n\n          <li class=\"sign-in__log-in-via-item\">\n            <svg\n              width=\"44\"\n              height=\"44\"\n              class=\"sign-in__log-in-via-icon\">\n              <use xlink:href=\"#icon-form-facebook\"></use>\n            </svg>\n          </li>\n        </ul>`;\n}\n","import { markup } from '../login/createMarkup';\n\nexport function handlerLogin(form: HTMLFormElement): void {\n  form.innerHTML = markup();\n}\n","export function markup(): string {\n  return `\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"text\"\n            class=\"sign-in__form-input js-input-nickname\"\n            placeholder=\"Введіть нікнейм\"\n            pattern=\"^[a-zA-Zа-яА-ЯїЇєЄіІ]{2,15}$\"\n            required />\n        </div>\n\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"email\"\n            class=\"sign-in__form-input js-form-input-email\"\n            placeholder=\"Електронна пошта\"\n            required />\n        </div>\n\n        <div class=\"sign-in__form-input-box\">\n          <input\n            type=\"password\"\n            class=\"sign-in__form-input js-form-input-password\"\n            placeholder=\"Придумайте пароль\"\n            required />\n\n          <div class=\"sign-in__form-input-icon-box\">\n            <svg\n              width=\"24\"\n              height=\"24\"\n              class=\"sign-in__form-input-icon js-form-input-icon-view\">\n              <use xlink:href=\"#icon-eye-views\"></use>\n            </svg>\n            <span class=\"sign-in__form-input-icon-line js-icon-line-cross-out\"></span>\n          </div>\n        </div>\n\n        <button\n          class=\"sign-in__form-btn-submit sign-in__form-btn-submit_create\"\n          type=\"submit\">\n          Створити\n        </button>`;\n}\n","export function toggleVisiblePassword(form: HTMLFormElement): void {\n  const btnReview = form.querySelector('.js-form-input-icon-view');\n\n  btnReview?.addEventListener('click', () => {\n    const passwordInput = document.querySelector('.js-form-input-password') as HTMLInputElement;\n    const lineCrossOut = document.querySelector('.js-icon-line-cross-out') as HTMLElement;\n\n    if (passwordInput.type === 'password') {\n      passwordInput.type = 'text';\n      lineCrossOut.style.display = 'none';\n      return;\n    }\n\n    passwordInput.type = 'password';\n    lineCrossOut.style.display = 'inline-block';\n  });\n}\n","interface PasswordCriteria {\n  minLength: number;\n  minLowercase: number;\n  minUppercase: number;\n  minNumbers: number;\n  minSymbols: number;\n}\nexport const passwordCriteria: PasswordCriteria = {\n  minLength: 8,\n  minLowercase: 1,\n  minUppercase: 1,\n  minNumbers: 1,\n  minSymbols: 0,\n};\n","import { createUserWithEmailAndPassword, updateProfile, User } from 'firebase/auth';\nimport { auth } from '../../../utils/firebaseConfig';\n\nimport { passwordCriteria } from './passwordCriteria';\nimport { isEmail, isStrongPassword } from 'validator';\n\nexport async function registerUser(\n  email: string,\n  password: string,\n  nickname: string\n): Promise<User | void> {\n  // Валідація email та пароля\n  if (!isEmail(email)) {\n    console.log('Invalid email address');\n    return;\n  }\n  if (!isStrongPassword(password, passwordCriteria)) {\n    console.log('Password is not strong enough');\n    return;\n  }\n\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    await updateProfile(user, { displayName: nickname });\n\n    window.location.href = 'cabinet.html';\n    return user;\n  } catch (error: any) {\n    console.error('Error creating user:', error.code, error.message);\n    throw error;\n  }\n}\n","import { markup } from './createMarkup';\nimport { toggleVisiblePassword } from './toggleVisiblePassword';\nimport { registerUser } from './registerUser';\n\nexport function handlerRegistration(form: HTMLFormElement): void {\n  // markup\n  form.innerHTML = markup();\n\n  // handlerForm\n  form.addEventListener('submit', (e: Event) => {\n    e.preventDefault();\n    const email = (document.querySelector('.js-form-input-email') as HTMLInputElement).value;\n    const password = (document.querySelector('.js-form-input-password') as HTMLInputElement).value;\n    const nickname = (document.querySelector('.js-input-nickname') as HTMLInputElement).value;\n\n    registerUser(email, password, nickname)\n      .then(user => {\n        console.log(user);\n        form.reset();\n      })\n      .catch(error => {\n        console.error('Registration failed:', error.message);\n      });\n  });\n\n  // toggleVisiblePassword\n  toggleVisiblePassword(form);\n}\n","import { handlerLogin } from './login/handlerLogin';\nimport { handlerRegistration } from './registration/handlerRegistration';\n\nexport function signInOrSignUpHandler(): void {\n  const signIn = document.querySelector('.js-form-btn-enter');\n  const signUp = document.querySelector('.js-form-btn-create');\n  const tumbBtns = document.querySelector('.js-form-btns-tumb');\n  const form = document.querySelector('.js-sign-in-form');\n  // --local-refs---\n\n  // signIn\n  signIn?.addEventListener('click', handlerSignIn);\n\n  function handlerSignIn(): void {\n    signIn?.classList.add('active-btn');\n    signUp?.classList.remove('active-btn');\n    tumbBtns?.classList.remove('sign-in__form-btns-tumb_active');\n\n    // handlerLogin\n    if (form instanceof HTMLFormElement) {\n      handlerLogin(form);\n    }\n  }\n  handlerSignIn();\n\n  // signUp\n  signUp?.addEventListener('click', handlersignUp);\n\n  function handlersignUp(): void {\n    signUp?.classList.add('active-btn');\n    signIn?.classList.remove('active-btn');\n    tumbBtns?.classList.add('sign-in__form-btns-tumb_active');\n\n    // handlerRegistration\n    if (form instanceof HTMLFormElement) {\n      handlerRegistration(form);\n    }\n  }\n}\n"],"names":["markup","handlerLogin","form","toggleVisiblePassword","btnReview","passwordInput","lineCrossOut","passwordCriteria","registerUser","email","password","nickname","isEmail","isStrongPassword","user","createUserWithEmailAndPassword","auth","updateProfile","error","handlerRegistration","e","signInOrSignUpHandler","signIn","signUp","tumbBtns","handlerSignIn","handlersignUp"],"mappings":"iGAAO,SAASA,GAAiB,CACxB,MAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAyFT,CCxFO,SAASC,EAAaC,EAA6B,CACxDA,EAAK,UAAYF,GACnB,CCJO,SAASA,GAAiB,CACxB,MAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAyCT,CC1CO,SAASG,EAAsBD,EAA6B,CAC3D,MAAAE,EAAYF,EAAK,cAAc,0BAA0B,EAEpDE,GAAA,MAAAA,EAAA,iBAAiB,QAAS,IAAM,CACnC,MAAAC,EAAgB,SAAS,cAAc,yBAAyB,EAChEC,EAAe,SAAS,cAAc,yBAAyB,EAEjE,GAAAD,EAAc,OAAS,WAAY,CACrCA,EAAc,KAAO,OACrBC,EAAa,MAAM,QAAU,OAC7B,MACF,CAEAD,EAAc,KAAO,WACrBC,EAAa,MAAM,QAAU,cAAA,EAEjC,CCTO,MAAMC,EAAqC,CAChD,UAAW,EACX,aAAc,EACd,aAAc,EACd,WAAY,EACZ,WAAY,CACd,ECPsB,eAAAC,EACpBC,EACAC,EACAC,EACsB,CAElB,GAAA,CAACC,EAAAA,QAAQH,CAAK,EAAG,CACnB,QAAQ,IAAI,uBAAuB,EACnC,MACF,CACA,GAAI,CAACI,EAAA,iBAAiBH,EAAUH,CAAgB,EAAG,CACjD,QAAQ,IAAI,+BAA+B,EAC3C,MACF,CAEI,GAAA,CAEF,MAAMO,GADiB,MAAMC,EAA+BC,EAAMP,EAAOC,CAAQ,GACrD,KAC5B,aAAMO,EAAcH,EAAM,CAAE,YAAaH,CAAU,CAAA,EAEnD,OAAO,SAAS,KAAO,eAChBG,QACAI,EAAY,CACnB,cAAQ,MAAM,uBAAwBA,EAAM,KAAMA,EAAM,OAAO,EACzDA,CACR,CACF,CC5BO,SAASC,EAAoBjB,EAA6B,CAE/DA,EAAK,UAAYF,IAGZE,EAAA,iBAAiB,SAAWkB,GAAa,CAC5CA,EAAE,eAAe,EACjB,MAAMX,EAAS,SAAS,cAAc,sBAAsB,EAAuB,MAC7EC,EAAY,SAAS,cAAc,yBAAyB,EAAuB,MACnFC,EAAY,SAAS,cAAc,oBAAoB,EAAuB,MAEpFH,EAAaC,EAAOC,EAAUC,CAAQ,EACnC,KAAaG,GAAA,CACZ,QAAQ,IAAIA,CAAI,EAChBZ,EAAK,MAAM,CAAA,CACZ,EACA,MAAegB,GAAA,CACN,QAAA,MAAM,uBAAwBA,EAAM,OAAO,CAAA,CACpD,CAAA,CACJ,EAGDf,EAAsBD,CAAI,CAC5B,CCxBO,SAASmB,GAA8B,CACtC,MAAAC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAS,SAAS,cAAc,qBAAqB,EACrDC,EAAW,SAAS,cAAc,oBAAoB,EACtDtB,EAAO,SAAS,cAAc,kBAAkB,EAI9CoB,GAAA,MAAAA,EAAA,iBAAiB,QAASG,GAElC,SAASA,GAAsB,CACrBH,GAAA,MAAAA,EAAA,UAAU,IAAI,cACdC,GAAA,MAAAA,EAAA,UAAU,OAAO,cACfC,GAAA,MAAAA,EAAA,UAAU,OAAO,kCAGvBtB,aAAgB,iBAClBD,EAAaC,CAAI,CAErB,CACcuB,IAGNF,GAAA,MAAAA,EAAA,iBAAiB,QAASG,GAElC,SAASA,GAAsB,CACrBH,GAAA,MAAAA,EAAA,UAAU,IAAI,cACdD,GAAA,MAAAA,EAAA,UAAU,OAAO,cACfE,GAAA,MAAAA,EAAA,UAAU,IAAI,kCAGpBtB,aAAgB,iBAClBiB,EAAoBjB,CAAI,CAE5B,CACF"}