{"version":3,"file":"tournaments.js","sources":["../../../src/ts/components/createCalendar.ts","../../../src/ts/pages/tournaments/setDataToFirebase.ts","../../../src/ts/pages/tournaments/closeTournamentsBackdrop.ts","../../../src/ts/pages/tournaments/backdropListMarkup.ts","../../../src/ts/pages/tournaments/openTournamentsBackdrop.ts","../../../src/ts/pages/tournaments/getFormData.ts","../../../src/ts/pages/tournaments/handlerTournamentsForm.ts","../../../src/ts/pages/tournaments/handlerRankTrackItem.ts","../../../src/ts/pages/tournaments/handlerRankTrack.ts","../../../src/ts/pages/tournaments/tournamentsPageHandler.ts","../../../src/ts/tournaments.ts"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport { Ukrainian } from 'flatpickr/dist/l10n/uk.js';\n\nlet startTournamentDate = '';\nlet endTournamentDate = '';\n\nexport function createCalendar() {\n  const today = new Date();\n  const threeDaysLater = new Date();\n  threeDaysLater.setDate(today.getDate() + 3);\n\n  function updateDates(selectedDates: Date[]) {\n    if (selectedDates.length === 2) {\n      const startDate = selectedDates[0];\n      const endDate = selectedDates[1];\n      const options: any = { year: 'numeric', month: '2-digit', day: '2-digit' };\n      const formatter = new Intl.DateTimeFormat('uk-UA', options);\n      const formattedStartDate = formatter.format(startDate);\n      const formattedEndDate = formatter.format(endDate);\n\n      updateFormDates(formattedStartDate, formattedEndDate);\n    }\n  }\n\n  const calendar = flatpickr('#formDatetimeCalendar', {\n    inline: true,\n    minDate: today,\n    defaultDate: [today, threeDaysLater],\n    dateFormat: 'Y-m-d',\n    mode: 'range',\n    monthSelectorType: 'static',\n    showMonths: 1,\n    locale: {\n      ...Ukrainian,\n      months: {\n        shorthand: [\n          'Січ',\n          'Лют',\n          'Бер',\n          'Кві',\n          'Тра',\n          'Чер',\n          'Лип',\n          'Сер',\n          'Вер',\n          'Жов',\n          'Лис',\n          'Гру',\n        ],\n        longhand: [\n          'Січ',\n          'Лют',\n          'Бер',\n          'Кві',\n          'Тра',\n          'Чер',\n          'Лип',\n          'Сер',\n          'Вер',\n          'Жов',\n          'Лис',\n          'Гру',\n        ],\n      },\n    },\n    onChange: function (selectedDates) {\n      updateDates(selectedDates);\n    },\n  });\n\n  updateDates([today, threeDaysLater]);\n}\n\nfunction updateFormDates(startDate: string, endDate: string) {\n  startTournamentDate = startDate;\n  endTournamentDate = endDate;\n}\n\nexport { startTournamentDate, endTournamentDate };\n","import { getFirestore, collection, addDoc } from 'firebase/firestore';\nimport { app } from '@/ts/utils/firebaseConfig';\nimport { handleError } from '@/ts/utils/handleError';\nimport { TournamentsForm } from '@/ts/types/pages/tournaments';\n\nexport async function setDataToFirebase(formObj: TournamentsForm) {\n  const db = getFirestore(app);\n\n  try {\n    const docRef = await addDoc(collection(db, 'tournaments'), formObj);\n    console.log('Документ записано з ID: ', docRef.id);\n  } catch (e) {\n    handleError(e);\n  } finally {\n    location.reload();\n  }\n}\n","import { enablePageScroll } from 'scroll-lock';\nimport { setDataToFirebase } from './setDataToFirebase';\nimport { TournamentsForm } from '@/ts/types/pages/tournaments';\n\nexport function closeTournamentsBackdrop(formObj: TournamentsForm) {\n  const backdrop = document.querySelector('.js-tournaments-backdrop');\n  const closeBtn = document.querySelector('.js-cancel');\n  const confirmBtn = document.querySelector('.js-confirm');\n\n  closeBtn?.addEventListener('click', () => {\n    location.reload();\n    closeBackdrop();\n  });\n\n  confirmBtn?.addEventListener('click', () => {\n    setDataToFirebase(formObj);\n    closeBackdrop();\n  });\n\n  function closeBackdrop() {\n    backdrop?.classList.remove('tournaments-backdrop_active');\n    enablePageScroll();\n  }\n}\n","import { closeTournamentsBackdrop } from './closeTournamentsBackdrop';\nimport { TournamentsForm } from '@/ts/types/pages/tournaments';\n\nexport function backdropListMarkup(formObj: TournamentsForm) {\n  const content = document.querySelector('.js-tournaments-backdrop-content') as HTMLDivElement;\n  const {\n    name,\n    description,\n    rank,\n    teams,\n    rate,\n    regime,\n    startTournament,\n    endTournament,\n    time,\n    limitRegion,\n  } = formObj;\n\n  content.innerHTML = `<ul class=\"tournaments-backdrop__content-list\">\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Ваш турнір:</p>\n        <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${name}</p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Опис:</p>\n          <div class=\"separator\"></div>\n        ${description ? `<p class=\"tournaments-backdrop__content-item-text\">${description}</p>` : '<p class=\"tournaments-backdrop__content-item-text\">не вибрано</p>'} \n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Ранг:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${rank} <span class=\"currency\">BS</span></p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Кількість команд:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${teams}</p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Ставка входу:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${rate} <span class=\"currency\">BS</span></p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Режим:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${regime}</p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Турнір починається:</p>\n          <div class=\"separator\"></div>\n        ${startTournament ? `<p class=\"tournaments-backdrop__content-item-text\">${startTournament}</p>` : '<p class=\"tournaments-backdrop__content-item-text\">не вибрано</p>'} \n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Турнір завершується:</p>\n          <div class=\"separator\"></div>\n        ${endTournament ? `<p class=\"tournaments-backdrop__content-item-text\">${endTournament}</p>` : '<p class=\"tournaments-backdrop__content-item-text\">не вибрано</p>'} \n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Час початку:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${time}</p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Обмежити участь вашим регіоном:</p>\n          <div class=\"separator\"></div>\n       ${limitRegion === 'on' ? '<p class=\"tournaments-backdrop__content-item-text\">так</p>' : '<p class=\"tournaments-backdrop__content-item-text\">ні</p>'} \n      </li>\n\n      <li class=\"tournaments-backdrop__content-item tournaments-backdrop__content-item_last\">\n       <button\n        type=\"button\"\n        class=\"confirm js-confirm\">\n        Підтвердити\n       </button>\n       <div class=\"separator\"></div>\n       <button\n        type=\"button\"\n        class=\"cancel js-cancel\">\n        Скасувати\n       </button>\n     </li>\n    </ul>`;\n\n  closeTournamentsBackdrop(formObj);\n}\n","import { disablePageScroll } from 'scroll-lock';\nimport { backdropListMarkup } from './backdropListMarkup';\nimport { TournamentsForm } from '@/ts/types/pages/tournaments';\n\nexport function openTournamentsBackdrop(formObj: TournamentsForm) {\n  const backdrop = document.querySelector('.js-tournaments-backdrop');\n\n  backdrop?.classList.add('tournaments-backdrop_active');\n  disablePageScroll();\n\n  setTimeout(() => backdropListMarkup(formObj), 5000);\n}\n","import { TournamentsForm } from '@/ts/types/pages/tournaments';\nimport { startTournamentDate, endTournamentDate } from '@/ts/components/createCalendar';\nimport { openTournamentsBackdrop } from './openTournamentsBackdrop';\n\nexport function getFormData() {\n  const form = document.querySelector('.js-tournaments-form') as HTMLFormElement;\n\n  form?.addEventListener('submit', handleForm);\n\n  function handleForm(e: Event) {\n    e.preventDefault();\n    const inputs = (e.target as HTMLFormElement).elements;\n\n    const formValues: TournamentsForm = {\n      name: (inputs.namedItem('name') as HTMLInputElement)?.value ?? '',\n      description: (inputs.namedItem('description') as HTMLInputElement)?.value ?? '',\n      limitRegion: 'of',\n      rank: '',\n      rate: '',\n      regime: '',\n      teams: '',\n      time: '',\n      startTournament: startTournamentDate ?? '',\n      endTournament: endTournamentDate ?? '',\n    };\n\n    [...inputs].forEach(input => {\n      if ((input as HTMLInputElement).checked) {\n        formValues[(input as HTMLInputElement).name as keyof TournamentsForm] = (\n          input as HTMLInputElement\n        ).value;\n      }\n    });\n\n    openTournamentsBackdrop(formValues);\n    form.reset();\n  }\n}\n","import { getFormData } from './getFormData';\n\nexport function handlerTournamentsForm() {\n  getFormData();\n}\n","import { rankList } from './handlerRankTrack';\n\nexport function destinationHandler(targetLi: HTMLLIElement) {\n  const inputs = document.querySelectorAll('.js-rank-item-input');\n  const idx = findIdx(targetLi);\n  setActiveInputsColor(idx, inputs);\n  setScaleProgress(idx);\n}\n\nfunction findIdx(targetEl: HTMLElement) {\n  return [...rankList.children].indexOf(targetEl);\n}\n\nfunction setActiveInputsColor(idx: number, inputs: NodeListOf<Element>) {\n  inputs.forEach(input => input.classList.remove('form__rank-item-input_active'));\n  for (let i = 0; i < idx; i++) {\n    const input = inputs[i];\n    input.classList.add('form__rank-item-input_active');\n  }\n}\n\nfunction setScaleProgress(idx: number) {\n  const rankTrackTumb = document.querySelector('.js-rank-track-tumb') as HTMLDivElement;\n\n  switch (idx) {\n    case 0:\n      rankTrackTumb.style.width = 4 + '%';\n      break;\n    case 1:\n      rankTrackTumb.style.width = 27 + '%';\n      break;\n    case 2:\n      rankTrackTumb.style.width = 50 + '%';\n      break;\n    case 3:\n      rankTrackTumb.style.width = 73 + '%';\n      break;\n    case 4:\n      rankTrackTumb.style.width = 100 + '%';\n      break;\n    default:\n      rankTrackTumb.style.width = 4 + '%';\n  }\n}\n","import { destinationHandler } from './handlerRankTrackItem';\n// ---imports---\nexport const rankList = document.querySelector('.js-rank-track-list')!;\n// ---reusable-refs---`\n\nexport function handlerRankTrack() {\n  rankList?.addEventListener('click', handlerTrackList);\n\n  function handlerTrackList(e: Event) {\n    const targetLi = (e.target as HTMLElement).closest('li');\n\n    if (targetLi?.tagName !== 'LI') return;\n\n    destinationHandler(targetLi);\n  }\n}\n","import { handlerTournamentsForm } from './handlerTournamentsForm';\nimport { handlerRankTrack } from './handlerRankTrack';\n\nexport function handlerTournaments() {\n  handlerTournamentsForm();\n  handlerRankTrack();\n}\n","import { header } from './components/header';\nimport { closeDropDownList } from './components/closeDropDownList';\nimport { onStateUserChanged } from './pages/sign-in/cabinet/cabinet';\nimport { logoutThroughSidebar } from './pages/sign-in/cabinet/signOut';\nimport { settingsHtmlComponents } from './utils/settingsHtmlComponents';\nimport { createCalendar } from './components/createCalendar';\nimport { handlerTournaments } from './pages/tournaments/tournamentsPageHandler';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  header();\n  closeDropDownList();\n  onStateUserChanged();\n  logoutThroughSidebar();\n  settingsHtmlComponents();\n  createCalendar();\n  handlerTournaments();\n});\n"],"names":["startTournamentDate","endTournamentDate","createCalendar","today","threeDaysLater","updateDates","selectedDates","startDate","endDate","options","formatter","formattedStartDate","formattedEndDate","updateFormDates","flatpickr","Ukrainian","setDataToFirebase","formObj","db","getFirestore","app","docRef","addDoc","collection","e","handleError","closeTournamentsBackdrop","backdrop","closeBtn","confirmBtn","closeBackdrop","enablePageScroll","backdropListMarkup","content","name","description","rank","teams","rate","regime","startTournament","endTournament","time","limitRegion","openTournamentsBackdrop","disablePageScroll","getFormData","form","handleForm","inputs","formValues","_a","_b","input","handlerTournamentsForm","destinationHandler","targetLi","idx","findIdx","setActiveInputsColor","setScaleProgress","targetEl","rankList","i","rankTrackTumb","handlerRankTrack","handlerTrackList","handlerTournaments","header","closeDropDownList","onStateUserChanged","logoutThroughSidebar","settingsHtmlComponents"],"mappings":"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"}