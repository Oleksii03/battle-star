{"version":3,"file":"tournaments.js","sources":["../../../src/ts/components/createCalendar.ts","../../../src/ts/pages/tournaments/setDataToFirebase.ts","../../../src/ts/pages/tournaments/closeTournamentsBackdrop.ts","../../../src/ts/pages/tournaments/backdropListMarkup.ts","../../../src/ts/pages/tournaments/openTournamentsBackdrop.ts","../../../src/ts/pages/tournaments/getFormData.ts","../../../src/ts/pages/tournaments/handlerTournamentsForm.ts","../../../src/ts/pages/tournaments/tournamentsPageHandler.ts","../../../src/ts/tournaments.ts"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport { Ukrainian } from 'flatpickr/dist/l10n/uk.js';\n\nlet startTournamentDate = '';\nlet endTournamentDate = '';\n\nexport function createCalendar() {\n  const today = new Date();\n  const threeDaysLater = new Date();\n  threeDaysLater.setDate(today.getDate() + 3);\n\n  flatpickr('#formDatetimeCalendar', {\n    inline: true,\n    dateFormat: 'Y-m-d',\n    mode: 'range',\n    monthSelectorType: 'static',\n    showMonths: 1,\n    locale: {\n      ...Ukrainian,\n      months: {\n        shorthand: [\n          'Січ',\n          'Лют',\n          'Бер',\n          'Кві',\n          'Тра',\n          'Чер',\n          'Лип',\n          'Сер',\n          'Вер',\n          'Жов',\n          'Лис',\n          'Гру',\n        ],\n        longhand: [\n          'Січ',\n          'Лют',\n          'Бер',\n          'Кві',\n          'Тра',\n          'Чер',\n          'Лип',\n          'Сер',\n          'Вер',\n          'Жов',\n          'Лис',\n          'Гру',\n        ],\n      },\n    },\n\n    onChange: function (selectedDates, dateStr, instance) {\n      if (selectedDates.length === 2) {\n        const startDate = selectedDates[0];\n        const endDate = selectedDates[1];\n        const options: any = { year: 'numeric', month: '2-digit', day: '2-digit' };\n        const formatter = new Intl.DateTimeFormat('uk-UA', options);\n        const formattedStartDate = formatter.format(startDate);\n        const formattedEndDate = formatter.format(endDate);\n\n        updateFormDates(formattedStartDate, formattedEndDate);\n      }\n    },\n  });\n}\n\nfunction updateFormDates(startDate: string, endDate: string) {\n  startTournamentDate = startDate;\n  endTournamentDate = endDate;\n}\n\nexport { startTournamentDate, endTournamentDate };\n","import { getFirestore, collection, addDoc } from 'firebase/firestore';\nimport { app } from '@/ts/utils/firebaseConfig';\nimport { handleError } from '@/ts/utils/handleError';\n\nexport async function setDataToFirebase(formObj: any) {\n  const db = getFirestore(app);\n\n  try {\n    const docRef = await addDoc(collection(db, 'tournaments'), formObj);\n    console.log('Документ записано з ID: ', docRef.id);\n  } catch (e) {\n    handleError(e);\n  } finally {\n    location.reload();\n  }\n}\n","import { setDataToFirebase } from './setDataToFirebase';\n\nexport function closeTournamentsBackdrop(formObj: any) {\n  const backdrop = document.querySelector('.js-tournaments-backdrop');\n  const closeBtn = document.querySelector('.js-cancel');\n  const confirmBtn = document.querySelector('.js-confirm');\n\n  closeBtn?.addEventListener('click', () => {\n    closeBackdrop();\n    location.reload();\n  });\n  confirmBtn?.addEventListener('click', () => {\n    setDataToFirebase(formObj);\n    closeBackdrop();\n  });\n\n  function closeBackdrop() {\n    backdrop?.classList.remove('tournaments-backdrop_active');\n    document.body.classList.remove('to-freeze');\n  }\n}\n","import { closeTournamentsBackdrop } from './closeTournamentsBackdrop';\n\nexport function backdropListMarkup(formObj) {\n  const content = document.querySelector('.js-tournaments-backdrop-content') as HTMLDivElement;\n  const {\n    name,\n    description,\n    rank,\n    teams,\n    rate,\n    regime,\n    startTournament,\n    endTournament,\n    time,\n    limitRegion,\n  } = formObj;\n\n  content.innerHTML = `<ul class=\"tournaments-backdrop__content-list\">\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Ваш турнір:</p>\n        <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${name}</p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Опис:</p>\n          <div class=\"separator\"></div>\n        ${description ? `<p class=\"tournaments-backdrop__content-item-text\">${description}</p>` : '<p class=\"tournaments-backdrop__content-item-text\">не вибрано</p>'} \n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Ранг:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${rank} <span class=\"currency\">BS</span></p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Кількість команд:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${teams}</p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Ставка входу:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${rate} <span class=\"currency\">BS</span></p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Режим:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${regime}</p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Турнір починається:</p>\n          <div class=\"separator\"></div>\n        ${startTournament ? `<p class=\"tournaments-backdrop__content-item-text\">${startTournament}</p>` : '<p class=\"tournaments-backdrop__content-item-text\">не вибрано</p>'} \n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Турнір завершується:</p>\n          <div class=\"separator\"></div>\n        ${endTournament ? `<p class=\"tournaments-backdrop__content-item-text\">${endTournament}</p>` : '<p class=\"tournaments-backdrop__content-item-text\">не вибрано</p>'} \n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Час початку:</p>\n          <div class=\"separator\"></div>\n        <p class=\"tournaments-backdrop__content-item-text\">${time}</p>\n      </li>\n      <li class=\"tournaments-backdrop__content-item\">\n        <p class=\"tournaments-backdrop__content-item-text\">Обмежити участь вашим регіоном:</p>\n          <div class=\"separator\"></div>\n       ${limitRegion === 'on' ? '<p class=\"tournaments-backdrop__content-item-text\">так</p>' : '<p class=\"tournaments-backdrop__content-item-text\">ні</p>'} \n      </li>\n\n      <li class=\"tournaments-backdrop__content-item tournaments-backdrop__content-item_last\">\n       <button\n        type=\"button\"\n        class=\"confirm js-confirm\">\n        Підтвердити\n       </button>\n       <div class=\"separator\"></div>\n       <button\n        type=\"button\"\n        class=\"cancel js-cancel\">\n        Скасувати\n       </button>\n     </li>\n    </ul>`;\n\n  closeTournamentsBackdrop(formObj);\n}\n","import { backdropListMarkup } from './backdropListMarkup';\n\nexport function openTournamentsBackdrop(formObj: any) {\n  const backdrop = document.querySelector('.js-tournaments-backdrop');\n\n  backdrop?.classList.add('tournaments-backdrop_active');\n  document.body.classList.add('to-freeze');\n\n  setTimeout(() => backdropListMarkup(formObj), 5000);\n}\n","import { TournamentsForm } from '@/ts/types/pages/tournaments';\nimport { startTournamentDate, endTournamentDate } from '@/ts/components/createCalendar';\nimport { openTournamentsBackdrop } from './openTournamentsBackdrop';\n\nexport function getFormData() {\n  const form = document.querySelector('.js-tournaments-form') as HTMLFormElement;\n\n  form?.addEventListener('submit', handleForm);\n\n  function handleForm(e: Event) {\n    e.preventDefault();\n    const inputs = (e.target as HTMLFormElement).elements;\n\n    const formValues: TournamentsForm = {\n      name: (inputs.namedItem('name') as HTMLInputElement)?.value ?? '',\n      description: (inputs.namedItem('description') as HTMLInputElement)?.value ?? '',\n      limitRegion: 'of',\n      rank: '',\n      rate: '',\n      regime: '',\n      teams: '',\n      time: '',\n      startTournament: startTournamentDate ?? '',\n      endTournament: endTournamentDate ?? '',\n    };\n\n    [...inputs].forEach(input => {\n      if ((input as HTMLInputElement).checked) {\n        formValues[(input as HTMLInputElement).name as keyof TournamentsForm] = (\n          input as HTMLInputElement\n        ).value;\n      }\n    });\n\n    openTournamentsBackdrop(formValues);\n    form.reset();\n  }\n}\n","import { getFormData } from './getFormData';\n\nexport function handlerTournamentsForm() {\n  getFormData();\n}\n","import { handlerTournamentsForm } from './handlerTournamentsForm';\n\nexport function handlerTournaments() {\n  handlerTournamentsForm();\n}\n","import { header } from './components/header';\nimport { closeDropDownList } from './components/closeDropDownList';\nimport { onStateUserChanged } from './pages/sign-in/cabinet/cabinet';\nimport { logoutThroughSidebar } from './pages/sign-in/cabinet/signOut';\nimport { settingsHtmlComponents } from './utils/settingsHtmlComponents';\nimport { createCalendar } from './components/createCalendar';\nimport { handlerTournaments } from './pages/tournaments/tournamentsPageHandler';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  header();\n  closeDropDownList();\n  onStateUserChanged();\n  logoutThroughSidebar();\n  settingsHtmlComponents();\n  createCalendar();\n  handlerTournaments();\n});\n"],"names":["startTournamentDate","endTournamentDate","createCalendar","today","flatpickr","Ukrainian","selectedDates","dateStr","instance","startDate","endDate","options","formatter","formattedStartDate","formattedEndDate","updateFormDates","setDataToFirebase","formObj","db","getFirestore","app","docRef","addDoc","collection","e","handleError","closeTournamentsBackdrop","backdrop","closeBtn","confirmBtn","closeBackdrop","backdropListMarkup","content","name","description","rank","teams","rate","regime","startTournament","endTournament","time","limitRegion","openTournamentsBackdrop","getFormData","form","handleForm","inputs","formValues","_a","_b","input","handlerTournamentsForm","handlerTournaments","header","closeDropDownList","onStateUserChanged","logoutThroughSidebar","settingsHtmlComponents"],"mappings":"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"}